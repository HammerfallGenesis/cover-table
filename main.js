/*
 THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
 If you want to view the source, please visit:
 https://github.com/HammerfallGenesis/obsidian-cover-table-plugin
*/

"use strict";var Ft=Object.defineProperty;var ae=Object.getOwnPropertyDescriptor;var ne=Object.getOwnPropertyNames;var ie=Object.prototype.hasOwnProperty;var oe=(c,t)=>{for(var e in t)Ft(c,e,{get:t[e],enumerable:!0})},le=(c,t,e,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let a of ne(t))!ie.call(c,a)&&a!==e&&Ft(c,a,{get:()=>t[a],enumerable:!(r=ae(t,a))||r.enumerable});return c};var se=c=>le(Ft({},"__esModule",{value:!0}),c);var Ce={};oe(Ce,{default:()=>it});module.exports=se(Ce);var N=require("obsidian"),te=require("fs"),ee=require("path"),re=require("obsidian");var jt=()=>({base:{white:"#ffffff",black:"#000000"},heading:{h1:"#ff5555",h2:"#ffae42",h3:"#f7ff50",h4:"#4cd964",h5:"#5ac8fa",h6:"#af52de"},list:{bullet:"rgb(54,54,190)",olMarker:"red"},bold:{bold:"rgb(138,0,119)"},italic:{italic:"rgb(255,130,178)"},table:{border:"#c0c0c0",shadow:"rgba(0,0,0,.10)",rowEven:"rgba(0,0,0,.03)",rowHover:"rgba(0,0,0,.07)"},image:{border:"#d0d0d0",shadow:"rgba(0,0,0,.10)"}}),et={light:jt(),dark:(()=>{let c=jt();return c.list={bullet:"rgb(89,89,223)",olMarker:"red"},c.bold={bold:"rgb(255,188,188)"},c.italic={italic:"rgb(255, 234, 234)"},c.table={border:"#444444",shadow:"rgba(0,0,0,.55)",rowEven:"transparent",rowHover:"rgba(255,255,255,.07)"},c.image={border:"#555555",shadow:"rgba(0,0,0,.60)"},c})()},G={baseWhite:"--ct-base-white",baseBlack:"--ct-base-black",h1:"--ct-h1-dark",h2:"--ct-h2-dark",h3:"--ct-h3-dark",h4:"--ct-h4-dark",h5:"--ct-h5-dark",h6:"--ct-h6-dark",bullet:"--bullet-new-color",olMarker:"--ct-ol-marker-dark",bold:"--ct-bold",italic:"--ct-italic",tBorder:"--ct-table-border",tShadow:"--ct-table-shadow",tEven:"--ct-table-row-even",tHover:"--ct-table-row-hover",iBorder:"--ct-image-border",iShadow:"--ct-image-shadow"};function rt(c,t,e=document.documentElement){let r=t[c],a=e instanceof Document?e.documentElement:e,n=c==="dark"?"dark":"light";a.style.setProperty(G.baseWhite,r.base.white),a.style.setProperty(G.baseBlack,r.base.black),["h1","h2","h3","h4","h5","h6"].forEach(i=>a.style.setProperty(`--ct-${i}-${n}`,r.heading[i])),a.style.setProperty(`--ct-bullet-${n}`,r.list.bullet),a.style.setProperty(`--ct-ol-marker-${n}`,r.list.olMarker),a.style.setProperty(`--ct-bold-${n}`,r.bold.bold),a.style.setProperty(`--ct-italic-${n}`,r.italic.italic),a.style.setProperty(G.tBorder,r.table.border),a.style.setProperty(G.tShadow,r.table.shadow),a.style.setProperty(G.tEven,r.table.rowEven),a.style.setProperty(G.tHover,r.table.rowHover),a.style.setProperty("--ct-image-border",r.image.border),a.style.setProperty("--ct-image-shadow",r.image.shadow)}var R=require("obsidian");function At(c){return(...t)=>st&&console[c]("[CT]",...t)}var st=!0,b={setDebug(c){st=c},d:At("debug"),w:At("warn"),e:At("error"),time(c){st&&console.time(`[CT] ${c}`)},timeEnd(c){st&&console.timeEnd(`[CT] ${c}`)}};var zt={hideZeroFolders:!0,listCallouts:[],tokens:structuredClone(et),baseVars:{},customCss:"",debugLog:!1},ct={baseWhite:"Base \u2027 \uBC30\uACBD(\uD770\uC0C9)",baseBlack:"Base \u2027 \uAE00\uC790(\uAC80\uC815)",h1:"H1 (Red)",h2:"H2 (Orange)",h3:"H3 (Yellow)",h4:"H4 (Green)",h5:"H5 (Blue)",h6:"H6 (Violet)",bullet:"List Bullet",olMarker:"Ordered-list Number",tBorder:"Table Border",tShadow:"Table Shadow",tRowEven:"Table Row (even)",tRowHover:"Table Row (hover)",iBorder:"Image Border",iShadow:"Image Shadow"},dt=5,ut=class extends R.PluginSettingTab{constructor(e,r){super(e,r);this.plugin=r}async commit(){await this.plugin.saveSettings(),rt("dark",this.plugin.settings.tokens),rt("light",this.plugin.settings.tokens),this.plugin.rebuildListCallouts()}fillMissing(e){["dark","light"].forEach(r=>{let a=et[r],n=e[r];n.base={...a.base,...n.base},n.heading={...a.heading,...n.heading},n.list={...a.list,...n.list},n.bold={...a.bold,...n.bold},n.italic={...a.italic,...n.italic};let i=(o,l)=>{Object.keys(o).forEach(s=>{var d;(d=l[s])!=null||(l[s]=o[s])})};n.table={...a.table,...n.table},n.image={...a.image,...n.image}})}addDualPicker(e,r,a,n,i,o){let l=new R.Setting(e).setName(r).setDesc("\u2600 Light \u25B8 left   \xB7   \u{1F319} Dark \u25B8 right"),s=(d,u,h,p)=>{var g;d.setValue(u()).onChange(async v=>{h(v),await this.commit()});let m=(g=d.inputEl)!=null?g:null;m?m.setAttribute("title",p):queueMicrotask(()=>{var v;m=(v=d.containerEl)==null?void 0:v.querySelector("input[type='color']"),m==null||m.setAttribute("title",p)})};l.addColorPicker(d=>s(d,a,i,"Light mode colour (\u2600)")),l.addColorPicker(d=>s(d,n,o,"Dark mode colour (\u{1F319})"))}buildCalloutRow(e,r,a,n){let i=new R.Setting(e);i.addText(l=>l.setPlaceholder("\u2605").setValue(r.char).onChange(async s=>{r.char=s.trim().charAt(0)||"\u2022",await this.commit(),this.display()})).setName(`Marker ${a+1}`);let o=(l,s,d)=>{i.addColorPicker(u=>{u.setValue(s()).onChange(async p=>{d(p),await this.commit()});let h=()=>{var g;let m=(g=u.containerEl)==null?void 0:g.querySelector("input[type='color']");m==null||m.setAttribute("title",l)};h(),queueMicrotask(h)})};o("bgLight",()=>r.bgLight,l=>r.bgLight=l),o("fgLight",()=>r.fgLight,l=>r.fgLight=l),o("bgDark",()=>r.bgDark,l=>r.bgDark=l),o("fgDark",()=>r.fgDark,l=>r.fgDark=l),i.addExtraButton(l=>l.setIcon("trash").setTooltip("Delete").onClick(async()=>{n.listCallouts.splice(a,1),await this.commit(),this.display()}))}newCallout(){return{char:"\u2605",bgLight:"#dbeafe",fgLight:"#1e40af",bgDark:"#1e3a8a",fgDark:"#dbeafe"}}display(){let e=this.containerEl;e.empty();let r=this.plugin.settings;this.fillMissing(r.tokens),new R.Setting(e).setName("Debug \uB85C\uADF8 \uD45C\uC2DC").addToggle(a=>a.setValue(this.plugin.settings.debugLog).onChange(async n=>{this.plugin.settings.debugLog=n,await this.plugin.saveSettings(),b.setDebug(n)})),new R.Setting(e).setName("_0  On / Off").setDesc('Hide every folder whose name starts with "0_" in Explorer; files inside remain visible').addToggle(a=>a.setValue(r.hideZeroFolders).onChange(async n=>{r.hideZeroFolders=n,await this.commit(),this.plugin.applyZeroFolderVisibility()})),e.createEl("h3",{text:"\u{1F3A8} Color palette \u2013 Light / Dark"}),e.createEl("p",{text:"Each row shows two colour pickers:  \u2600  = Light mode   \xB7   \u{1F319}  = Dark mode.",cls:"ct-tip"}),this.addDualPicker(e,ct.baseWhite,()=>r.tokens.light.base.white,()=>r.tokens.dark.base.white,a=>r.tokens.light.base.white=a,a=>r.tokens.dark.base.white=a),this.addDualPicker(e,ct.baseBlack,()=>r.tokens.light.base.black,()=>r.tokens.dark.base.black,a=>r.tokens.light.base.black=a,a=>r.tokens.dark.base.black=a),e.createEl("h4",{text:"Headings (H1\u2013H6)"}),["h1","h2","h3","h4","h5","h6"].forEach(a=>this.addDualPicker(e,ct[a],()=>r.tokens.light.heading[a],()=>r.tokens.dark.heading[a],n=>r.tokens.light.heading[a]=n,n=>r.tokens.dark.heading[a]=n)),e.createEl("h4",{text:"List / Bold"}),["bullet","olMarker"].forEach(a=>this.addDualPicker(e,ct[a],()=>r.tokens.light.list[a],()=>r.tokens.dark.list[a],n=>r.tokens.light.list[a]=n,n=>r.tokens.dark.list[a]=n)),this.addDualPicker(e,"Bold text",()=>r.tokens.light.bold.bold,()=>r.tokens.dark.bold.bold,a=>r.tokens.light.bold.bold=a,a=>r.tokens.dark.bold.bold=a),this.addDualPicker(e,"Italic text",()=>r.tokens.light.italic.italic,()=>r.tokens.dark.italic.italic,a=>r.tokens.light.italic.italic=a,a=>r.tokens.dark.italic.italic=a),e.createEl("h3",{text:"\u{1F4DD} List Callouts"}),r.listCallouts.forEach((a,n)=>this.buildCalloutRow(e,a,n,r)),new R.Setting(e).addButton(a=>{let n=r.listCallouts.length>=dt;a.setButtonText(n?"Limit reached":"+ Add").setDisabled(n).setCta().setTooltip(n?`You can register up to ${dt} callouts`:"Add a new callout").onClick(async()=>{r.listCallouts.length>=dt||(r.listCallouts.push(this.newCallout()),await this.commit(),this.display())})}).setName(`\uC0C8 Callout \uCD94\uAC00 (max ${dt})`)}};var Ot=require("obsidian");var at=require("obsidian");var w=class{static el(t,e="",r=""){let a=document.createElement(t);return e&&(a.className=e),r&&(a.textContent=r),a}};var q=class{constructor(t){this.app=t}newCanvas(){return this.create({label:"\uFF0B New canvas",cls:"interactive_table-button interactive_table-button--new-canvas",onClick:()=>{}})}create(t){let e=w.el("button",t.cls,t.label);return t.disabled?(e.classList.add(`${t.cls}--disabled`),e.setAttribute("aria-disabled","true"),e.disabled=!0,e):(e.onclick=t.onClick,e)}openFolder(t){return this.create({label:"\u21AA Open Folder",cls:"interactive_table-button interactive_table-button--open-folder",onClick:async()=>{try{let{shell:e}=window.require("electron"),r=window.require("path"),a=this.app.vault.adapter.basePath,n=r.resolve(a,t);r.extname(n)!==""?e.showItemInFolder(n):e.openPath(n)}catch(e){}}})}newNote(){return this.create({label:"\uFF0B New note",cls:"interactive_table-button interactive_table-button--new-note",onClick:()=>this.app.commands.executeCommandById("file-explorer:new-file")})}refresh(t){return this.create({label:"\u21BB",cls:"interactive_table-button interactive_table-button--refresh",onClick:t})}tagFilter(t,e){return this.create({label:t,cls:"interactive_table-button interactive_table-button--tag-filter",onClick:e})}filter(t,e){return this.create({label:t,cls:"interactive_table-button interactive_table-filter__btn",onClick:e})}pagination(t,e,r){return this.create({label:t,cls:"interactive_table-pagination__btn",disabled:e,onClick:r})}};var ht=class{static text(t={}){var r,a;let e=w.el("input",(r=t.cls)!=null?r:"");return e.type="text",e.placeholder=(a=t.placeholder)!=null?a:"",t.value!=null&&(e.value=String(t.value)),t.onEnter&&e.addEventListener("keydown",n=>{n.key==="Enter"&&t.onEnter(e.value.trim())}),t.onChange&&e.addEventListener("change",()=>t.onChange(e.value.trim())),e}static number(t={}){var r;let e=w.el("input",(r=t.cls)!=null?r:"");return e.type="number",t.min!=null&&(e.min=String(t.min)),t.max!=null&&(e.max=String(t.max)),t.step!=null&&(e.step=String(t.step)),t.value!=null&&(e.value=String(t.value)),t.onChange&&e.addEventListener("change",()=>t.onChange(e.value===""?NaN:Number(e.value))),e}static date(t={}){var r;let e=w.el("input",(r=t.cls)!=null?r:"");if(e.type="date",t.value!=null){let a=t.value instanceof Date?t.value.toISOString().slice(0,10):String(t.value);e.value=a}return t.onChange&&e.addEventListener("change",()=>t.onChange(e.value?new Date(`${e.value}T00:00:00`):"")),e}};var Y=class{static create(t=!1,e=""){return w.el("div",`ct-spinner${t?" ct-spinner--sm":""}${e?" "+e:""}`)}static default(){return Y.create()}static tiny(){return Y.create(!0)}};var C=[];for(let c=0;c<256;++c)C.push((c+256).toString(16).slice(1));function Wt(c,t=0){return(C[c[t+0]]+C[c[t+1]]+C[c[t+2]]+C[c[t+3]]+"-"+C[c[t+4]]+C[c[t+5]]+"-"+C[c[t+6]]+C[c[t+7]]+"-"+C[c[t+8]]+C[c[t+9]]+"-"+C[c[t+10]]+C[c[t+11]]+C[c[t+12]]+C[c[t+13]]+C[c[t+14]]+C[c[t+15]]).toLowerCase()}var Bt,ce=new Uint8Array(16);function $t(){if(!Bt){if(typeof crypto=="undefined"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Bt=crypto.getRandomValues.bind(crypto)}return Bt(ce)}var de=typeof crypto!="undefined"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Ht={randomUUID:de};function ue(c,t,e){var a,n,i;if(Ht.randomUUID&&!t&&!c)return Ht.randomUUID();c=c||{};let r=(i=(n=c.random)!=null?n:(a=c.rng)==null?void 0:a.call(c))!=null?i:$t();if(r.length<16)throw new Error("Random bytes length must be >= 16");if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,t){if(e=e||0,e<0||e+16>t.length)throw new RangeError(`UUID byte range ${e}:${e+15} is out of buffer bounds`);for(let o=0;o<16;++o)t[e+o]=r[o];return t}return Wt(r)}var Nt=ue;var mt=class{constructor(t,e,r,a,n,i,o,l,s){this.app=t;this.note=r;this.vid=a;this.cols=n;this.cb=i;this.opts=o;this.fmList=l;this.tagList=s;if(this.btnFactory=new q(t),this.wrap=w.el("div","ct-filter-bar"),e.prepend(this.wrap),o.showFrontmatterFilterButton&&this.buildFrontmatterFilters(),o.showTagFilterButton&&this.buildTagFilter(),o.showSearchBox&&this.buildSearchBox(),this.btns=w.el("div","ct-filter-bar__utils"),this.wrap.appendChild(this.btns),o.showOpenFolderButton&&o.folderPath&&this.btns.appendChild(this.btnFactory.openFolder(o.folderPath)),o.showNewNoteButton){let d=this.btnFactory.newNote();d.onclick=async()=>{var g;let u=(g=this.opts.folderPath)!=null?g:this.note.substring(0,this.note.lastIndexOf("/")),h=this.app.vault.getAbstractFileByPath(u);h instanceof at.TFolder||(await this.app.vault.createFolder(u),h=this.app.vault.getAbstractFileByPath(u));let p=`Untitled ${window.moment().format("YYYY-MM-DD HHmmss")}.md`,m=await this.app.fileManager.createNewMarkdownFile(h,p);await pt(this.app,m.path,e)},this.btns.appendChild(d)}if(o.showNewCanvasButton){let d=this.btnFactory.newCanvas();d.onclick=async()=>{var u;try{let h=(u=this.opts.folderPath)!=null?u:this.note.substring(0,this.note.lastIndexOf("/")),p=this.app.vault.getAbstractFileByPath(h);p instanceof at.TFolder||(await this.app.vault.createFolder(h),p=this.app.vault.getAbstractFileByPath(h));let m=window.moment().format("YYYY-MM-DD HHmmss"),g=await this.promptForName(`Untitled ${m}`);if(!g)return;g.endsWith(".canvas")||(g+=".canvas");let v=`${h}/${g}`;this.app.vault.getAbstractFileByPath(v)||await this.createBlankCanvas(v),await pt(this.app,v,e)}catch(h){new at.Notice(`Failed to create canvas: ${h.message}`),console.error(h)}},this.btns.appendChild(d)}o.showRefreshButton&&this.btns.appendChild(this.btnFactory.refresh(async()=>{let d=event.currentTarget,u=d.textContent;d.replaceChildren(Y.tiny());try{await this.cb.rerender()}finally{d.textContent=u!=null?u:"\u21BB"}}))}buildTagFilter(){let t=`tagFilter_${this.vid}`,e=this.cb.getState(this.note,this.vid,t)||"ALL",r=this.btnFactory.tagFilter(e==="ALL"?"#Tags":e,async()=>{if(!this.tagList)return;let a=await this.cb.suggester(this.tagList);a!=null&&this.cb.sync(this.note,this.vid,t,a)});e!=="ALL"&&r.classList.add("is-active"),this.wrap.appendChild(r)}buildFrontmatterFilters(){this.fmList.forEach(({prop:t,name:e,values:r})=>{let a=`filter_${this.vid}_${t}`,n=this.cb.getState(this.note,this.vid,a)||"ALL",i=e||t,o=n==="ALL"?i:`${i}: ${n}`,l=this.btnFactory.filter(o,async()=>{let s=await this.cb.suggester(r);s!=null&&this.cb.sync(this.note,this.vid,a,s)});n!=="ALL"&&l.classList.add("is-active"),this.wrap.appendChild(l)})}collectPropValues(t){var a,n;let e=(n=(a=this.cb.getLocalState(this.note,this.vid))==null?void 0:a.pages)!=null?n:[],r=new Set;return e.forEach(i=>{let o=this.cb.getVal(i,t),l=this.cb.formatAsDate(o)||String(o!=null?o:"-");r.add(l)}),Array.from(r).filter(i=>i!=="-").sort()}buildSearchBox(){let t=`search_ready_${this.vid}`,e=`search_${this.vid}`,r=this.cb.getState(this.note,this.vid,e)||"",a=ht.text({cls:"ct-filter-bar__search",placeholder:"Search\u2026",value:r,onEnter:n=>{this.cb.sync(this.note,this.vid,t,!0),this.cb.sync(this.note,this.vid,e,n)}});this.wrap.appendChild(a)}async createBlankCanvas(t){let e=JSON.stringify({nodes:[],edges:[],version:"1.0.0",id:Nt()},null,2);await this.app.vault.create(t,e)}async promptForName(t){return new Promise(e=>{let{Modal:r}=globalThis.coverTable.obsidian;class a extends r{constructor(o){super(o);this.value=t;this.accepted=!1}onOpen(){let{contentEl:o}=this;o.createEl("h1",{text:"New canvas name"});let l=o.createEl("input",{value:this.value});l.style.width="100%",l.focus();let s=()=>{this.value=l.value.trim(),this.accepted=!0,this.close()};l.addEventListener("keydown",u=>{u.key==="Enter"&&s()});let d=o.createEl("button",{text:"OK"});d.onclick=s}onClose(){this.contentEl.empty(),e(this.accepted?this.value:null)}}new a(this.app).open()})}};var gt=class{constructor(t,e,r,a,n){this.note=t;this.vid=e;this.cb=r;var o;this.btnFactory=new q(r);let i=Math.max(n.perPage,1);if(this.totalPages=Math.ceil(n.totalRows/i),this.totalPages<=1){this.wrap=w.el("div");return}this.wrap=w.el("div","ct-pagination"),a.appendChild(this.wrap),this.render((o=n.maxButtons)!=null?o:7)}render(t){var l;this.wrap.empty();let e=`pagination_${this.vid}`,r=(l=this.cb.getState(this.note,this.vid,e))!=null?l:0,a=(s,d,u=!1)=>{let h=this.btnFactory.pagination(s,u,()=>{this.cb.sync(this.note,this.vid,e,d)});h.classList.add(s==="\u2190"||s==="\u2192"?"interactive_table-pagination__btn--arrow":"interactive_table-pagination__btn--num"),u&&h.classList.add("is-active"),this.wrap.appendChild(h)};a("\u2190",r-1,r===0);let n=Math.max(3,t),i=Math.max(0,r-Math.floor(n/2)),o=i+n-1;o>=this.totalPages&&(o=this.totalPages-1,i=Math.max(0,o-n+1)),i>0&&a("1",0),i>1&&this.wrap.appendChild(w.el("span","ct-pagination__ellipsis","\u2026"));for(let s=i;s<=o;s++)a(String(s+1),s,s===r);o<this.totalPages-2&&this.wrap.appendChild(w.el("span","ct-pagination__ellipsis","\u2026")),o<this.totalPages-1&&a(String(this.totalPages),this.totalPages-1),a("\u2192",r+1,r>=this.totalPages-1)}};function ft(c){return(c==null?[]:Array.isArray(c)?c:c instanceof Set?[...c]:typeof c=="string"?c.split(/[,;]/).filter(Boolean):[]).map(e=>(e!=null?e:"").trim()).filter(Boolean).map(e=>e.startsWith("#")?e.slice(1):e)}function Gt(c){return c.toString().padStart(2,"0")}function he(c){return`${c.getFullYear()}-${Gt(c.getMonth()+1)}-${Gt(c.getDate())}`}function me(c){let t=w.el("span",""),e=ft(c).sort((r,a)=>r.localeCompare(a,"ko"));return e.forEach((r,a)=>{let n=w.el("span","ct-tag",r),i=r.split("/")[0];n.classList.add(`ct-tag--${i}`),t.appendChild(n),a<e.length-1&&t.appendChild(document.createTextNode(", "))}),t}function pe(c,t){var e;if(c==null)return"";switch(t){case"num":return String(c);case"year":{let r=(e=String(c).match(/\d{4}/))==null?void 0:e[0];return r!=null?r:String(c)}case"date":{let r=new Date(c);return isNaN(r.getTime())?String(c):he(r)}case"tags":return me(c);default:return String(c)}}function ge(c,t){return t.startsWith("file.")?t.split(".").reduce((e,r)=>e==null?void 0:e[r],c):c[t]}var bt=class{static build(t){let e=w.el("table","ct-data-table");t.zebra&&e.classList.add("ct-data-table--zebra");let r=w.el("thead",""),a=w.el("tr","");t.columns.filter(i=>i.column).forEach(i=>{let o=w.el("th","ct-data-table__th",i.name),l=t.cb.getState(t.notePath,t.viewId,`sort_${t.viewId}`),s=t.cb.getState(t.notePath,t.viewId,`sort_direction_${t.viewId}`);i.prop===l&&(s==="asc"&&o.classList.add("is-asc"),s==="desc"&&o.classList.add("is-desc")),o.addEventListener("click",()=>{a.querySelectorAll(".ct-data-table__th").forEach(x=>x.classList.remove("is-asc","is-desc"));let d=`sort_${t.viewId}`,u=`sort_direction_${t.viewId}`,h=t.cb.getState(t.notePath,t.viewId,d),p=t.cb.getState(t.notePath,t.viewId,u),m=null,g=null,v=h&&p;i.prop!==h?v?(m=null,g=null):(m=i.prop,g="asc"):p===null?(m=i.prop,g="asc"):p==="asc"?(m=i.prop,g="desc"):(m=null,g=null),g==="asc"&&o.classList.add("is-asc"),g==="desc"&&o.classList.add("is-desc"),t.cb.sync(t.notePath,t.viewId,d,m),t.cb.sync(t.notePath,t.viewId,u,g)}),a.appendChild(o)}),r.appendChild(a),e.appendChild(r);let n=w.el("tbody","");return t.rows.forEach((i,o)=>{var s,d;let l=w.el("tr","ct-data-table__tr");l.dataset.path=(d=(s=i==null?void 0:i.file)==null?void 0:s.path)!=null?d:"",l.onclick=()=>{if(l.classList.contains("ct-row--active")){l.classList.remove("ct-row--active");return}let h=e.querySelector(".ct-row--active");h&&h.classList.remove("ct-row--active"),l.classList.add("ct-row--active")},t.columns.filter(u=>u.column).forEach(u=>{let h=w.el("td","ct-data-table__td"),p;if(t.cellRenderer)p=t.cellRenderer(i,u);else{let m=ge(i,u.prop);u.prop==="obsidianUIMode"&&String(m)==="source"?p=w.el("span","ct-mode-source","source"):p=pe(m,u.format)}p instanceof HTMLElement?h.appendChild(p):h.textContent=p,l.appendChild(h)}),n.appendChild(l)}),e.appendChild(n),e}};async function fe(c,t){if(!t)return;if(t.startsWith("obsidian://"))try{let n=new URL(t).searchParams.get("file");n&&(t=decodeURIComponent(n))}catch(a){}else t=decodeURI(t);let e=c.vault.getAbstractFileByPath(t);if(!(e instanceof Ot.TFile))return;let r=c.workspace.getLeaf(!0);await r.openFile(e),c.workspace.setActiveLeaf(r)}async function pt(c,t,e){var n;if(t.startsWith("obsidian://"))try{let o=new URL(t).searchParams.get("file");o&&(t=decodeURIComponent(o))}catch(i){}else t=decodeURI(t);let r=(n=c.metadataCache.getFirstLinkpathDest(t,""))!=null?n:c.vault.getAbstractFileByPath(t);if(!(r instanceof Ot.TFile))return;let a=c.workspace.getLeaf(!0);await a.openFile(r),c.workspace.setActiveLeaf(a)}var vt=class{constructor(t,e){this.app=t,this.cb=e}async buildView(t,e,r,a,n,i,o,l,s=[],d=null,u=this.cb){t.empty(),t.classList.add("ct-it-container");let h={showOpenFolderButton:l.showOpenFolderButton,showNewNoteButton:l.showNewNoteButton,showNewCanvasButton:l.showNewCanvasButton,showTagFilterButton:l.showTagFilterButton,showFrontmatterFilterButton:l.showFrontmatterFilterButton,showSearchBox:l.showSearchBox,showRefreshButton:l.showRefreshButton,folderPath:l.folderPath};new mt(this.app,t,e,r,n,u,h,s,d);let p=bt.build({columns:n,rows:a,zebra:!0,onRowClick:m=>{var v;let g=(v=m==null?void 0:m.file)==null?void 0:v.path;g&&pt(this.app,g,t)},notePath:e,viewId:r,cb:{getState:u.getState,sync:u.sync}});if(t.appendChild(p),p.addEventListener("dblclick",async m=>{var I,$;let g=m.target;if(g.closest(".nav-file-title"))return;let v=(I=g.closest("a"))==null?void 0:I.getAttribute("href"),x=g.closest("tr"),T=($=v!=null?v:x==null?void 0:x.dataset.path)!=null?$:"";T&&await fe(this.app,T)},!0),i>0){let m={perPage:i,totalRows:o};new gt(e,r,u,t,m)}}};var j=require("obsidian");var nt=class{constructor(t){this.app=t;this.dateYMDRegex=/^(\d{4})-(\d{1,2})-(\d{1,2})$/;this.timeHMRegex=/^(\d{1,2}):(\d{1,2})$/}async editProp(t){var r,a;let e=this.app.vault.getAbstractFileByPath((0,j.normalizePath)(t.path));if(e instanceof j.TFile&&t.type==="file name"){let n=e.basename,i=await this.textInput(n);if(!i||i===n)return;let o=(a=(r=e.parent)==null?void 0:r.path)!=null?a:"",l=e.extension,s=o?`${o}/${i}.${l}`:`${i}.${l}`;try{await this.app.vault.rename(e,s),new j.Notice("\u2705 File renamed")}catch(d){b.e(d),new j.Notice("\u26A0\uFE0F Failed to rename file")}}}async textInput(t){return new Promise(e=>{let{Modal:r}=globalThis.coverTable.obsidian;class a extends r{constructor(o){super(o);this.result=t}onOpen(){let{contentEl:o}=this;o.createEl("h1",{text:"Input"});let l=o.createEl("input",{value:this.result});l.style.width="100%",l.addEventListener("keydown",d=>{d.key==="Enter"&&(this.result=l.value.trim(),this.close(),e(this.result))});let s=o.createEl("button",{text:"OK"});s.onclick=()=>{this.result=l.value.trim(),this.close(),e(this.result)}}onClose(){this.contentEl.empty()}}new a(this.app).open()})}getVal(t,e){return e.startsWith("file.")?e.split(".").reduce((r,a)=>r==null?void 0:r[a],t):t[e]}parseDateYMD(t){if(typeof t!="string")return null;let e=t.match(this.dateYMDRegex);if(e){let[a,n,i,o]=e.map(Number);return n<1e3||n>9999||i<1||i>12||o<1||o>31?null:new Date(n,i-1,o)}let r=new Date(t);return isNaN(r.getTime())?null:r}parseTimeHM(t){if(typeof t!="string")return null;let e=t.match(this.timeHMRegex);if(!e)return null;let[r,a,n]=e.map(Number);if(a>23||n>59)return null;let i=new Date;return i.setHours(a,n,0,0),i}getSortValue(t){if(t==null)return"";let e=typeof t=="string"?t:String(t),r=this.parseDateYMD(e)||this.parseTimeHM(e);if(r)return r.getTime();let a=parseFloat(e);return isNaN(a)?e.toLowerCase():a}formatAsDate(t){if(t==null)return"";let e=this.parseDateYMD(String(t));if(!e)return String(t);let r=e.getFullYear(),a=e.getMonth()+1,n=e.getDate();return`${r}-${a<10?"0":""}${a}-${n<10?"0":""}${n}`}sortByProp(t,e,r="asc"){return!e||e==="title_link"||e==="tags"?t:t.sort((a,n)=>{let i=this.getSortValue(this.getVal(a,e)),o=this.getSortValue(this.getVal(n,e));return typeof i=="number"&&typeof o=="number"?r==="asc"?i-o:o-i:r==="asc"?String(i).localeCompare(String(o)):String(o).localeCompare(String(i))})}async suggester(t){let{SuggestModal:e}=globalThis.coverTable.obsidian;return new Promise(r=>{class a extends e{constructor(i){super(i)}getSuggestions(i){let o=i.toLowerCase();return t.filter(l=>l.toLowerCase().includes(o))}renderSuggestion(i,o){o.createEl("div",{text:i})}onChooseSuggestion(i){r(i)}}new a(this.app).open()})}};var Rt=crypto!=null&&crypto.randomUUID?crypto.randomUUID():`tab-${Date.now().toString(36)}-${Math.random().toString(36).slice(2,10)}`,Vt=class{constructor(){this.paneMap=new Map;this.bcMap=new Map;this.subs=new Map;window.addEventListener("storage",t=>{var a;if(!((a=t.key)!=null&&a.startsWith("coverTable::"))||t.newValue==null)return;let[,e,r]=t.key.split("::");try{this.applyRemote(r,JSON.parse(t.newValue))}catch(n){}}),window.addEventListener("message",t=>{var a;if(!((a=t.data)!=null&&a.__coverTable))return;let{viewId:e,payload:r}=t.data;r.sender!==Rt&&this.applyRemote(e,r.state)})}sweep(t){var r;let e=((r=this.paneMap.get(t))!=null?r:[]).filter(a=>document.body.contains(a.leafEl));this.paneMap.set(t,e)}addPane(t){var a;let e=(a=this.paneMap.get(t.viewId))!=null?a:[];if(e.some(n=>n.container===t.container))return;e.push(t),this.paneMap.set(t.viewId,e),b.d("addPane \u25B6",t.viewId,"\uD604\uC7AC Pane \uC218:",e.length),this.sweep(t.viewId);let r=async()=>{b.d("listener \uD638\uCD9C \u25B6",t.viewId),await t.refreshView(!0);let n=new CustomEvent("__cover_refresh",{detail:t.viewId});window.dispatchEvent(n)};if(this.subscribe(t.viewId,r),t.leafEl){let n=new MutationObserver(()=>{var i;if(t.leafEl&&!document.body.contains(t.leafEl)){this.unsubscribe(t.viewId,r);let o=((i=this.paneMap.get(t.viewId))!=null?i:[]).filter(l=>l!==t);this.paneMap.set(t.viewId,o),b.d("Pane \uC81C\uAC70 \u25B6",t.viewId,"\uB0A8\uC740 Pane:",o.length),n.disconnect()}});n.observe(document.body,{childList:!0,subtree:!0})}this.ensureChannel(t.viewId)}removePane(t,e){var a,n,i;this.sweep(e);let r=((a=this.paneMap.get(e))!=null?a:[]).filter(o=>o.notePath!==t);if(this.paneMap.set(e,r),b.d("removePane \u25B6",e,"\uB0A8\uC740 Pane:",r.length),r.length===0){(n=this.subs.get(e))==null||n.clear(),this.subs.delete(e),(i=this.bcMap.get(e))==null||i.close(),this.bcMap.delete(e);try{localStorage.removeItem(this.makeKey(t,e))}catch(o){}}}get(t,e){let r=localStorage.getItem(this.makeKey(t,e));try{return r?JSON.parse(r):{}}catch(a){return{}}}set(t,e,r=!1,a=!1){var l;b.d("set \u25B6",t.viewId,{patch:e,wipe:r,silent:a}),window.__COVER_TABLE_DISABLE_BC&&(a=!0);let n=this.makeKey(t.notePath,t.viewId),i=this.get(t.notePath,t.viewId),o=r?e:{...i,...e};try{localStorage.setItem(n,JSON.stringify(o))}catch(s){if((s==null?void 0:s.name)==="QuotaExceededError")console.warn("[Cover-Table] localStorage quota exceeded \u2192 using memory only");else throw s}if(!a){let s={sender:Rt,state:o};(l=this.bcMap.get(t.viewId))==null||l.postMessage(s),window.postMessage({__coverTable:!0,viewId:t.viewId,payload:s},"*")}this.emit(t.viewId,o)}subscribe(t,e){var a;let r=(a=this.subs.get(t))!=null?a:new Set;r.add(e),this.subs.set(t,r)}unsubscribe(t,e){var r;(r=this.subs.get(t))==null||r.delete(e)}emit(t,e){var r;(r=this.subs.get(t))==null||r.forEach(a=>{try{a(e)}catch(n){console.error(n)}})}ensureChannel(t){if(this.bcMap.has(t))return;let e=new BroadcastChannel(`coverTable-${t}`);e.onmessage=r=>{let{sender:a,state:n}=r.data||{};a!==Rt&&this.applyRemote(t,n)},this.bcMap.set(t,e)}applyRemote(t,e){var o;let r=(o=this.paneMap.get(t))!=null?o:[];if(r.length===0)return;let a=r[0].notePath,n=this.makeKey(a,t),i=this.get(a,t);JSON.stringify(i)!==JSON.stringify(e)&&(localStorage.setItem(n,JSON.stringify(e)),this.emit(t,e))}makeKey(t,e){return`coverTable::${t}::${e}`}hasLivePane(t){var r;return((r=this.paneMap.get(t))!=null?r:[]).some(a=>a.leafEl&&document.body.contains(a.leafEl))}},B=new Vt;function be(){return crypto!=null&&crypto.randomUUID?crypto.randomUUID():`vid-${Date.now().toString(36)}-${Math.random().toString(36).slice(2,8)}`}function V(c,t,e){var r,a;return(a=(r=B.get(c,t))==null?void 0:r[e])!=null?a:null}function ve(c,t,e,r){let a=B.paneMap.get(t),n=a==null?void 0:a[0];if(n){let o=!!n.skipStateWrite;B.set(n,{[e]:r},!1,o);return}let i=`coverTable::${c}::${t}`;try{let o=JSON.parse(localStorage.getItem(i)||"{}");o[e]=r,localStorage.setItem(i,JSON.stringify(o))}catch(o){localStorage.setItem(i,JSON.stringify({[e]:r}))}}var wt=class{constructor(t,e,r,a,n,i){this.filteredRows=[];this.displayRows=[];this.totalRows=0;this.dateYMDRegex=/^(\d{4})-(\d{1,2})-(\d{1,2})$/;this.isoDateRegex=/^(\d{4})-(\d{2})-(\d{2})T/;this.timeHMRegex=/^(\d{1,2}):(\d{1,2})$/;var l;if(!(a!=null&&a.sourcePath))throw new Error("ctx.sourcePath missing");this.dv=t,this.pages=e,this.columns=r,this.ctx=a,this.settings=n,this.notePath=a.sourcePath,this.host=i,this.viewId=(l=n.__viewId)!=null?l:n.__viewId=be();let o=i.closest(".workspace-leaf");o?B.addPane({viewId:this.viewId,notePath:this.notePath,dv:t,settings:n,ctx:a,container:i,leafEl:o,rerender:async s=>await this.compute(s),refreshView:async s=>{var d;return await((d=n.___refreshHook)==null?void 0:d.call(n,s))}}):b.w("[Cover-Table] workspace-leaf not found \u2013 skip pane registration")}async compute(t=!1){var n;let e=this.pages.map((i,o)=>{var h,p,m,g,v,x,T,I;let l={...i,__idx:o};l.tags=Array.isArray(i.tags)?i.tags:Array.isArray((h=i.file)==null?void 0:h.tags)?i.file.tags:i.tags?[i.tags]:[];let s=(()=>{try{return this.dv.page(i.file.path)}catch($){return null}})(),d=(m=(p=i.file)==null?void 0:p.basename)!=null?m:"",u=d.endsWith(".excalidraw")?d.slice(0,-11):d||"-";return l.__fmTitle=(I=(T=(v=(g=s==null?void 0:s.frontmatter)==null?void 0:g.title)!=null?v:s==null?void 0:s.title)!=null?T:(x=i.frontmatter)==null?void 0:x.title)!=null?I:u,l}),r=await this.applyAllFilters(e);r=this.applySort(r),this.filteredRows=r,this.totalRows=r.length;let a=(n=this.settings.perPage)!=null?n:10;this.displayRows=a>0?this.paginate(r,a,t):r}async applyAllFilters(t){for(let e of this.columns.filter(r=>r.filter))t=await this.filterByProp(e,t);return t=await this.applyTagFilter(t),t=this.applySearch(t),t}async filterByProp(t,e){let r=`filter_${this.viewId}_${t.prop}`,a=V(this.notePath,this.viewId,r);if(!a||a==="ALL")return e;let n=i=>{var o;switch(t.format){case"date":{let l=this.normalizeYMD(i);return l!=null?l:"-"}case"year":{let l=typeof i=="number"?String(i):(o=String(i).match(/\d{4}/))==null?void 0:o[0];return l!=null?l:"-"}default:return String(i!=null?i:"-")}};return e.filter(i=>n(this.getVal(i,t.prop))===a)}async applyTagFilter(t){let e=V(this.notePath,this.viewId,`tagFilter_${this.viewId}`)||"ALL";return e==="ALL"?t:t.filter(r=>{var n,i,o;return(Array.isArray((n=r.file)==null?void 0:n.tags)?r.file.tags:Array.isArray(r.tags)?r.tags:[(o=(i=r.file)==null?void 0:i.tags)!=null?o:r.tags]).includes(e)})}applySearch(t){if(!V(this.notePath,this.viewId,`search_ready_${this.viewId}`))return t;let r=(V(this.notePath,this.viewId,`search_${this.viewId}`)||"").trim().toLowerCase();if(!r)return t;let a=this.columns.filter(n=>n.column);return t.forEach(n=>{let i=[];a.forEach(o=>{let l=o.prop==="title_link"?n.__fmTitle||"":String(this.getVal(n,o.prop)||"");i.push(l.toLowerCase())}),n.__searchText=i.join(" ")}),t.filter(n=>r.split(" ").every(i=>i&&(n.__searchText||"").includes(i.toLowerCase())))}applySort(t){var i;let e=V(this.notePath,this.viewId,`sort_${this.viewId}`),r=V(this.notePath,this.viewId,`sort_direction_${this.viewId}`);if(!e||!r)return t.sort((o,l)=>o.__idx-l.__idx);if(!e)return t.sort((o,l)=>o.__idx-l.__idx);let a=this.columns.find(o=>o.prop===e),n=(i=a==null?void 0:a.format)!=null?i:"text";return t.sort((o,l)=>{let s=this.getSortValue(this.getVal(o,e),n),d=this.getSortValue(this.getVal(l,e),n),u=typeof s=="number"&&typeof d=="number"?s-d:JSON.stringify(s).localeCompare(JSON.stringify(d),"ko");return r==="asc"?u:-u})}paginate(t,e,r){var o;let a=`pagination_${this.viewId}`,n=e>0?Math.ceil(t.length/e):1,i=(o=V(this.notePath,this.viewId,a))!=null?o:0;return n===0?i=0:(i<0&&(i=0),i>=n&&(i=n-1)),!r&&i!==V(this.notePath,this.viewId,a)&&ve(this.notePath,this.viewId,a,i),e>0?t.slice(i*e,(i+1)*e):[...t]}parseDateYMD(t){if(typeof t!="string")return null;let e=t.match(this.dateYMDRegex);if(!e)return null;let r=+e[1],a=+e[2],n=+e[3];return r<1e3||r>9999||a<1||a>12||n<1||n>31?null:new Date(r,a-1,n)}normalizeYMD(t){if(!t)return null;let r=String(t).split("T")[0].match(/^(\d{4})-(\d{1,2})-(\d{1,2})$/);return r?`${+r[1]}-${+r[2]}-${+r[3]}`:null}parseTimeHM(t){if(typeof t!="string")return null;let e=t.match(this.timeHMRegex);if(!e)return null;let r=+e[1],a=+e[2];if(r>23||a>59)return null;let n=new Date;return n.setHours(r,a,0,0),n}getSortValue(t,e="text"){var r,a;if(t==null)return e==="num"?0:[99,"",""];switch(e){case"num":{let n=Number(t);return isNaN(n)?0:n}case"date":{let n=String(t);this.isoDateRegex.test(n)&&(n=n.slice(0,10));let i=this.parseDateYMD(n);return i?i.getTime():0}case"year":{let n=(r=String(t).match(/\d{4}/))==null?void 0:r[0];return n?Number(n):0}case"tags":{let n=ft(t).sort((i,o)=>i.localeCompare(o,"ko"))[0];return n!=null?n:""}default:{let n=String(t!=null?t:""),i=n.normalize("NFKD").replace(/[\u0300-\u036F]/g,"").replace(/[#*_`~\[\]\(\)\{\}<>\-]/g,"").trim().toLowerCase(),o=(a=i[0])!=null?a:"";return[/[a-z]/.test(o)?0:/[가-힣]/.test(o)?1:/\d/.test(o)?2:/\p{Extended_Pictographic}/u.test(o)?4:3,i,n]}}}formatAsDate(t){if(t==null)return"";let e=this.parseDateYMD(String(t));if(!e)return String(t);let r=e.getFullYear(),a=e.getMonth()+1,n=e.getDate();return`${r}-${a<10?"0":""}${a}-${n<10?"0":""}${n}`}getVal(t,e){return e.startsWith("file.")?e.split(".").reduce((r,a)=>r==null?void 0:r[a],t):t[e]}};var qt=require("obsidian");var J=class{constructor(t){this.ctrlSet=new Set;this.debounce=(t,e=150)=>{let r=null;return(...a)=>{r&&clearTimeout(r),r=window.setTimeout(()=>t(...a),e)}};this.broadcast=this.debounce(t=>{this.ctrlSet.forEach(e=>e(t))},150);this.app=t,this.attachVaultHooks(),this.attachWorkspaceHooks()}static get i(){return J._inst}emit(t){this.broadcast(t)}static init(t){J._inst||(J._inst=new J(t))}on(t){this.ctrlSet.add(t)}off(t){this.ctrlSet.delete(t)}attachVaultHooks(){let t=this.app.vault;["modify","delete","rename","create"].forEach(e=>t.on(e,r=>{r instanceof qt.TFile&&this.broadcast(r)})),this.app.metadataCache.on("resolved",()=>this.broadcast())}attachWorkspaceHooks(){this.app.workspace.on("layout-change",()=>this.broadcast()),this.app.workspace.on("active-leaf-change",()=>setTimeout(()=>this.broadcast(),100))}forceRefresh(t){b.d("[CT] EventBus.forceRefresh()"),this.broadcast(t)}},P=J;P._inst=null;function yt(c,t,e){var r,a;return(a=(r=B.get(c,t))==null?void 0:r[e])!=null?a:null}function kt(c,t,e,r){let a=B.paneMap.get(t),n=a==null?void 0:a[0];if(n){let o=!!n.skipStateWrite;B.set(n,{[e]:r},!1,o);return}let i=`coverTable::${c}::${t}`;try{let o=JSON.parse(localStorage.getItem(i)||"{}");o[e]=r,localStorage.setItem(i,JSON.stringify(o))}catch(o){localStorage.setItem(i,JSON.stringify({[e]:r}))}}function we(){let c=new Date,t=c.getFullYear(),e=c.getMonth()+1,r=c.getDate();return`${t}-${e<10?"0":""}${e}-${r<10?"0":""}${r}`}function ye(c){var t,e,r,a,n,i,o,l,s;if(!c.created||c.created==="-"){let d=(s=(o=(r=(e=(t=c.file)==null?void 0:t.cday)==null?void 0:e.toISODate)==null?void 0:r.call(e))!=null?o:(i=(n=(a=c.file)==null?void 0:a.ctime)==null?void 0:n.toISODate)==null?void 0:i.call(n))!=null?s:typeof((l=c.file)==null?void 0:l.ctime)=="number"?Ut(c.file.ctime):we();return{...c,created:d,frontmatter:{...c.frontmatter,created:d}}}return c}function Ut(c){let t=new Date(c),e=t.getFullYear(),r=t.getMonth()+1,a=t.getDate();return`${e}-${r<10?"0":""}${r}-${a<10?"0":""}${a}`}var xt=class{constructor(t){this.app=t;this.models=new Map;this._rendering=!1;this.refreshTimer=null;this.skipStateWrite=!1;this.handleWorkspaceTabClick=t=>{t.target.closest(".workspace-tab-header.tappable")&&document.querySelectorAll("[data-cover-view]").forEach(r=>{let a=r.dataset.coverView;if(this.models.has(a)){this.rerender(!0,a);return}let n=[...this.models.values()].find(i=>!i.host.isConnected);n&&this.rerender(!0,n.viewId)})};this.dateYMDRegex=/^(\d{4})-(\d{1,2})-(\d{1,2})$/;this.timeHMRegex=/^(\d{1,2}):(\d{1,2})$/;this.svc=new nt(t);let e=r=>this.refreshByBus(r);P.i.on(e),this.__cover_unload__=()=>P.i.off(e),this.cb={getState:yt,setState:kt,getLocalState:(r,a)=>B.get(r,a),getVal:(r,a)=>this.svc.getVal(r,a),parseDateYMD:r=>this.svc.parseDateYMD(r),formatAsDate:r=>this.svc.formatAsDate(r),getSortValue:r=>this.svc.getSortValue(r),suggester:r=>this.svc.suggester(r),rerender:async()=>{await this.rerender(!0)},sync:async(r,a,n,i)=>{kt(r,a,n,i),await this.rerender(!0,a)},resetState:async()=>{}},this.ui=new vt(t,this.cb),this.app.workspace.containerEl.addEventListener("click",r=>{r.target.closest(".workspace-tab-header.tappable")&&setTimeout(()=>{var o,l,s,d,u,h,p,m;let a=(d=(s=(l=(o=this.app.workspace.activeLeaf)==null?void 0:o.view)==null?void 0:l.containerEl)==null?void 0:s.querySelector)==null?void 0:d.call(s,"[data-cover-view]");if(!a)return;let n=a.dataset.coverView,i=(m=(p=(h=(u=this.app.workspace.activeLeaf)==null?void 0:u.view)==null?void 0:h.file)==null?void 0:p.path)!=null?m:"";this.cb.sync(i,n,`tagFilter_${n}`,"ALL")},180)},!0)}async renderAutoView(t,e={},r,a,n=!1){var d,u,h,p,m,g,v,x,T,I,$,D;let i={...e};if(i.perPage==null){let _=(u=(d=e["entries on page"])!=null?d:e.entries_on_page)!=null?u:e.entriesOnPage;_!=null&&(i.perPage=Number(_)||0)}let o=r,l=(r==null?void 0:r.sourcePath)||"";if(this._rendering)return;this._rendering=!0,n&&(this.skipStateWrite=!0);let s=null;try{if(!(r!=null&&r.sourcePath)||!a)return;a.dataset.coverVid?i.__wipeState=!1:(a.dataset.coverVid=crypto.randomUUID(),i.__wipeState=!0),i.__viewId=a.dataset.coverVid,i._notePath=r.sourcePath,a.dataset.coverSettings=JSON.stringify(i);let _=yt(l,i.__viewId,"perPage");typeof _=="number"&&_>0&&(i.perPage=_);let z=(h=i.path)!=null?h:r.sourcePath.substring(0,r.sourcePath.lastIndexOf("/")),Dt=t.pages().where(f=>f.file.folder===z).where(f=>!this.isFolderNote(f)).map(f=>{var k;return ye({...f,file:{...f.file,basename:(k=f.file.basename)!=null?k:f.file.name}})}).array(),Q=this.app.vault.getFiles().filter(f=>f.extension==="canvas"&&f.path.startsWith(z+"/")).map(f=>{let k=Ut(f.stat.ctime);return{file:{path:f.path,link:t.fileLink(f.path),folder:z,basename:f.basename},frontmatter:{title:f.basename},created:k,tags:"#category/canvas"}}),F=this.app.vault.getFiles().filter(f=>f.extension==="md"&&f.basename.endsWith(".excalidraw")&&f.path.startsWith(z+"/")).map(f=>{let k=Ut(f.stat.ctime);return{file:{path:f.path,link:t.fileLink(f.path),folder:z,basename:f.basename},frontmatter:{title:f.basename.replace(/\.excalidraw$/,"")},created:k,tags:"#excalidraw"}}),H=[...Q,...Dt,...F],M={prop:"__fmTitle",name:"Title",filter:!1,column:!0,format:"text"},W={prop:"tags",name:"Tags",filter:!1,column:!0,format:"tags"},It=Array.isArray(i.props)?i.props:[],U=[M,...It.filter(f=>!["title_link","tags"].includes(f.prop)).map(f=>{var k,S,y;return{...f,filter:(k=f.filter)!=null?k:!0,column:(S=f.column)!=null?S:!0,format:(y=f.format)!=null?y:"text"}}),W];i.___refreshHook=async(f=!1)=>{await this.renderAutoView(t,i,r,a,f)},s=new wt(t,H,U,r,i,a),a.setAttribute("data-cover-view",s.viewId),this.models.set(s.viewId,s),await s.compute(n);let ot=U.filter(f=>f.filter).map(f=>{let k=[...new Set(s.filteredRows.map(S=>{var A;let y=this.svc.getVal(S,f.prop);switch(f.format){case"date":{let E=s.normalizeYMD(y);return E!=null?E:"-"}case"year":{let E=typeof y=="number"?String(y):(A=String(y).match(/\d{4}/))==null?void 0:A[0];return E!=null?E:"-"}default:return String(y!=null?y:"-")}}))].sort((S,y)=>String(S).localeCompare(String(y)));return{prop:f.prop,name:f.name,values:["ALL",...k]}}),X=(()=>{let f=new Set;return s.filteredRows.forEach(k=>{var S,y,A;return(Array.isArray((S=k.file)==null?void 0:S.tags)?k.file.tags:Array.isArray(k.tags)?k.tags:[(A=(y=k.file)==null?void 0:y.tags)!=null?A:k.tags]).forEach(E=>f.add(E))}),f.size?["ALL",...[...f].sort()]:null})(),tt=U.filter(f=>f.filter).map(f=>{let k=[...new Set(s.filteredRows.map(S=>{var A;let y=this.svc.getVal(S,f.prop);switch(f.format){case"date":{let E=s.normalizeYMD(y);return E!=null?E:"-"}case"year":{let E=typeof y=="number"?String(y):(A=String(y).match(/\d{4}/))==null?void 0:A[0];return E!=null?E:"-"}default:return String(y!=null?y:"-")}}))].sort((S,y)=>String(S).localeCompare(String(y)));return{prop:f.prop,name:f.name,values:["ALL",...k]}}),O=new Set;s.filteredRows.forEach(f=>{var k,S,y;((y=(S=(k=f.file)==null?void 0:k.tags)!=null?S:f.tags)!=null?y:[]).forEach(A=>O.add(A))});let _t=O.size?["ALL",...[...O].sort()]:null,lt=this.makeScopedCb(i._notePath,s.viewId);await this.ui.buildView(a,i._notePath,s.viewId,s.displayRows,U,(p=i.perPage)!=null?p:10,s.totalRows,{showOpenFolderButton:(m=i.showOpenFolderButton)!=null?m:!0,showNewNoteButton:(g=i.showNewNoteButton)!=null?g:!0,showNewCanvasButton:(v=i.showNewCanvasButton)!=null?v:!0,showTagFilterButton:(x=i.showTagFilterButton)!=null?x:!0,showFrontmatterFilterButton:(T=i.showFrontmatterFilterButton)!=null?T:!0,showSearchBox:(I=i.showSearchBox)!=null?I:!0,showRefreshButton:($=i.showRefreshButton)!=null?$:!1,folderPath:(D=i.path)!=null?D:null},ot,X,lt)}finally{this.skipStateWrite=!1,this._rendering=!1}}async rerender(t=!1,e){var n,i,o,l,s,d;for(b.d(`[CT] rerender(${e!=null?e:"auto"}) \u25B6 passive=${t}`);this._rendering;)await new Promise(u=>setTimeout(u,15));let r=e?this.models.get(e):(()=>{var p,m;let u=(m=(p=event==null?void 0:event.target)==null?void 0:p.closest)==null?void 0:m.call(p,"[data-cover-view]"),h=u?u.dataset.coverView:null;return h?this.models.get(h):[...this.models.values()].pop()})();if(!r&&e){let u=document.querySelector(`[data-cover-view="${e}"]`);if(u){let h=(o=(i=(n=this.app.plugins)==null?void 0:n.plugins)==null?void 0:i.dataview)==null?void 0:o.api;if(h){let p=this.app.metadataCache;p.resolved||await new Promise(m=>{var g;return(g=p.once)==null?void 0:g.call(p,"resolved",m)}),await this.renderAutoView(h,u.dataset.coverSettings?JSON.parse(u.dataset.coverSettings):{},{sourcePath:(d=(s=(l=u.closest(".markdown-preview-view"))==null?void 0:l.file)==null?void 0:s.path)!=null?d:""},u,!0),r=this.models.get(e)}}}if(r){let u=yt(r.settings._notePath,r.viewId,"perPage");typeof u=="number"&&u>0&&(r.settings.perPage=u)}if(r&&!document.body.contains(r.host)){let u=document.querySelector(`[data-cover-view="${r.viewId}"]`);u?r.host=u:(this.models.delete(r.viewId),r=void 0)}if(!r){b.d("[CT] rerender \u2013 model not found -> abort");return}b.time(`[CT] compute+render ${e}`),await r.compute(t),await this.renderAutoView(r.dv,r.settings,r.ctx,r.host,t),b.timeEnd(`[CT] compute+render ${e}`);let a=r.viewId;setTimeout(()=>{this.models.forEach((u,h)=>{h!==a&&(document.body.contains(u.host)||this.models.delete(h))})},300)}getVal(t,e){var r,a,n,i;if(e==="__fmTitle"){let o=(a=(r=t==null?void 0:t.frontmatter)==null?void 0:r.title)!=null?a:t==null?void 0:t.title;return o&&String(o).trim()!==""?o:((i=(n=t==null?void 0:t.file)==null?void 0:n.basename)!=null?i:"").replace(/\.excalidraw$/,"")}return e.startsWith("file.")?e.split(".").reduce((o,l)=>o==null?void 0:o[l],t):t[e]}parseDateYMD(t){if(typeof t!="string")return null;let e=t.match(this.dateYMDRegex);if(!e)return null;let r=+e[1],a=+e[2],n=+e[3];return r<1e3||r>9999||a<1||a>12||n<1||n>31?null:new Date(r,a-1,n)}parseTimeHM(t){if(typeof t!="string")return null;let e=t.match(this.timeHMRegex);if(!e)return null;let r=+e[1],a=+e[2];if(r>23||a>59)return null;let n=new Date;return n.setHours(r,a,0,0),n}formatAsDate(t){if(t==null)return"";let e=this.parseDateYMD(String(t));if(!e)return String(t);let r=e.getFullYear(),a=e.getMonth()+1,n=e.getDate();return`${r}-${a<10?"0":""}${a}-${n<10?"0":""}${n}`}getSortValue(t){if(t==null)return"";let e=typeof t=="string"?t:String(t),r=this.parseDateYMD(e)||this.parseTimeHM(e);if(r)return r.getTime();let a=parseFloat(e);return isNaN(a)?e.toLowerCase():a}async suggester(t){return this.svc.suggester(t)}isFolderNote(t){var n,i;let e=t==null?void 0:t.file;if(!(e!=null&&e.path)||e.folder==null)return!1;let r=(n=e.basename)!=null?n:e.path.substring(e.path.lastIndexOf("/")+1,e.path.lastIndexOf(".")),a=(i=e.folder.split("/").pop())!=null?i:"";return r===a}makeScopedCb(t,e){return{...this.cb,rerender:async(r=t,a=e)=>{await this.rerender(!0,a)},sync:async(r,a,n,i)=>{kt(t,e,n,i),await this.rerender(!0,e)},getState:(r,a,n)=>yt(r!=null?r:t,a!=null?a:e,n),setState:(r,a,n,i)=>kt(r!=null?r:t,a!=null?a:e,n,i)}}refreshByBus(t){var r,a;let e=()=>{this.refreshTimer&&clearTimeout(this.refreshTimer),this.refreshTimer=window.setTimeout(()=>{this.models.forEach((n,i)=>this.rerender(!0,i)),this.refreshTimer=null},80)};if(t&&this.models.size){let n=this.models.values().next().value;if(n){let i=(r=n.settings.path)!=null?r:n.ctx.sourcePath.replace(/\/[^/]+$/,"");if(!t.path.startsWith(i+"/"))return}}if(this.models.size||document.querySelectorAll("[data-cover-view]").forEach(n=>{let i=n.dataset.coverView;this.models.has(i)}),t){let n=this.app.metadataCache;if(!(((a=n.getFileCache(t))==null?void 0:a.frontmatter)!=null)){let o=n.on("resolved",()=>{n.offref(o),e()});return}}e()}};var ke=["#ff6363","#ffa600","#ffcf00","#8aff80","#2effd3","#00ffff","#25c6fc","#3399ff","#9975e2","#cc66cc","#ff66ff","#ff66cc","#ff6699","#ff6666","#f06b60","#ed7732","#de9f00","#afff68","#53ffb4","#2f9eff"],xe=["#ff9999","#ffc04d","#ffe680","#b3ffb3","#80fff2","#80ffff","#99daff","#99c2ff","#c2a3e8","#df9edf","#ff99ff","#ff99e6","#ff99c2","#ff9999","#f4a38c","#f1b066","#eec900","#c5ff8a","#84ffc9","#74baff"];function Jt(c,t={}){var n,i;let{colorPalette:e,colorPaletteDark:r,colorPaletteLight:a}=t;return c?((n=r!=null?r:e)!=null?n:ke).slice():((i=a!=null?a:e)!=null?i:xe).slice()}var Tt=class{constructor(t){this.palette=t;this.noteColorMap={};this.colorPtr=0}assign(t){if(this.noteColorMap[t])return;if(this.palette.length===0){this.noteColorMap[t]={colorIndex:null};return}let e=this.colorPtr%this.palette.length;this.noteColorMap[t]={colorIndex:e},this.colorPtr++}colorOf(t){let e=this.noteColorMap[t];return!e||e.colorIndex==null?"#999":this.palette[e.colorIndex]}legend(){let t={};return Object.keys(this.noteColorMap).forEach(e=>{t[e]=this.colorOf(e)}),t}reset(){this.colorPtr=0,Object.keys(this.noteColorMap).forEach(t=>delete this.noteColorMap[t])}};var Et=class{constructor(t,e,r={},a){var n,i,o,l,s,d;(n=r.statusField)!=null||(r.statusField="obsidianUIMode"),(i=r.statusDoneValue)!=null||(r.statusDoneValue="preview"),(o=r.excludeDone)!=null||(r.excludeDone=!0),(l=r.startField)!=null||(r.startField="dateAdded"),(s=r.endField)!=null||(r.endField="dateEnded"),this.app=t,this.dv=e,this.settings=r,this.isDark=document.body.classList.contains("theme-dark"),this.palette=Jt(this.isDark,r),this.gPalette=new Tt(this.palette),!((d=e.current)!=null&&d.call(e))&&(a!=null&&a.sourcePath)&&(e.current=()=>e.page(a.sourcePath))}compute(){let{pages:t,year:e,month:r,daysInMonth:a}=this.collectPages(),n=this.gPalette.legend();return{pages:t,year:e,month:r,daysInMonth:a,legend:n,palette:[...this.palette],startField:this.settings.startField,endField:this.settings.endField}}collectPages(){var p,m;let t=new Date,e=t.getFullYear(),r=t.getMonth(),a=new Date(e,r+1,0).getDate(),n=(m=(p=this.dv).current)==null?void 0:m.call(p),i=Array.isArray(this.settings.customPages)?this.settings.customPages:this.settings.path?this.dv.pages(`"${this.settings.path}"`).array():n!=null&&n.file?this.dv.pages().where(g=>g.file.folder===n.file.folder&&g.file.path!==n.file.path).array():[],o=this.settings.statusField,l=this.settings.statusDoneValue.toLowerCase(),s=this.settings.excludeDone!==!1,d=this.settings.startField,u=this.settings.endField,h=i.filter(g=>{var v,x;return((v=g.file)==null?void 0:v.extension)==="canvas"||s&&((x=g[o])!=null?x:"").toString().toLowerCase()===l?!1:!!g[d]&&!!g[u]});return h.forEach(g=>{var x;let v=g.title||((x=g.file)==null?void 0:x.name)||"Untitled";this.gPalette.assign(v)}),{pages:h,year:e,month:r,daysInMonth:a}}colorFor(t,e,r){var p,m;let{pages:a,year:n,month:i,startField:o,endField:l}=r,s=a.find(g=>{var v;return(g.title||((v=g.file)==null?void 0:v.name)||"Untitled")===t});if(!s)return null;let d=(p=this.dv.date(s[o]))==null?void 0:p.toJSDate(),u=(m=this.dv.date(s[l]))==null?void 0:m.toJSDate();if(!d||!u)return null;let h=new Date(n,i,e);return h>=d&&h<=u?this.gPalette.colorOf(t):null}};var Ct=class{buildGantt(t,e,r,a,n=!0,i=!1){let o=document.createElement("div");o.className="gantt-view";let l=document.createElement("div");l.className="gantt-month-year",l.textContent=e,o.appendChild(l);let s=document.createElement("div");if(s.className="gantt-container",s.innerHTML=r,o.appendChild(s),n){let d=document.createElement("div");d.className="gantt-legend",Object.entries(a).forEach(([u,h])=>{let p=document.createElement("div");p.className="gantt-legend-item";let m=document.createElement("span");m.className="gantt-legend-color",m.style.background=h,p.appendChild(m);let g=document.createElement("span");g.textContent=u,p.appendChild(g),d.appendChild(p)}),o.appendChild(d)}return t.appendChild(o),o}colorize(t,e){document.querySelectorAll(".gantt-table td[data-note]").forEach(r=>{let a=r.dataset.note,n=Number(r.dataset.day),i=t(a,n);i?(r.style.setProperty("--gantt-color",i),r.classList.add("is-filled")):(r.classList.remove("is-filled"),r.style.removeProperty("--gantt-color"));let o=e(a,n);o&&r.classList.add(`gantt-${o}`)})}highlightToday(){let t=new Date().getDate();document.querySelectorAll(`.gantt-table td[data-day='${t}']`).forEach(e=>e.classList.add("is-today"))}};var St=class{constructor(t){this.app=t;this.ui=new Ct;this._rendering=!1;this.busCb=this.refreshByBus.bind(this),P.i.on(this.busCb),this.__cover_unload__=()=>P.i.off(this.busCb)}async renderView(t,e={},r,a){var n,i,o,l,s,d,u,h,p,m,g,v;if(!this._rendering){this._rendering=!0;try{(n=e.renderInteractiveBelow)!=null||(e.renderInteractiveBelow=!0),(i=e.showLegend)!=null||(e.showLegend=!0),(o=e.forceInteractiveBelow)!=null||(e.forceInteractiveBelow=!1),e.forceInteractiveBelow&&(e.renderInteractiveBelow=!0);let x=(s=(l=e["entries on page"])!=null?l:e.entries_on_page)!=null?s:e.entriesOnPage;x!=null&&((d=e.interactiveOptions)!=null||(e.interactiveOptions={}),e.interactiveOptions.perPage==null&&(e.interactiveOptions.perPage=Number(x)||0));let T=(u=t.current)==null?void 0:u.call(t);if((!T||!T.file)&&(r!=null&&r.sourcePath)&&(T=t.page(r.sourcePath)),!(T!=null&&T.file)){b.w("[Gantt] current page not found \u2013 abort");return}let I=t.current;t.current=()=>T;let $=new Et(this.app,t,e,r),D=$.compute(),_;a?(a.empty(),a.classList.add("ct-it-container"),_=a):_=t.container;let Dt=`${new Intl.DateTimeFormat("en",{month:"long"}).format(new Date(D.year,D.month,1))} ${D.year}`,Q=this.ui.buildGantt(_,Dt,this.buildTableHTML(D),D.legend,(h=e.showLegend)!=null?h:!0,e.renderInteractiveBelow);if(Q.__settings=JSON.parse(JSON.stringify(e)),this.ui.colorize((F,H)=>$.colorFor(F,H,D),(F,H)=>{let{startField:M,endField:W,pages:It,year:U,month:ot}=D,X=It.find(_t=>{var lt;return(_t.title||((lt=_t.file)==null?void 0:lt.name))===F});if(!X)return null;let tt=t.date(X[M]),O=t.date(X[W]);return tt&&tt.year===U&&tt.month-1===ot&&tt.day===H?"start":O&&O.year===U&&O.month-1===ot&&O.day===H?"end":null}),this.ui.highlightToday(),e.renderInteractiveBelow){let F=(p=window.coverTable)==null?void 0:p.engine;if(F){let H=Q.createDiv({cls:"ct-it-mount"}),M=(m=e.interactiveOptions)!=null?m:{};if(e.props&&M.props==null&&(M.props=e.props),M.perPage==null){let W=(v=(g=M["entries on page"])!=null?g:M.entries_on_page)!=null?v:M.entriesOnPage;W!=null&&(M.perPage=Number(W)||0)}H.dataset.coverSettings=JSON.stringify(M),r&&await F.renderAutoView(t,M,r,H)}}if(e.debugLegend){let F=Q.createEl("pre",{cls:"gantt-debug"});F.innerText=JSON.stringify(D.legend,null,2)}t.current=I}finally{this._rendering=!1}}}buildTableHTML(t){let{pages:e,daysInMonth:r}=t,n=`<thead><tr><th class="gantt-corner-col"></th>${Array.from({length:r},(o,l)=>`<th class="gantt-day-col">${String(l+1).padStart(2,"0")}</th>`).join("")}</tr></thead>`,i="<tbody>";return e.forEach(o=>{var s;let l=o.title||((s=o.file)==null?void 0:s.name)||"Untitled";i+=`<tr><td class="gantt-note-col">${l}</td>`;for(let d=1;d<=r;d++)i+=`<td class="gantt-cell" data-note="${l}" data-day="${d}"></td>`;i+="</tr>"}),i+="</tbody>",`<table class="gantt-table">${n}${i}</table>`}refreshByBus(t){var s,d,u,h,p,m,g;if(this._rendering||(t==null?void 0:t.extension)==="canvas")return;let e=(u=(d=(s=this.app.plugins)==null?void 0:s.plugins)==null?void 0:d.dataview)==null?void 0:u.api;if(!e){b.w("[Gantt] Dataview API not available.");return}let r=this.app.workspace.getActiveFile();if(!r||r.extension==="canvas")return;if(!r){b.w("[Gantt] No active file found.");return}if(t&&t.path!==r.path)return;let a=document.querySelector(".gantt-view"),i={...a==null?void 0:a.__settings};if((h=i.renderInteractiveBelow)!=null||(i.renderInteractiveBelow=!0),(p=i.showLegend)!=null||(i.showLegend=!0),!a){b.w("[Gantt] Gantt host container not found.");return}let o=a.parentElement;if(!o){b.w("[Gantt] Gantt host parent element not found.");return}a.remove();let l={sourcePath:r.path,frontmatter:(g=(m=this.app.metadataCache.getFileCache(r))==null?void 0:m.frontmatter)!=null?g:{},getSectionInfo:()=>null,docId:"",addChild:()=>null};this.renderView(e,i,l,o)}};var Mt=require("@codemirror/view"),Kt=require("@codemirror/state");function Te(c){let t=Object.keys(c).join("");if(!t)return[];let e=new RegExp(`^\\s*(?:[-*+]|\\d+[.)])\\s+([${t}])\\s+`),r=a=>{let n=new Kt.RangeSetBuilder,i=a.state.doc.length;for(let{from:o,to:l}of a.visibleRanges){let s=o;for(;s<=l&&s<i;){let d=a.state.doc.lineAt(s),u=e.exec(d.text);if(u){let h=u[1];n.add(d.from,d.from,Mt.Decoration.line({attributes:{class:"lc-cm6-row","data-callout-char":h}}))}if(d.to<=s)break;s=d.to+1}}return n.finish()};return Mt.ViewPlugin.fromClass(class{constructor(a){this.decorations=r(a)}update(a){(a.docChanged||a.viewportChanged)&&(this.decorations=r(a.view))}},{decorations:a=>a.decorations})}var Lt=class{constructor(t){this.plugin=t;this.styleEl=null;this.cmExt=[];this.cmDispose=null;this.map={};this.rebuild()}rebuild(){var t;this.map={},((t=this.plugin.settings.listCallouts)!=null?t:[]).forEach(e=>this.map[e.char]=e),this.injectCss(),this.cmDispose&&(this.cmDispose(),this.cmDispose=null),this.cmExt=Te(this.map),this.cmExt.length&&this.plugin.registerEditorExtension(this.cmExt)}editorExtensions(){return this.cmExt}postProcessor(){return t=>{Object.keys(this.map).length&&t.querySelectorAll("li").forEach(e=>{var l;let r=(l=e.textContent)!=null?l:"",a=r.trim().charAt(0);if(!this.map[a])return;let n=e.querySelector("a.internal-link, a.external-link, a:not([href^='#'])"),i;if(n)i=n;else{let s=r.trim().slice(1).trim();i=document.createTextNode(s||" ")}e.replaceChildren();let o=document.createElement("span");o.className="lc-pill",o.appendChild(i),e.appendChild(o),e.classList.add("lc-list-callout"),e.setAttribute("data-callout-char",a),n&&e.addEventListener("dblclick",()=>{e.closest(".markdown-reading-view")&&n.dispatchEvent(new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window}))})})}}injectCss(){this.styleEl||(this.styleEl=document.createElement("style"),this.styleEl.id="ct-lc-style",document.head.appendChild(this.styleEl));let t=`
    /* \uC77C\uBC18 \uB9AC\uC2A4\uD2B8 \uC720\uC9C0, \uCF5C\uC544\uC6C3 \uC548\uC5D0\uC11C\uB9CC \uBD88\uB9BF \uC228\uAE40 */
  li.lc-list-callout .list-bullet{display:none!important;}

  li.lc-list-callout{
    list-style:none!important;
    margin:0!important;
    padding:0!important;
    font: 600 1em/1 var(--font-interface);
  }
  li.lc-list-callout::marker{content:""!important}

  .lc-pill{
    display:block;
    width:100%;
    padding:6px 10px;
    border-radius:6px;
    font-weight:600;
    margin:0px 0px 5px 0px;
    cursor: pointer;
  }
  .lc-pill:hover{
    transition:all .3s ease;
    transform:scale(.95);
  }

  /* \uB9C1\uD06C\u2006\u2192 \u201C\uC77C\uBC18 \uD14D\uC2A4\uD2B8\u201D \uCC98\uB9AC */
  .lc-pill a{
    color:inherit!important;
    text-decoration:none!important;
  }

  /* hover \uAC15\uC870\xB7\uC678\uACFD \uBC30\uACBD \uC81C\uAC70 (pill \uB0B4\uBD80 \uBC30\uACBD\uB9CC \uD45C\uC2DC) */
  .markdown-reading-view li.lc-list-callout:hover{
    background:unset!important;
  }

  /* \uD3B8\uC9D1\uBAA8\uB4DC CM6 \uD589 \uB370\uCF54 \uC601\uD5A5 \uC5C6\uC774, \uC77D\uAE30\uBAA8\uB4DC \uC804\uC6A9 \uBC30\uACBD\uB9CC \uC720\uC9C0 */
  .markdown-reading-view li.lc-list-callout .cm-line{background:transparent!important;}
  `;for(let e in this.map){let r=this.map[e];t+=`
    .theme-light li[data-callout-char='${e}'] .lc-pill{
      background:${r.bgLight}!important;
      color:${r.fgLight}!important;
    }
    .theme-dark  li[data-callout-char='${e}'] .lc-pill{
      background:${r.bgDark}!important;
      color:${r.fgDark}!important;
    }
    li.lc-list-callout[data-callout-char='${e}'] .lc-pill::before{ 
      content:""; 
    }`}this.styleEl.textContent=t}};var Zt=`/*****************************************************************\r
 *  Cover-Table  \u2013  Global Color \xB7 Style Tokens  (\uCD5C\uC885 \uD1B5\uD569\uD310)\r
 *  \xB7 \uAE30\uC874 \uAE30\uB2A5 \u201C\uBAA8\uB450\u201D \uBCF4\uC874  \xB7 \uC694\uC57D/\uD568\uCD95/\uC0AD\uC81C \uC5C6\uC74C\r
 *  \xB7 \uD14C\uC774\uBE14\xB7\uC774\uBBF8\uC9C0 \uC0C9\uC0C1\uC740 \uB2E8\uC77C \uD1A0\uD070 + \uB2E4\uD06C/\uB77C\uC774\uD2B8 \uC790\uB3D9 \uC624\uBC84\uB77C\uC774\uB4DC\r
 *  \xB7 \uD5E4\uB529\uC740 \uBB34\uC9C0\uAC1C 6\uC0C9(\uD1A0\uD070)\uC73C\uB85C \uC9C1\uAD00\uC801 \uAD6C\uBD84\r
 *****************************************************************/\r
:root{\r
  /* \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 \uBCA0\uC774\uC2A4 / \uACF5\uD1B5 \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 */\r
  --ct-base-white        : #ffffff;\r
  --ct-base-black        : #000000;\r
\r
\r
\r
  /* \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 \uBCF8\uBB38 \uD14D\uC2A4\uD2B8 \uC2A4\uD0C0\uC77C \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 */\r
  --ct-bold-dark            : rgb(255,188,188);\r
  --ct-bold-light           : rgb(138,0,119);\r
  --ct-italic-dark       : #cccccc;\r
  --ct-italic-light      : #888888;\r
\r
  /* \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 \uD5E4\uB529(\uBB34\uC9C0\uAC1C \uD1A0\uD070: \uC77D\uAE30+\uD3B8\uC9D1 \uACF5\uD1B5) \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 */\r
  --ct-h1-dark : #ff5555;  --ct-h1-light : #ff5555;   /* red    */\r
  --ct-h2-dark : #ffae42;  --ct-h2-light : #ffae42;   /* orange */\r
  --ct-h3-dark : #f7ff50;  --ct-h3-light : #f7ff50;   /* yellow */\r
  --ct-h4-dark : #4cd964;  --ct-h4-light : #4cd964;   /* green  */\r
  --ct-h5-dark : #5ac8fa;  --ct-h5-light : #5ac8fa;   /* blue   */\r
  --ct-h6-dark : #af52de;  --ct-h6-light : #af52de;   /* violet */\r
\r
  /* \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 \uB9AC\uC2A4\uD2B8 \uBD88\uB9BF/\uBC88\uD638 \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 */\r
  --ct-bullet-dark          : rgb(89,89,223);\r
  --ct-bullet-light         : rgb(54,54,190);\r
  --ct-ol-marker-dark       : red;\r
  --ct-ol-marker-light      : red;\r
\r
  /* \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 \uD14C\uC774\uBE14(\uB2E8\uC77C \uD1A0\uD070) \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 */\r
  --ct-table-border         : #c0c0c0;         /* light \uAE30\uBCF8, dark \uBAA8\uB4DC\uC5D0\uC11C \uC7AC\uC815\uC758 */\r
  --ct-table-shadow         : rgba(0,0,0,.10);\r
  --ct-table-row-even       : rgba(0,0,0,.03);\r
  --ct-table-row-hover      : rgba(0,0,0,.07);\r
\r
  /* \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 \uC774\uBBF8\uC9C0(\uB2E8\uC77C \uD1A0\uD070) \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 */\r
  --ct-image-border         : #d0d0d0;\r
  --ct-image-shadow         : rgba(0,0,0,.10);\r
}\r
\r
/* \uB2E4\uD06C \uBAA8\uB4DC \uC624\uBC84\uB77C\uC774\uB4DC \u2013 \uC790\uB3D9 \uC0C9\uC0C1 \uC804\uD658 */\r
.theme-dark:root{\r
  --image-border            : #555555;\r
  --image-shadow            : rgba(0,0,0,.60);\r
\r
  /* \uD14C\uC774\uBE14 \uD1A0\uD070(\uD22C\uBA85\xB7\uBC30\uACBD\uACC4\uC5F4) */\r
  --ct-table-border         : #444444;\r
  --ct-table-shadow         : rgba(0,0,0,.55);\r
  --ct-table-row-even       : transparent;\r
  --ct-table-row-hover      : rgba(255,255,255,.07);\r
}\r
\r
/* \uB77C\uC774\uD2B8 \uBAA8\uB4DC \uC624\uBC84\uB77C\uC774\uB4DC \u2013 \uC790\uB3D9 \uC0C9\uC0C1 \uC804\uD658 */\r
.theme-light:root{\r
  --image-border            : #d0d0d0;\r
  --image-shadow            : rgba(0,0,0,.10);\r
\r
  --ct-table-border         : #c0c0c0;\r
  --ct-table-shadow         : rgba(0,0,0,.10);\r
  --ct-table-row-even       : rgba(0,0,0,.03);\r
  --ct-table-row-hover      : rgba(0,0,0,.07);\r
}\r
\r
/*****************************************************************\r
 *  \uBCFC\uB4DC \uCEEC\uB7EC (\uAE30\uC874 \uAE30\uB2A5 \uC720\uC9C0)\r
 *****************************************************************/\r
.theme-dark .markdown-preview-view strong,\r
.theme-dark .markdown-preview-view b,\r
.theme-dark .markdown-source-view.mod-cm6 .cm-content strong,\r
.theme-dark .markdown-source-view.mod-cm6 .cm-content b,\r
.theme-dark .markdown-source-view.mod-cm6 .cm-content .cm-strong{\r
  font-weight:bold  !important; color:var(--ct-bold-dark)!important;\r
}\r
.theme-light .markdown-preview-view strong,\r
.theme-light .markdown-preview-view b,\r
.theme-light .markdown-source-view.mod-cm6 .cm-content strong,\r
.theme-light .markdown-source-view.mod-cm6 .cm-content b,\r
.theme-light .markdown-source-view.mod-cm6 .cm-content .cm-strong{\r
  font-weight:bold !important; color:var(--ct-bold-light)!important;\r
}\r
\r
\r
/* \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r
   \uC774\uD154\uB9AD \uD14D\uC2A4\uD2B8 \uC0C9 \uC801\uC6A9\r
\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 */\r
\r
.theme-dark .cm-em {\r
  color: var(--ct-italic-dark) !important;\r
}\r
.theme-light .cm-em {\r
  color: var(--ct-italic-light) !important;\r
}\r
\r
\r
\r
/*****************************************************************\r
 *  \uD5E4\uB529 \u2013 \uBB34\uC9C0\uAC1C + \uBC11\uC904 100% + \uC544\uC774\uCF58 \uC6B0\uCE21\r
 *****************************************************************/\r
.markdown-preview-view h1,\r
.markdown-preview-view h2,\r
.markdown-preview-view h3,\r
.markdown-preview-view h4,\r
.markdown-preview-view h5,\r
.markdown-preview-view h6{\r
  display:flex !important; \r
  align-items: center; \r
  width:100% !important;\r
  font-size: 1.4em; \r
  line-height: 1em; \r
  margin: 20px 0px !important; \r
  border-bottom-style: outset;\r
}\r
 /*****************************************************************/\r
\r
\r
\r
\r
\r
 /*****************************************************************/\r
\r
.markdown-preview-view h1{color:var(--ct-h1-dark); border-bottom-color:var(--ct-h1-dark);}\r
.markdown-preview-view h2{color:var(--ct-h2-dark); border-bottom-color:var(--ct-h2-dark);}\r
.markdown-preview-view h3{color:var(--ct-h3-dark); border-bottom-color:var(--ct-h3-dark);}\r
.markdown-preview-view h4{color:var(--ct-h4-dark); border-bottom-color:var(--ct-h4-dark);}\r
.markdown-preview-view h5{color:var(--ct-h5-dark); border-bottom-color:var(--ct-h5-dark);}\r
.markdown-preview-view h6{color:var(--ct-h6-dark); border-bottom-color:var(--ct-h6-dark);}\r
.theme-light .markdown-preview-view h1{color:var(--ct-h1-light); border-bottom-color:var(--ct-h1-light);}\r
.theme-light .markdown-preview-view h2{color:var(--ct-h2-light); border-bottom-color:var(--ct-h2-light);}\r
.theme-light .markdown-preview-view h3{color:var(--ct-h3-light); border-bottom-color:var(--ct-h3-light);}\r
.theme-light .markdown-preview-view h4{color:var(--ct-h4-light); border-bottom-color:var(--ct-h4-light);}\r
.theme-light .markdown-preview-view h5{color:var(--ct-h5-light); border-bottom-color:var(--ct-h5-light);}\r
.theme-light .markdown-preview-view h6{color:var(--ct-h6-light); border-bottom-color:var(--ct-h6-light);}\r
.markdown-preview-view h1 .collapse-indicator,\r
.markdown-preview-view h2 .collapse-indicator,\r
.markdown-preview-view h3 .collapse-indicator,\r
.markdown-preview-view h4 .collapse-indicator,\r
.markdown-preview-view h5 .collapse-indicator,\r
.markdown-preview-view h6 .collapse-indicator{margin-left:auto;}\r
\r
.cm-header-1{font-size:1.5em!important;line-height:2em;color:var(--ct-h1-dark);border-bottom:outset 1px var(--ct-h1-dark);}\r
.cm-header-2{font-size:1.5em!important;line-height:2em;color:var(--ct-h2-dark);border-bottom:outset 1px var(--ct-h2-dark);}\r
.cm-header-3{font-size:1.5em!important;line-height:2em;color:var(--ct-h3-dark);border-bottom:outset 1px var(--ct-h3-dark);}\r
.cm-header-4{font-size:1.5em!important;line-height:2em;color:var(--ct-h4-dark);border-bottom:outset 1px var(--ct-h4-dark);}\r
.cm-header-5{font-size:1.5em!important;line-height:2em;color:var(--ct-h5-dark);border-bottom:outset 1px var(--ct-h5-dark);}\r
.cm-header-6{font-size:1.5em!important;line-height:2em;color:var(--ct-h6-dark);border-bottom:outset 1px var(--ct-h6-dark);}\r
.theme-light .cm-header-1{color:var(--ct-h1-light);border-bottom-color:var(--ct-h1-light);}\r
.theme-light .cm-header-2{color:var(--ct-h2-light);border-bottom-color:var(--ct-h2-light);}\r
.theme-light .cm-header-3{color:var(--ct-h3-light);border-bottom-color:var(--ct-h3-light);}\r
.theme-light .cm-header-4{color:var(--ct-h4-light);border-bottom-color:var(--ct-h4-light);}\r
.theme-light .cm-header-5{color:var(--ct-h5-light);border-bottom-color:var(--ct-h5-light);}\r
.theme-light .cm-header-6{color:var(--ct-h6-light);border-bottom-color:var(--ct-h6-light);}\r
\r
/*****************************************************************\r
 *  \uB9AC\uC2A4\uD2B8 \uB9C8\uCEE4 (\uAE30\uB2A5 \uC644\uC804 \uBCF4\uC874)\r
 *****************************************************************/\r
/* \u2500\u2500 *  DARK MODE  (theme-dark) \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 */\r
.theme-dark .list-number,\r
.theme-dark ol>li::marker,\r
.theme-dark ul>li::marker {\r
  color: var(--ct-ol-marker-dark);\r
}\r
\r
.theme-dark .markdown-reading-view ul>li>.list-bullet:after,\r
.theme-dark .markdown-source-view.mod-cm6 .HyperMD-list-line-1 .list-bullet:after {\r
  height: 5px; width: 5px; border-radius: 50%;\r
  background: var(--ct-bullet-dark) !important;\r
}\r
\r
.theme-dark .markdown-reading-view ul>li>ul>li>.list-bullet:after,\r
.theme-dark .markdown-source-view.mod-cm6 .HyperMD-list-line-2 .list-bullet:after {\r
  height: 1px; width: 7px; border-radius: 0;\r
  background: var(--ct-bullet-dark) !important;\r
}\r
\r
.theme-dark .markdown-reading-view ul>li>ul>li>ul>li>.list-bullet:after,\r
.theme-dark .markdown-source-view.mod-cm6 .HyperMD-list-line-3 .list-bullet:after {\r
  height: 4px; width: 4px;\r
  background: transparent;\r
  border: 1px solid var(--ct-bullet-dark) !important; border-radius: 50%;\r
}\r
\r
.theme-dark .markdown-reading-view ul>li>ul>li>ul>li>ul>li>.list-bullet:after,\r
.theme-dark .markdown-source-view.mod-cm6 .HyperMD-list-line-4 .list-bullet:after {\r
  height: 5px; width: 5px; border-radius: 0;\r
  background: var(--ct-bullet-dark) !important;\r
}\r
\r
.theme-dark .markdown-reading-view ul>li>ul>li>ul>li>ul>li>ul>li>.list-bullet:after,\r
.theme-dark .markdown-source-view.mod-cm6 .HyperMD-list-line-5 .list-bullet:after {\r
  height: 1px; width: 7px; border-radius: 0;\r
  background: var(--ct-bullet-dark) !important;\r
}\r
\r
.theme-dark .markdown-reading-view ul>li>ul>li>ul>li>ul>li>ul>li>ul>li>.list-bullet:after,\r
.theme-dark .markdown-source-view.mod-cm6 .HyperMD-list-line-6 .list-bullet:after {\r
  height: 4px; width: 4px;\r
  background: transparent;\r
  border: 1px solid var(--ct-bullet-dark) !important;\r
}\r
\r
.theme-dark .markdown-reading-view ul>li>ul>li>ul>li>ul>li>ul>li>ul>li>ul>li>.list-bullet:after,\r
.theme-dark .markdown-source-view.mod-cm6 .HyperMD-list-line-7 .list-bullet:after {\r
  height: 2px; width: 2px; border-radius: 50%;\r
  background: var(--ct-bullet-dark) !important;\r
}\r
\r
\r
/* \u2500\u2500 LIGHT MODE  (theme-light) \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 */\r
.theme-light .list-number,\r
.theme-light ol>li::marker,\r
.theme-light ul>li::marker {\r
  color: var(--ct-ol-marker-light);\r
}\r
\r
.theme-light .markdown-reading-view ul>li>.list-bullet:after,\r
.theme-light .markdown-source-view.mod-cm6 .HyperMD-list-line-1 .list-bullet:after {\r
  height: 5px; width: 5px; border-radius: 50%;\r
  background: var(--ct-bullet-light) !important;\r
}\r
\r
.theme-light .markdown-reading-view ul>li>ul>li>.list-bullet:after,\r
.theme-light .markdown-source-view.mod-cm6 .HyperMD-list-line-2 .list-bullet:after {\r
  height: 1px; width: 7px; border-radius: 0;\r
  background: var(--ct-bullet-light) !important;\r
}\r
\r
.theme-light .markdown-reading-view ul>li>ul>li>ul>li>.list-bullet:after,\r
.theme-light .markdown-source-view.mod-cm6 .HyperMD-list-line-3 .list-bullet:after {\r
  height: 4px; width: 4px;\r
  background: transparent;\r
  border: 1px solid var(--ct-bullet-light) !important; border-radius: 50%;\r
}\r
\r
.theme-light .markdown-reading-view ul>li>ul>li>ul>li>ul>li>.list-bullet:after,\r
.theme-light .markdown-source-view.mod-cm6 .HyperMD-list-line-4 .list-bullet:after {\r
  height: 5px; width: 5px; border-radius: 0;\r
  background: var(--ct-bullet-light) !important;\r
}\r
\r
.theme-light .markdown-reading-view ul>li>ul>li>ul>li>ul>li>ul>li>.list-bullet:after,\r
.theme-light .markdown-source-view.mod-cm6 .HyperMD-list-line-5 .list-bullet:after {\r
  height: 1px; width: 7px; border-radius: 0;\r
  background: var(--ct-bullet-light) !important;\r
}\r
\r
.theme-light .markdown-reading-view ul>li>ul>li>ul>li>ul>li>ul>li>ul>li>.list-bullet:after,\r
.theme-light .markdown-source-view.mod-cm6 .HyperMD-list-line-6 .list-bullet:after {\r
  height: 4px; width: 4px;\r
  background: transparent;\r
  border: 1px solid var(--ct-bullet-light) !important;\r
}\r
\r
.theme-light .markdown-reading-view ul>li>ul>li>ul>li>ul>li>ul>li>ul>li>ul>li>.list-bullet:after,\r
.theme-light .markdown-source-view.mod-cm6 .HyperMD-list-line-7 .list-bullet:after {\r
  height: 2px; width: 2px; border-radius: 50%;\r
  background: var(--ct-bullet-light) !important;\r
}\r
\r
\r
\r
\r
/*****************************************************************\r
 *  \uD14C\uC774\uBE14 \uC2A4\uD0C0\uC77C \u2013 \uB2E8\uC77C \uD1A0\uD070 \uAE30\uBC18 / \uBAA8\uB4DC\uBCC4 \uC790\uB3D9\r
 *****************************************************************/\r
.el-table table{\r
  width:100%!important; border-collapse:collapse;border-spacing:0;\r
  border-top:2.27px solid var(--ct-table-border);\r
  border-bottom:2.27px solid var(--ct-table-border);\r
  box-shadow:0 0 20px var(--ct-table-shadow);\r
}\r
.el-table th,.el-table td{border:none;padding:.51rem;line-height:1.1;}\r
.el-table table>tbody>tr:first-child>th,\r
.el-table table>tbody>tr:first-child>td{border-top:1.36px solid var(--ct-table-border);}\r
.el-table table>tbody>tr:last-child>th,\r
.el-table table>tbody>tr:last-child>td{border-bottom:1.36px solid var(--ct-table-border);}\r
.el-table thead th{\r
  font-weight:700;padding:8px 9px 5px;\r
  background:var(--ct-base-white)!important;color:var(--ct-base-black);\r
}\r
.theme-dark .el-table thead th{\r
  background:var(--background-primary)!important;color:var(--ct-base-white);\r
}\r
.el-table tbody tr:nth-child(even){background:var(--ct-table-row-even);}\r
.el-table tbody tr:hover td   {background:var(--ct-table-row-hover);}\r
.theme-dark .el-table td      {color:var(--ct-base-white);}  /* \uD14D\uC2A4\uD2B8 \uD770\uC0C9 */\r
\r
/*****************************************************************\r
 *  \uC774\uBBF8\uC9C0(Embeds) & \uB9AC\uC2A4\uD2B8 \uB0B4 \uC774\uBBF8\uC9C0 \uBCF4\uD638\r
 *****************************************************************/\r
.el-p.el-embed-image img,\r
li .el-p.el-embed-image img,\r
ul li img,ol li img,\r
.tab-content img,.tabs img{\r
  display:block;width:700px;max-width:100%;height:auto;margin:1rem auto;\r
  border:1px solid var(--ct-image-border);\r
  box-shadow:0 4px 10px var(--ct-image-shadow);\r
  border-radius:4px;\r
}\r
li img{display:block;max-width:100%;height:auto;margin:.5rem auto;}\r
\r
/*****************************************************************\r
 *  \uBA54\uD0C0\uB370\uC774\uD130 \uD328\uB110 \uC228\uAE40(.hide_properties) \u2013 \uC6D0\uBCF8 \uC720\uC9C0\r
 *****************************************************************/\r
.hide_properties .metadata-container,\r
.hide_properties .metadata-properties,\r
.hide_properties .metadata-property,\r
.hide_properties .metadata-collapse-indicator,\r
.hide_properties .frontmatter-container,\r
.hide_properties .frontmatter{display:none!important;}\r
\r
/* \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r
   \uD5E4\uB354 \uB0B4\uBD80:  \uBC88\uD638 \u2192 \uD14D\uC2A4\uD2B8 \u2192 \uC811\uAE30\uC544\uC774\uCF58(\uC6B0\uCE21)  +  \uACB9\uCE68 \uD574\uC18C\r
   \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 */\r
\r
/* \u2460 \uD5E4\uB354 \uCEE8\uD14C\uC774\uB108\uB294 \uC774\uBBF8 flex; \uC815\uB82C\uB9CC \uD655\uC778 */\r
.markdown-preview-view h1,\r
.markdown-preview-view h2,\r
.markdown-preview-view h3,\r
.markdown-preview-view h4,\r
.markdown-preview-view h5,\r
.markdown-preview-view h6{\r
  display:flex!important;          /* \uD639\uC2DC inline-flex\uAC00 \uC544\uB2CC \uACBD\uC6B0 \uB300\uBE44 */\r
  align-items:center;\r
  width:100%!important;            /* \uBC11\uC904 100 % */\r
  margin:5px 0!important;\r
  border-bottom-style:outset;\r
}\r
\r
/* \u2462 \uC811\uAE30 \uC544\uC774\uCF58 \u2013 \uC808\uB300\u2192\uC815\uC801 + \uC6B0\uCE21 \uB05D */\r
.markdown-preview-view .heading-collapse-indicator.collapse-indicator{\r
  position:static!important;       /* \u2190 \uACB9\uCE68 \uC6D0\uC778 \uC81C\uAC70 */\r
  order:2;                         /* \uB9E8 \uB4A4 */\r
  flex:0 0 auto;\r
  margin-left:auto;                /* \uB0A8\uC740 \uACF5\uAC04 \uCC44\uC6B0\uACE0 \uC6B0\uCE21 \uC815\uB82C */\r
}\r
\r
\r
/* settings \uD0ED \uC548\uB0B4 \uBB38\uAD6C */\r
.ct-tip{\r
  font-size: 0.85em;\r
  margin: 0 0 0.5em 0;\r
  color: var(--text-muted);\r
}\r
\r
\r
\r
/* \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r
   \uD3F4\uB354\uB178\uD2B8 \uC804\uC6A9: \uC0AC\uAC01\uD615 \uC544\uC774\uCF58 + \uD074\uB9AD \uBE44\uD65C\uC131\uD654\r
\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 */\r
.tree-item-self.nav-folder-title.has-folder-note \r
  .tree-item-icon.collapse-icon {\r
  display: none !important;\r
  /* 3) \uD074\uB9AD \uBB34\uC2DC (\uC811\uAE30/\uD3BC\uCE58\uAE30 \uC774\uBCA4\uD2B8 \uCC28\uB2E8) */\r
  pointer-events: none        !important;\r
}\r
\r
\r
\r
.theme-dark .canvas-node-content-blocker ol>li::marker,\r
.theme-dark .canvas-node-content-blocker ul>li::marker,\r
.theme-dark .canvas-node-content ol>li::marker,\r
.theme-dark .canvas-node-content ul>li::marker{color:var(--ct-ol-marker-dark);}\r
.theme-dark .canvas-node-content-blocker ul>li>.list-bullet:after,\r
.theme-dark .canvas-node-content ul>li>.list-bullet:after{height:5px;width:5px;border-radius:50%;background:var(--ct-bullet-dark)!important;}\r
.theme-dark .canvas-node-content-blocker ul>li>ul>li>.list-bullet:after,\r
.theme-dark .canvas-node-content ul>li>ul>li>.list-bullet:after{height:1px;width:7px;border-radius:0;background:var(--ct-bullet-dark)!important;}\r
.theme-dark .canvas-node-content-blocker ul>li>ul>li>ul>li>.list-bullet:after,\r
.theme-dark .canvas-node-content ul>li>ul>li>ul>li>.list-bullet:after{height:4px;width:4px;background:transparent;border:1px solid var(--ct-bullet-dark)!important;border-radius:50%;}\r
.theme-dark .canvas-node-content-blocker ul>li>ul>li>ul>li>ul>li>.list-bullet:after,\r
.theme-dark .canvas-node-content ul>li>ul>li>ul>li>ul>li>.list-bullet:after{height:5px;width:5px;border-radius:0;background:var(--ct-bullet-dark)!important;}\r
.theme-dark .canvas-node-content-blocker ul>li>ul>li>ul>li>ul>li>ul>li>.list-bullet:after,\r
.theme-dark .canvas-node-content ul>li>ul>li>ul>li>ul>li>ul>li>.list-bullet:after{height:1px;width:7px;border-radius:0;background:var(--ct-bullet-dark)!important;}\r
.theme-dark .canvas-node-content-blocker ul>li>ul>li>ul>li>ul>li>ul>li>ul>li>.list-bullet:after,\r
.theme-dark .canvas-node-content ul>li>ul>li>ul>li>ul>li>ul>li>ul>li>.list-bullet:after{height:4px;width:4px;background:transparent;border:1px solid var(--ct-bullet-dark)!important;}\r
.theme-dark .canvas-node-content-blocker ul>li>ul>li>ul>li>ul>li>ul>li>ul>li>ul>li>.list-bullet:after,\r
.theme-dark .canvas-node-content ul>li>ul>li>ul>li>ul>li>ul>li>ul>li>ul>li>.list-bullet:after{height:2px;width:2px;border-radius:50%;background:var(--ct-bullet-dark)!important;}\r
\r
.theme-light .canvas-node-content-blocker ol>li::marker,\r
.theme-light .canvas-node-content-blocker ul>li::marker,\r
.theme-light .canvas-node-content ol>li::marker,\r
.theme-light .canvas-node-content ul>li::marker{color:var(--ct-ol-marker-light);}\r
.theme-light .canvas-node-content-blocker ul>li>.list-bullet:after,\r
.theme-light .canvas-node-content ul>li>.list-bullet:after{height:5px;width:5px;border-radius:50%;background:var(--ct-bullet-light)!important;}\r
.theme-light .canvas-node-content-blocker ul>li>ul>li>.list-bullet:after,\r
.theme-light .canvas-node-content ul>li>ul>li>.list-bullet:after{height:1px;width:7px;border-radius:0;background:var(--ct-bullet-light)!important;}\r
.theme-light .canvas-node-content-blocker ul>li>ul>li>ul>li>.list-bullet:after,\r
.theme-light .canvas-node-content ul>li>ul>li>ul>li>.list-bullet:after{height:4px;width:4px;background:transparent;border:1px solid var(--ct-bullet-light)!important;border-radius:50%;}\r
.theme-light .canvas-node-content-blocker ul>li>ul>li>ul>li>ul>li>.list-bullet:after,\r
.theme-light .canvas-node-content ul>li>ul>li>ul>li>ul>li>.list-bullet:after{height:5px;width:5px;border-radius:0;background:var(--ct-bullet-light)!important;}\r
.theme-light .canvas-node-content-blocker ul>li>ul>li>ul>li>ul>li>ul>li>.list-bullet:after,\r
.theme-light .canvas-node-content ul>li>ul>li>ul>li>ul>li>ul>li>.list-bullet:after{height:1px;width:7px;border-radius:0;background:var(--ct-bullet-light)!important;}\r
.theme-light .canvas-node-content-blocker ul>li>ul>li>ul>li>ul>li>ul>li>ul>li>.list-bullet:after,\r
.theme-light .canvas-node-content ul>li>ul>li>ul>li>ul>li>ul>li>ul>li>.list-bullet:after{height:4px;width:4px;background:transparent;border:1px solid var(--ct-bullet-light)!important;}\r
.theme-light .canvas-node-content-blocker ul>li>ul>li>ul>li>ul>li>ul>li>ul>li>ul>li>.list-bullet:after,\r
.theme-light .canvas-node-content ul>li>ul>li>ul>li>ul>li>ul>li>ul>li>ul>li>.list-bullet:after{height:2px;width:2px;border-radius:50%;background:var(--ct-bullet-light)!important;}\r
\r
\r
.canvas-node-content.markdown-embed > .markdown-embed-content > .markdown-preview-view {\r
  padding: 1rem 0.3rem 1rem 1rem !important;\r
}\r
\r
.markdown-source-view.mod-inside-iframe > .cm-editor > .cm-scroller{\r
  padding: 1rem 0.3rem 1rem 1rem !important;\r
}\r
\r
.markdown-source-view.mod-inside-iframe > .cm-editor > .cm-scroller {\r
  padding: 1rem 0.3rem 1rem 1rem !important;\r
}`;var Pt=class{constructor(t,e){this.root=document.documentElement;this.cfg=e,this.applyAll(),t.workspace.on("css-change",()=>this.applyAll())}applyAll(){let{tokens:t,customCss:e}=this.cfg(),r=document.body.classList.contains("theme-dark")?"dark":"light";rt(r,t!=null?t:et),this.upsertStyle(Pt.BASE,Zt),this.upsertStyle(Pt.CUSTOM,e||"")}upsertStyle(t,e){let r=document.getElementById(t);!r&&e&&(r=Object.assign(document.createElement("style"),{id:t}),document.head.appendChild(r)),r&&(r.textContent=e)}},K=Pt;K.BASE="ct-base-theme",K.CUSTOM="ct-custom-css";function Z(c){let t=document.documentElement.style.cssText,e=document.documentElement.className,r=document.body.className,a=["ct-style-fallback","ct-base-theme","ct-custom-css","ct-base-vars","ct-tag-colors"];c.workspace.iterateAllLeaves(n=>{var o,l;let i=(l=(o=n.view)==null?void 0:o.containerEl)==null?void 0:l.ownerDocument;if(i&&i!==document){i.documentElement.style.cssText=t,i.documentElement.className=e,i.body.className=r;for(let s of a){let d=document.getElementById(s);if(!d)continue;let u=i.getElementById(s);u||(u=i.createElement("style"),u.id=s,i.head.appendChild(u)),u.textContent=d.textContent}}})}var Qt;(Qt=window.coverTable)!=null||(window.coverTable={});var L=window.coverTable,Xt;(Xt=L.waitForEngine)!=null||(L.waitForEngine=async(c=4e3)=>{let t=Date.now();for(;Date.now()-t<c;){if(L.engine)return L.engine;await new Promise(e=>setTimeout(e,40))}throw new Error("coverTable.waitForEngine \u2192 timeout")});var Yt=class extends N.Plugin{constructor(){super(...arguments);this.explorerStyleEl=null}applyZeroFolderVisibility(){let e=Yt.ZERO_FOLDER_STYLE_ID,r=document.getElementById(e);this.settings.hideZeroFolders?r||(r=document.createElement("style"),r.id=e,r.textContent=`
/* Cover-Table \u25BA hide 0_ folders and their contents */

.nav-folder-title[data-path^="0_"],

.nav-folder-title[data-path*="/0_"],
.nav-file-title[data-path^="0_"],
.nav-file-title[data-path*="/0_"] {
  display: none !important;
}`,document.head.appendChild(r)):r==null||r.remove()}applyExplorerHide(){this.explorerStyleEl||(this.explorerStyleEl=document.createElement("style"),this.explorerStyleEl.id="ct-hide-notes-style",this.explorerStyleEl.textContent=`
/* hide all files except under "0_" folders */
.nav-file-title:not([data-path^="0_"]):not([data-path*="/0_"]) {
  display: none !important;
}
`,document.head.appendChild(this.explorerStyleEl))}applyFolderNotePadding(){let e=()=>{document.querySelectorAll(".nav-folder-title.has-folder-note").forEach(n=>{var s;let i=(s=n.dataset.path)!=null?s:"",o=i===""?0:i.split("/").length-1,l=20+o*17;n.style.setProperty("padding-inline-start",`${l}px`,"important"),o===0&&n.style.setProperty("margin-inline-start","0","important")})};e();let r=window.setInterval(e,100);window.setTimeout(()=>window.clearInterval(r),2e3);let a=document.querySelector("#file-explorer");if(a){let n=new MutationObserver(e);n.observe(a,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["style"]}),this.register(()=>n.disconnect())}}async onload(){P.init(this.app),b.d("[Cover-Table] \u25B6 onload");try{let l=this.app.vault.adapter instanceof re.FileSystemAdapter?this.app.vault.adapter.getBasePath():"",s=this.manifest.dir||"",d=(0,ee.join)(l,s,"style.css"),u=(0,te.readFileSync)(d,"utf8"),h=document.createElement("style");h.id="ct-style-fallback",h.textContent=u,document.head.appendChild(h),this.register(()=>h.remove()),b.d("[Cover-Table] fallback style injected \u2714")}catch(l){b.d("[Cover-Table] fallback style inject FAIL",l)}L.engine||(L.engine=new xt(this.app)),L.ganttController||(L.ganttController=new St(this.app)),L.obsidian={Notice:N.Notice,Modal:N.Modal,SuggestModal:N.SuggestModal},await this.loadSettings(),b.setDebug(this.settings.debugLog);try{let l=new ut(this.app,this);this.addSettingTab(l),b.d("\u{1F197} CoverTableSettingTab \uB4F1\uB85D \uC644\uB8CC")}catch(l){b.e("\u274C SettingTab \uC0DD\uC131 \uC2E4\uD328:",l),new N.Notice("Cover-Table \uC124\uC815 UI \uB85C\uB4DC \uC2E4\uD328 \u2014 \uCF58\uC194(DevTools)\uC744 \uD655\uC778\uD558\uC138\uC694.")}this.applyZeroFolderVisibility(),this.applyExplorerHide(),this.applyFolderNotePadding(),this.app.workspace.onLayoutReady(()=>{this.applyFolderNotePadding()}),this.listCallouts=new Lt(this),this.registerEditorExtension(this.listCallouts.editorExtensions()),this.registerMarkdownPostProcessor(this.listCallouts.postProcessor(),1e4),this.design=new K(this.app,()=>this.settings);let e={status:"#ffffff",topic:"#ff5555",method:"#ff9900",project:"#ffeb3b",region:"#55ff55",type:"#55ffdd",person:"#5574ff"},r={status:"#989898",topic:"#8b0000",method:"#8b4500",project:"#666600",region:"#006400",type:"#006661",person:"#000266"},a="ct-tag-colors",n=(l=document)=>{let s=[];for(let u of Object.keys(e)){let h=e[u],p=r[u];s.push(`.tag[href^="#${u}"]{color:${h};}`,`.multi-select-pill[data-value^="#${u}"], .multi-select-pill[data-value^="${u}"]{background:${h};border-color:${h};color:black;}`,`.multi-select-pill[data-value^="#${u}"] svg.svg-icon.lucide-x, .multi-select-pill[data-value^="${u}"] svg.svg-icon.lucide-x { color:black; }`,`.markdown-source-view.mod-cm6 span.cm-hashtag[data-tag^="#${u}"]{color:${h};}`,`.theme-light .tag[href^="#${u}"]{color:${p};}`,`.theme-light .multi-select-pill[data-value^="#${u}"], .theme-light .multi-select-pill[data-value^="${u}"]{background:${p};border-color:${p};color:white;}`,`.theme-light .multi-select-pill[data-value^="#${u}"] svg.svg-icon.lucide-x, .theme-light .multi-select-pill[data-value^="${u}"] svg.svg-icon.lucide-x { color:white; }`,`.theme-light .markdown-source-view.mod-cm6 span.cm-hashtag[data-tag^="#${u}"]{color:${p};}`)}let d=l.getElementById(a);d||(d=l.createElement("style"),d.id=a,l.head.appendChild(d)),d.textContent=s.join(`
`)},i=()=>{document.querySelectorAll(".multi-select-pill").forEach(l=>{let s=l.querySelector(".multi-select-pill-content span");if(!s)return;let d=s.textContent||"";l.setAttribute("data-value",d)})};n(),i();let o=new MutationObserver(()=>{i(),n()});o.observe(document.body,{childList:!0,subtree:!0}),this.register(()=>o.disconnect()),Z(this.app),this.registerMarkdownPostProcessor(async(l,s)=>{var h;let d=l.querySelectorAll("pre > code.language-ct, pre > code.language-cover-table");if(d.length===0)return;let u=window.dataviewApi||window.DataviewAPI||window.dvAPI;if(!u){b.w("[Cover-Table] Dataview API not found");return}await L.waitForEngine();for(let p of Array.from(d))try{let m=JSON.parse(p.textContent||"{}"),g=p.parentElement;if(m.type==="gantt"){(h=m.renderInteractiveBelow)!=null||(m.renderInteractiveBelow=!0),await L.ganttController.renderView(u,m,s,g);continue}s&&await L.engine.renderAutoView(u,m,s,g)}catch(m){b.e("[Cover-Table] render error:",m)}}),b.d("[Cover-Table] \u25B6 onload done"),window.addEventListener("unhandledrejection",l=>{var d;let s=String(((d=l.reason)==null?void 0:d.message)||l.reason||"").toLowerCase();if(s.includes("cannot read properties of null")&&s.includes("children")){l.preventDefault();return}s.includes("illegal access")&&l.preventDefault()}),this.registerEvent(this.app.workspace.on("layout-change",()=>{Z(this.app)})),this.registerEvent(this.app.workspace.on("css-change",()=>{Z(this.app),n()})),this.registerEvent(this.app.workspace.on("window-open",(l,s)=>{Z(this.app),n(s.document)}))}onunload(){b.d("[Cover-Table] \u25B6 onunload"),P.i.off(L.ganttController.refreshByBus.bind(L.ganttController))}async loadSettings(){let e=await this.loadData();this.settings=Object.assign({},zt,e)}async saveSettings(){await this.saveData(this.settings),b.setDebug(this.settings.debugLog),this.applyZeroFolderVisibility(),this.applyDesignSettings(),Z(this.app)}applyDesignSettings(){let e=this.app.getTheme()==="obsidian-dark"?"dark":"light",r=document.documentElement,a="ct-base-vars",n=document.getElementById(a);n||(n=document.createElement("style"),n.id=a,document.head.appendChild(n));let i=this.settings.baseVars,o=[],l=[];Object.entries(i).forEach(([u,h])=>{(u.endsWith("-dark")?l:o).push(`${u}:${h};`)}),n.textContent=`
      :root{${o.join("")}}
      .theme-dark{${l.join("")}}
    `;let s="ct-custom-css",d=document.getElementById(s);d||(d=document.createElement("style"),d.id=s,document.head.appendChild(d)),d.textContent=this.settings.customCss||""}rebuildListCallouts(){this.listCallouts&&this.listCallouts.rebuild()}reloadEmbed(){}},it=Yt;it.ZERO_FOLDER_STYLE_ID="ct-hide-zero-folders";
