/*
 THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
 If you want to view the source, please visit:
 https://github.com/HammerfallGenesis/obsidian-cover-table-plugin
*/

"use strict";var Te=Object.defineProperty;var je=Object.getOwnPropertyDescriptor;var Ye=Object.getOwnPropertyNames;var ze=Object.prototype.hasOwnProperty;var qe=(d,t)=>{for(var e in t)Te(d,e,{get:t[e],enumerable:!0})},Ge=(d,t,e,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let a of Ye(t))!ze.call(d,a)&&a!==e&&Te(d,a,{get:()=>t[a],enumerable:!(r=je(t,a))||r.enumerable});return d};var Ke=d=>Ge(Te({},"__esModule",{value:!0}),d);var nt={};qe(nt,{default:()=>K});module.exports=Ke(nt);var D=require("obsidian"),Ne=require("fs"),$e=require("path"),Re=require("obsidian");var Pe=()=>({base:{white:"#ffffff",black:"#000000"},heading:{h1:"#ff5555",h2:"#ffae42",h3:"#f7ff50",h4:"#4cd964",h5:"#5ac8fa",h6:"#af52de"},list:{bullet:"rgb(54,54,190)",olMarker:"red"},folder:{lvl0:{_01:"#0076ad",_25:"#989300",_68:"#9b1000"},lvl1:{_01:"#003d5a",_25:"#453a01",_68:"#461300"},q:"#848484"},table:{border:"#c0c0c0",shadow:"rgba(0,0,0,.10)",rowEven:"rgba(0,0,0,.03)",rowHover:"rgba(0,0,0,.07)"},image:{border:"#d0d0d0",shadow:"rgba(0,0,0,.10)"}}),Y={light:Pe(),dark:(()=>{let d=Pe();return d.list={bullet:"rgb(89,89,223)",olMarker:"red"},d.table={border:"#444444",shadow:"rgba(0,0,0,.55)",rowEven:"transparent",rowHover:"rgba(255,255,255,.07)"},d.image={border:"#555555",shadow:"rgba(0,0,0,.60)"},d.folder.lvl0={_01:"#91dcff",_25:"#fffcab",_68:"#ffb3ab"},d.folder.lvl1={_01:"#2ebdff",_25:"#ffdf3e",_68:"#ff7e4f"},d})()},w={baseWhite:"--ct-base-white",baseBlack:"--ct-base-black",h1:"--ct-h1-dark",h2:"--ct-h2-dark",h3:"--ct-h3-dark",h4:"--ct-h4-dark",h5:"--ct-h5-dark",h6:"--ct-h6-dark",bullet:"--bullet-new-color",olMarker:"--ct-ol-marker-dark",lvl0_01:"--ct-folder-lvl0-01-dark",lvl0_25:"--ct-folder-lvl0-25-dark",lvl0_68:"--ct-folder-lvl0-68-dark",lvl1_01:"--ct-folder-lvl1-01-dark",lvl1_25:"--ct-folder-lvl1-25-dark",lvl1_68:"--ct-folder-lvl1-68-dark",folderQ:"--ct-folder-q-dark",tBorder:"--ct-table-border",tShadow:"--ct-table-shadow",tEven:"--ct-table-row-even",tHover:"--ct-table-row-hover",iBorder:"--ct-image-border",iShadow:"--ct-image-shadow"};function Q(d,t,e=document.documentElement){let r=t[d],a=e instanceof Document?e.documentElement:e;a.style.setProperty(w.baseWhite,r.base.white),a.style.setProperty(w.baseBlack,r.base.black),["h1","h2","h3","h4","h5","h6"].forEach(l=>a.style.setProperty(w[l],r.heading[l])),a.style.setProperty(w.bullet,r.list.bullet),a.style.setProperty(w.olMarker,r.list.olMarker);let{lvl0:i,lvl1:n,q:o}=r.folder;a.style.setProperty(w.lvl0_01,i._01),a.style.setProperty(w.lvl0_25,i._25),a.style.setProperty(w.lvl0_68,i._68),a.style.setProperty(w.lvl1_01,n._01),a.style.setProperty(w.lvl1_25,n._25),a.style.setProperty(w.lvl1_68,n._68),a.style.setProperty(w.folderQ,o),a.style.setProperty(w.tBorder,r.table.border),a.style.setProperty(w.tShadow,r.table.shadow),a.style.setProperty(w.tEven,r.table.rowEven),a.style.setProperty(w.tHover,r.table.rowHover),a.style.setProperty(w.iBorder,r.image.border),a.style.setProperty(w.iShadow,r.image.shadow)}var I=require("obsidian"),_e={enableHeaderNumbering:!0,hideZeroFolders:!0,hideAllNotes:!0,listCallouts:[],embed:{enableEmbedNoPreview:!0,nonPreviewExtensions:[".pdf",".exe",".zip",".rar"]},tokens:structuredClone(Y),baseVars:{},customCss:""},B={baseWhite:"Base \u2027 \uBC30\uACBD(\uD770\uC0C9)",baseBlack:"Base \u2027 \uAE00\uC790(\uAC80\uC815)",h1:"H1 (Red)",h2:"H2 (Orange)",h3:"H3 (Yellow)",h4:"H4 (Green)",h5:"H5 (Blue)",h6:"H6 (Violet)",bullet:"List Bullet",olMarker:"Ordered-list Number",lvl0_01:"Folder L0 - 0~1",lvl0_25:"Folder L0 - 2~5",lvl0_68:"Folder L0 - 6~8",lvl1_01:"Folder L1 - 0~1",lvl1_25:"Folder L1 - 2~5",lvl1_68:"Folder L1 - 6~8",folderQ:"Folder \u201CQ)\u201D",tBorder:"Table Border",tShadow:"Table Shadow",tRowEven:"Table Row (even)",tRowHover:"Table Row (hover)",iBorder:"Image Border",iShadow:"Image Shadow"},Z=5,X=class extends I.PluginSettingTab{constructor(e,r){super(e,r);this.plugin=r}async commit(){await this.plugin.saveSettings();let e=document.body.classList.contains("theme-dark")?"dark":"light";Q(e,this.plugin.settings.tokens),this.plugin.rebuildListCallouts()}fillMissing(e){["dark","light"].forEach(r=>{var o,l;let a=Y[r],i=e[r];i.base={...a.base,...i.base},i.heading={...a.heading,...i.heading},i.list={...a.list,...i.list};let n=(s,c)=>{Object.keys(s).forEach(h=>{var p;(p=c[h])!=null||(c[h]=s[h])})};n(a.folder.lvl0,i.folder.lvl0),n(a.folder.lvl1,i.folder.lvl1),(l=(o=i.folder).q)!=null||(o.q=a.folder.q),i.table={...a.table,...i.table},i.image={...a.image,...i.image}})}addDualPicker(e,r,a,i,n,o){let l=new I.Setting(e).setName(r).setDesc("\u2600 Light \u25B8 left   \xB7   \u{1F319} Dark \u25B8 right"),s=(c,h,p,g)=>{var m;c.setValue(h()).onChange(async b=>{p(b),await this.commit()});let u=(m=c.inputEl)!=null?m:null;u?u.setAttribute("title",g):queueMicrotask(()=>{var b;u=(b=c.containerEl)==null?void 0:b.querySelector("input[type='color']"),u==null||u.setAttribute("title",g)})};l.addColorPicker(c=>s(c,a,n,"Light mode colour (\u2600)")),l.addColorPicker(c=>s(c,i,o,"Dark mode colour (\u{1F319})"))}buildCalloutRow(e,r,a,i){let n=new I.Setting(e);n.addText(l=>l.setPlaceholder("\u2605").setValue(r.char).onChange(async s=>{r.char=s.trim().charAt(0)||"\u2022",await this.commit(),this.display()})).setName(`Marker ${a+1}`);let o=(l,s,c)=>{n.addColorPicker(h=>{h.setValue(s()).onChange(async g=>{c(g),await this.commit()});let p=()=>{var m;let u=(m=h.containerEl)==null?void 0:m.querySelector("input[type='color']");u==null||u.setAttribute("title",l)};p(),queueMicrotask(p)})};o("bgLight",()=>r.bgLight,l=>r.bgLight=l),o("fgLight",()=>r.fgLight,l=>r.fgLight=l),o("bgDark",()=>r.bgDark,l=>r.bgDark=l),o("fgDark",()=>r.fgDark,l=>r.fgDark=l),n.addExtraButton(l=>l.setIcon("trash").setTooltip("Delete").onClick(async()=>{i.listCallouts.splice(a,1),await this.commit(),this.display()}))}newCallout(){return{char:"\u2605",bgLight:"#dbeafe",fgLight:"#1e40af",bgDark:"#1e3a8a",fgDark:"#dbeafe"}}display(){let e=this.containerEl;e.empty();let r=this.plugin.settings;this.fillMissing(r.tokens),new I.Setting(e).setName("_0  On / Off").setDesc('Hide every folder or file whose name starts with "0_" in Explorer').addToggle(a=>a.setValue(r.hideZeroFolders).onChange(async i=>{r.hideZeroFolders=i,await this.commit(),this.plugin.applyZeroFolderVisibility()})),new I.Setting(e).setName("Hide all notes in Explorer").setDesc("Temporarily hide every file (nav-file); folders stay visible.").addToggle(a=>a.setValue(r.hideAllNotes).onChange(async i=>{r.hideAllNotes=i,await this.commit(),this.plugin.applyExplorerHide()})),e.createEl("h3",{text:"\u{1F3A8} Color palette \u2013 Light / Dark"}),e.createEl("p",{text:"Each row shows two colour pickers:  \u2600  = Light mode   \xB7   \u{1F319}  = Dark mode.",cls:"ct-tip"}),this.addDualPicker(e,B.baseWhite,()=>r.tokens.light.base.white,()=>r.tokens.dark.base.white,a=>r.tokens.light.base.white=a,a=>r.tokens.dark.base.white=a),this.addDualPicker(e,B.baseBlack,()=>r.tokens.light.base.black,()=>r.tokens.dark.base.black,a=>r.tokens.light.base.black=a,a=>r.tokens.dark.base.black=a),e.createEl("h4",{text:"Headings (H1\u2013H6)"}),["h1","h2","h3","h4","h5","h6"].forEach(a=>this.addDualPicker(e,B[a],()=>r.tokens.light.heading[a],()=>r.tokens.dark.heading[a],i=>r.tokens.light.heading[a]=i,i=>r.tokens.dark.heading[a]=i)),e.createEl("h4",{text:"List / Bold"}),["bullet","olMarker"].forEach(a=>this.addDualPicker(e,B[a],()=>r.tokens.light.list[a],()=>r.tokens.dark.list[a],i=>r.tokens.light.list[a]=i,i=>r.tokens.dark.list[a]=i)),e.createEl("h4",{text:"Explorer folders \u2013 Level 0"}),["_01","_25","_68"].forEach(a=>this.addDualPicker(e,B[`lvl0_${a.slice(1)}`],()=>r.tokens.light.folder.lvl0[a],()=>r.tokens.dark.folder.lvl0[a],i=>r.tokens.light.folder.lvl0[a]=i,i=>r.tokens.dark.folder.lvl0[a]=i)),e.createEl("h4",{text:"Explorer folders \u2013 Level 1"}),["_01","_25","_68"].forEach(a=>this.addDualPicker(e,B[`lvl1_${a.slice(1)}`],()=>r.tokens.light.folder.lvl1[a],()=>r.tokens.dark.folder.lvl1[a],i=>r.tokens.light.folder.lvl1[a]=i,i=>r.tokens.dark.folder.lvl1[a]=i)),e.createEl("h4",{text:'Explorer folder \u2013 "Q)"'}),this.addDualPicker(e,B.folderQ,()=>r.tokens.light.folder.q,()=>r.tokens.dark.folder.q,a=>r.tokens.light.folder.q=a,a=>r.tokens.dark.folder.q=a),e.createEl("h3",{text:"\u{1F4DD} List Callouts"}),r.listCallouts.forEach((a,i)=>this.buildCalloutRow(e,a,i,r)),new I.Setting(e).addButton(a=>{let i=r.listCallouts.length>=Z;a.setButtonText(i?"Limit reached":"+ Add").setDisabled(i).setCta().setTooltip(i?`You can register up to ${Z} callouts`:"Add a new callout").onClick(async()=>{r.listCallouts.length>=Z||(r.listCallouts.push(this.newCallout()),await this.commit(),this.display())})}).setName(`\uC0C8 Callout \uCD94\uAC00 (max ${Z})`)}};var z=require("obsidian"),ee=class{constructor(t){this.app=t;this.restoreOpenLinkText=null;this.patchOpenLinkText(),this.watchFileOpenEvent(),this.registerGlobalClick()}watchFileOpenEvent(){this.fileOpenHandler=(...t)=>{let e=t[0];if(!e)return;let r=this.leavesFor(e);r.length>1&&r.slice(1).forEach(a=>a.detach())},this.app.workspace.on("file-open",this.fileOpenHandler)}registerGlobalClick(){this.clickHandler=this.handleClick.bind(this),this.app.workspace.containerEl.addEventListener("click",this.clickHandler,!0)}leavesFor(t){let e=[];return this.app.workspace.iterateAllLeaves(r=>{let a=r.view.file;(a==null?void 0:a.path)===t.path&&e.push(r)}),e}async focusOrOpenFile(t){let e=this.leavesFor(t)[0];if(e)return this.app.workspace.revealLeaf(e);let r=this.app.workspace.getLeaf("tab");await r.openFile(t),this.app.workspace.revealLeaf(r)}openPathAny(t){let e=this.app.vault.getAbstractFileByPath(t);e instanceof z.TFile?this.focusOrOpenFile(e):this.app.workspace.openLinkText(t,"",!0)}findFolderNote(t){let e=t.split("/").pop()||"";for(let r of[`${t}.md`,`${t}/${e}.md`,`${t}/index.md`,`${t}/README.md`]){let a=this.app.vault.getAbstractFileByPath(r);if(a instanceof z.TFile)return a}return null}handleClick(t){var n,o,l,s;if(t.button!==0||t.ctrlKey||t.metaKey)return;let e="div.nav-file-title, div.nav-file-title-content",r="div.nav-folder-title",a="a[href$='.pdf']",i=t.target.closest(`${e}, ${r}, ${a}`);if(i){if(i.matches(r)){let c=(l=(o=i.dataset.path)!=null?o:(n=i.closest(".nav-folder"))==null?void 0:n.dataset.path)!=null?l:"";if(!c)return;let h=this.findFolderNote(c);if(!h)return;t.preventDefault(),this.focusOrOpenFile(h);return}if(i.matches(a)){let c=i.getAttribute("href")||"";if(!c)return;t.preventDefault();let h=(s=this.app.metadataCache.getFirstLinkpathDest(c,""))!=null?s:this.app.vault.getAbstractFileByPath(c);h instanceof z.TFile&&this.focusOrOpenFile(h);return}}}patchOpenLinkText(){let t=this.app.workspace,e=t.openLinkText.bind(t);t.openLinkText=async(r,a,i,n)=>{let o=this.app.metadataCache.getFirstLinkpathDest(r,a);if(o instanceof z.TFile){let l=this.leavesFor(o)[0];if(l)return t.revealLeaf(l),l}return e(r,a,!0,n)},this.restoreOpenLinkText=()=>t.openLinkText=e}destroy(){var t;this.fileOpenHandler&&this.app.workspace.off("file-open",this.fileOpenHandler),this.app.workspace.containerEl.removeEventListener("click",this.clickHandler,!0),(t=this.restoreOpenLinkText)==null||t.call(this)}};var y=class{static el(t,e="",r=""){let a=document.createElement(t);return e&&(a.className=e),r&&(a.textContent=r),a}};var U=class{constructor(t){this.app=t}create(t){let e=y.el("button",t.cls,t.label);return t.disabled?(e.classList.add(`${t.cls}--disabled`),e.setAttribute("aria-disabled","true"),e.disabled=!0,e):(e.onclick=t.onClick,e)}openFolder(t){return this.create({label:"\u21AA Open Folder",cls:"interactive_table-button interactive_table-button--open-folder",onClick:async()=>{try{let{shell:e}=window.require("electron"),r=window.require("path"),a=this.app.vault.adapter.basePath,i=r.resolve(a,t);r.extname(i)!==""?e.showItemInFolder(i):e.openPath(i)}catch(e){}}})}newNote(){return this.create({label:"\uFF0B New note",cls:"interactive_table-button interactive_table-button--new-note",onClick:()=>this.app.commands.executeCommandById("file-explorer:new-file")})}refresh(t){return this.create({label:"\u21BB",cls:"interactive_table-button interactive_table-button--refresh",onClick:t})}tagFilter(t,e){return this.create({label:t,cls:"interactive_table-button interactive_table-button--tag-filter",onClick:e})}filter(t,e){return this.create({label:t,cls:"interactive_table-button interactive_table-filter__btn",onClick:e})}pagination(t,e,r){return this.create({label:t,cls:"interactive_table-pagination__btn",disabled:e,onClick:r})}};var te=class{static text(t={}){var r,a;let e=y.el("input",(r=t.cls)!=null?r:"");return e.type="text",e.placeholder=(a=t.placeholder)!=null?a:"",t.value!=null&&(e.value=String(t.value)),t.onEnter&&e.addEventListener("keydown",i=>{i.key==="Enter"&&t.onEnter(e.value.trim())}),t.onChange&&e.addEventListener("change",()=>t.onChange(e.value.trim())),e}static number(t={}){var r;let e=y.el("input",(r=t.cls)!=null?r:"");return e.type="number",t.min!=null&&(e.min=String(t.min)),t.max!=null&&(e.max=String(t.max)),t.step!=null&&(e.step=String(t.step)),t.value!=null&&(e.value=String(t.value)),t.onChange&&e.addEventListener("change",()=>t.onChange(e.value===""?NaN:Number(e.value))),e}static date(t={}){var r;let e=y.el("input",(r=t.cls)!=null?r:"");if(e.type="date",t.value!=null){let a=t.value instanceof Date?t.value.toISOString().slice(0,10):String(t.value);e.value=a}return t.onChange&&e.addEventListener("change",()=>t.onChange(e.value?new Date(`${e.value}T00:00:00`):"")),e}};var O=class{static create(t=!1,e=""){return y.el("div",`ct-spinner${t?" ct-spinner--sm":""}${e?" "+e:""}`)}static default(){return O.create()}static tiny(){return O.create(!0)}};var re=class{constructor(t,e,r,a,i,n,o,l,s){this.app=t;this.note=r;this.vid=a;this.cols=i;this.cb=n;this.opts=o;this.fmList=l;this.tagList=s;this.btnFactory=new U(t),this.wrap=y.el("div","ct-filter-bar"),e.prepend(this.wrap),o.showFrontmatterFilterButton&&this.buildFrontmatterFilters(),o.showTagFilterButton&&this.buildTagFilter(),o.showSearchBox&&this.buildSearchBox(),this.btns=y.el("div","ct-filter-bar__utils"),this.wrap.appendChild(this.btns),o.showOpenFolderButton&&o.folderPath&&this.btns.appendChild(this.btnFactory.openFolder(o.folderPath)),o.showNewNoteButton&&this.btns.appendChild(this.btnFactory.newNote()),o.showRefreshButton&&this.btns.appendChild(this.btnFactory.refresh(async()=>{let c=event.currentTarget,h=c.textContent;c.replaceChildren(O.tiny());try{await this.cb.rerender()}finally{c.textContent=h!=null?h:"\u21BB"}}))}buildTagFilter(){let t=`tagFilter_${this.vid}`,e=this.cb.getState(this.note,this.vid,t)||"ALL",r=this.btnFactory.tagFilter(e==="ALL"?"#Tags":e,async()=>{if(!this.tagList)return;let a=await this.cb.suggester(this.tagList);a!=null&&this.cb.sync(this.note,this.vid,t,a)});e!=="ALL"&&r.classList.add("is-active"),this.wrap.appendChild(r)}buildFrontmatterFilters(){this.fmList.forEach(({prop:t,values:e})=>{let r=`filter_${this.vid}_${t}`,a=this.cb.getState(this.note,this.vid,r)||"ALL",i=a==="ALL"?t:`${t}: ${a}`,n=this.btnFactory.filter(i,async()=>{let o=await this.cb.suggester(e);o!=null&&this.cb.sync(this.note,this.vid,r,o)});a!=="ALL"&&n.classList.add("is-active"),this.wrap.appendChild(n)})}collectPropValues(t){var a,i;let e=(i=(a=this.cb.getLocalState(this.note,this.vid))==null?void 0:a.pages)!=null?i:[],r=new Set;return e.forEach(n=>{let o=this.cb.getVal(n,t),l=this.cb.formatAsDate(o)||String(o!=null?o:"-");r.add(l)}),Array.from(r).filter(n=>n!=="-").sort()}buildSearchBox(){let t=`search_ready_${this.vid}`,e=`search_${this.vid}`,r=this.cb.getState(this.note,this.vid,e)||"",a=te.text({cls:"ct-filter-bar__search",placeholder:"Search\u2026",value:r,onEnter:i=>{this.cb.sync(this.note,this.vid,t,!0),this.cb.sync(this.note,this.vid,e,i)}});this.wrap.appendChild(a)}};var ae=class{constructor(t,e,r,a,i){this.note=t;this.vid=e;this.cb=r;var o;this.btnFactory=new U(r);let n=Math.max(i.perPage,1);if(this.totalPages=Math.ceil(i.totalRows/n),this.totalPages<=1){this.wrap=y.el("div");return}this.wrap=y.el("div","ct-pagination"),a.appendChild(this.wrap),this.render((o=i.maxButtons)!=null?o:7)}render(t){var l;this.wrap.empty();let e=`pagination_${this.vid}`,r=(l=this.cb.getState(this.note,this.vid,e))!=null?l:0,a=(s,c,h=!1)=>{let p=this.btnFactory.pagination(s,h,()=>{this.cb.sync(this.note,this.vid,e,c)});p.classList.add(s==="\u2190"||s==="\u2192"?"interactive_table-pagination__btn--arrow":"interactive_table-pagination__btn--num"),h&&p.classList.add("is-active"),this.wrap.appendChild(p)};a("\u2190",r-1,r===0);let i=Math.max(3,t),n=Math.max(0,r-Math.floor(i/2)),o=n+i-1;o>=this.totalPages&&(o=this.totalPages-1,n=Math.max(0,o-i+1)),n>0&&a("1",0),n>1&&this.wrap.appendChild(y.el("span","ct-pagination__ellipsis","\u2026"));for(let s=n;s<=o;s++)a(String(s+1),s,s===r);o<this.totalPages-2&&this.wrap.appendChild(y.el("span","ct-pagination__ellipsis","\u2026")),o<this.totalPages-1&&a(String(this.totalPages),this.totalPages-1),a("\u2192",r+1,r>=this.totalPages-1)}};function ie(d){return(d==null?[]:Array.isArray(d)?d:d instanceof Set?[...d]:typeof d=="string"?d.split(/[,;]/).filter(Boolean):[]).map(e=>(e!=null?e:"").trim()).filter(Boolean).map(e=>e.startsWith("#")?e.slice(1):e)}function De(d){return d.toString().padStart(2,"0")}function We(d){return`${d.getFullYear()}-${De(d.getMonth()+1)}-${De(d.getDate())}`}function Je(d,t){var e;if(d==null)return"";switch(t){case"num":return String(d);case"year":{let r=(e=String(d).match(/\d{4}/))==null?void 0:e[0];return r!=null?r:String(d)}case"date":{let r=new Date(d);return isNaN(r.getTime())?String(d):We(r)}case"tags":return ie(d).sort((a,i)=>a.localeCompare(i,"ko")).join(", ");default:return String(d)}}function Qe(d,t){return t.startsWith("file.")?t.split(".").reduce((e,r)=>e==null?void 0:e[r],d):d[t]}var ne=class{static build(t){let e=y.el("table","ct-data-table");t.zebra&&e.classList.add("ct-data-table--zebra");let r=y.el("thead",""),a=y.el("tr","");t.columns.filter(n=>n.column).forEach(n=>{let o=y.el("th","ct-data-table__th",n.name),l=t.cb.getState(t.notePath,t.viewId,`sort_${t.viewId}`),s=t.cb.getState(t.notePath,t.viewId,`sort_direction_${t.viewId}`);n.prop===l&&(s==="asc"&&o.classList.add("is-asc"),s==="desc"&&o.classList.add("is-desc")),o.addEventListener("click",()=>{a.querySelectorAll(".ct-data-table__th").forEach(S=>S.classList.remove("is-asc","is-desc"));let c=`sort_${t.viewId}`,h=`sort_direction_${t.viewId}`,p=t.cb.getState(t.notePath,t.viewId,c),g=t.cb.getState(t.notePath,t.viewId,h),u=null,m=null,b=p&&g;n.prop!==p?b?(u=null,m=null):(u=n.prop,m="asc"):g===null?(u=n.prop,m="asc"):g==="asc"?(u=n.prop,m="desc"):(u=null,m=null),m==="asc"&&o.classList.add("is-asc"),m==="desc"&&o.classList.add("is-desc"),t.cb.sync(t.notePath,t.viewId,c,u),t.cb.sync(t.notePath,t.viewId,h,m)}),a.appendChild(o)}),r.appendChild(a),e.appendChild(r);let i=y.el("tbody","");return t.rows.forEach((n,o)=>{let l=y.el("tr","ct-data-table__tr");l.onclick=()=>{if(l.classList.contains("ct-row--active")){l.classList.remove("ct-row--active");return}let c=e.querySelector(".ct-row--active");c&&c.classList.remove("ct-row--active"),l.classList.add("ct-row--active")},l.ondblclick=()=>{var c;let s=(c=n==null?void 0:n.file)==null?void 0:c.path;s&&window.app.workspace.openLinkText(s,"",!1)},t.columns.filter(s=>s.column).forEach(s=>{let c=y.el("td","ct-data-table__td"),h;if(t.cellRenderer)h=t.cellRenderer(n,s);else{let p=Qe(n,s.prop);h=Je(p,s.format)}h instanceof HTMLElement?c.appendChild(h):c.textContent=h,l.appendChild(c)}),i.appendChild(l)}),e.appendChild(i),e}};var oe=class{constructor(t,e){this.app=t,this.cb=e}async buildView(t,e,r,a,i,n,o,l,s=[],c=null,h=this.cb){t.empty(),t.classList.add("ct-it-container");let p={showOpenFolderButton:l.showOpenFolderButton,showNewNoteButton:l.showNewNoteButton,showTagFilterButton:l.showTagFilterButton,showFrontmatterFilterButton:l.showFrontmatterFilterButton,showSearchBox:l.showSearchBox,showRefreshButton:l.showRefreshButton,folderPath:l.folderPath};new re(this.app,t,e,r,i,h,p,s,c);let g=ne.build({columns:i,rows:a,zebra:!0,onRowClick:u=>{var b;let m=(b=u==null?void 0:u.file)==null?void 0:b.path;m&&this.app.workspace.openLinkText(m,"",!1)},notePath:e,viewId:r,cb:{getState:h.getState,sync:h.sync}});if(t.appendChild(g),n>0){let u={perPage:n,totalRows:o};new ae(e,r,h,t,u)}}};var N=require("obsidian"),q=class{constructor(t){this.app=t;this.dateYMDRegex=/^(\d{4})-(\d{1,2})-(\d{1,2})$/;this.timeHMRegex=/^(\d{1,2}):(\d{1,2})$/}async editProp(t){var r,a;let e=this.app.vault.getAbstractFileByPath((0,N.normalizePath)(t.path));if(e instanceof N.TFile&&t.type==="file name"){let i=e.basename,n=await this.textInput(i);if(!n||n===i)return;let o=(a=(r=e.parent)==null?void 0:r.path)!=null?a:"",l=e.extension,s=o?`${o}/${n}.${l}`:`${n}.${l}`;try{await this.app.vault.rename(e,s),new N.Notice("\u2705 File renamed")}catch(c){console.error(c),new N.Notice("\u26A0\uFE0F Failed to rename file")}}}async textInput(t){return new Promise(e=>{let{Modal:r}=globalThis.coverTable.obsidian;class a extends r{constructor(o){super(o);this.result=t}onOpen(){let{contentEl:o}=this;o.createEl("h1",{text:"Input"});let l=o.createEl("input",{value:this.result});l.style.width="100%",l.addEventListener("keydown",c=>{c.key==="Enter"&&(this.result=l.value.trim(),this.close(),e(this.result))});let s=o.createEl("button",{text:"OK"});s.onclick=()=>{this.result=l.value.trim(),this.close(),e(this.result)}}onClose(){this.contentEl.empty()}}new a(this.app).open()})}getVal(t,e){return e.startsWith("file.")?e.split(".").reduce((r,a)=>r==null?void 0:r[a],t):t[e]}parseDateYMD(t){if(typeof t!="string")return null;let e=t.match(this.dateYMDRegex);if(e){let[a,i,n,o]=e.map(Number);return i<1e3||i>9999||n<1||n>12||o<1||o>31?null:new Date(i,n-1,o)}let r=new Date(t);return isNaN(r.getTime())?null:r}parseTimeHM(t){if(typeof t!="string")return null;let e=t.match(this.timeHMRegex);if(!e)return null;let[r,a,i]=e.map(Number);if(a>23||i>59)return null;let n=new Date;return n.setHours(a,i,0,0),n}getSortValue(t){if(t==null)return"";let e=typeof t=="string"?t:String(t),r=this.parseDateYMD(e)||this.parseTimeHM(e);if(r)return r.getTime();let a=parseFloat(e);return isNaN(a)?e.toLowerCase():a}formatAsDate(t){if(t==null)return"";let e=this.parseDateYMD(String(t));if(!e)return String(t);let r=e.getFullYear(),a=e.getMonth()+1,i=e.getDate();return`${r}-${a<10?"0":""}${a}-${i<10?"0":""}${i}`}sortByProp(t,e,r="asc"){return!e||e==="title_link"||e==="tags"?t:t.sort((a,i)=>{let n=this.getSortValue(this.getVal(a,e)),o=this.getSortValue(this.getVal(i,e));return typeof n=="number"&&typeof o=="number"?r==="asc"?n-o:o-n:r==="asc"?String(n).localeCompare(String(o)):String(o).localeCompare(String(n))})}async suggester(t){let{SuggestModal:e}=globalThis.coverTable.obsidian;return new Promise(r=>{class a extends e{constructor(n){super(n)}getSuggestions(n){let o=n.toLowerCase();return t.filter(l=>l.toLowerCase().includes(o))}renderSuggestion(n,o){o.createEl("div",{text:n})}onChooseSuggestion(n){r(n)}}new a(this.app).open()})}};function G(...d){}var Se=crypto!=null&&crypto.randomUUID?crypto.randomUUID():`tab-${Date.now().toString(36)}-${Math.random().toString(36).slice(2,10)}`,Ce=class{constructor(){this.paneMap=new Map;this.bcMap=new Map;this.subs=new Map;window.addEventListener("storage",t=>{var a;if(!((a=t.key)!=null&&a.startsWith("coverTable::"))||t.newValue==null)return;let[,e,r]=t.key.split("::");try{this.applyRemote(r,JSON.parse(t.newValue))}catch(i){}}),window.addEventListener("message",t=>{var a;if(!((a=t.data)!=null&&a.__coverTable))return;let{viewId:e,payload:r}=t.data;r.sender!==Se&&this.applyRemote(e,r.state)})}sweep(t){var r;let e=((r=this.paneMap.get(t))!=null?r:[]).filter(a=>document.body.contains(a.leafEl));this.paneMap.set(t,e)}addPane(t){var a;let e=(a=this.paneMap.get(t.viewId))!=null?a:[];if(e.some(i=>i.container===t.container))return;e.push(t),this.paneMap.set(t.viewId,e),G("addPane \u25B6",t.viewId,"\uD604\uC7AC Pane \uC218:",e.length),this.sweep(t.viewId);let r=async()=>{G("listener \uD638\uCD9C \u25B6",t.viewId),await t.refreshView(!0);let i=new CustomEvent("__cover_refresh",{detail:t.viewId});window.dispatchEvent(i)};if(this.subscribe(t.viewId,r),t.leafEl){let i=new MutationObserver(()=>{var n;if(t.leafEl&&!document.body.contains(t.leafEl)){this.unsubscribe(t.viewId,r);let o=((n=this.paneMap.get(t.viewId))!=null?n:[]).filter(l=>l!==t);this.paneMap.set(t.viewId,o),G("Pane \uC81C\uAC70 \u25B6",t.viewId,"\uB0A8\uC740 Pane:",o.length),i.disconnect()}});i.observe(document.body,{childList:!0,subtree:!0})}this.ensureChannel(t.viewId)}removePane(t,e){var a,i,n;this.sweep(e);let r=((a=this.paneMap.get(e))!=null?a:[]).filter(o=>o.notePath!==t);if(this.paneMap.set(e,r),G("removePane \u25B6",e,"\uB0A8\uC740 Pane:",r.length),r.length===0){(i=this.subs.get(e))==null||i.clear(),this.subs.delete(e),(n=this.bcMap.get(e))==null||n.close(),this.bcMap.delete(e);try{localStorage.removeItem(this.makeKey(t,e))}catch(o){}}}get(t,e){let r=localStorage.getItem(this.makeKey(t,e));try{return r?JSON.parse(r):{}}catch(a){return{}}}set(t,e,r=!1,a=!1){var l;G("set \u25B6",t.viewId,{patch:e,wipe:r,silent:a}),window.__COVER_TABLE_DISABLE_BC&&(a=!0);let i=this.makeKey(t.notePath,t.viewId),n=this.get(t.notePath,t.viewId),o=r?e:{...n,...e};try{localStorage.setItem(i,JSON.stringify(o))}catch(s){if((s==null?void 0:s.name)==="QuotaExceededError")console.warn("[Cover-Table] localStorage quota exceeded \u2192 using memory only");else throw s}if(!a){let s={sender:Se,state:o};(l=this.bcMap.get(t.viewId))==null||l.postMessage(s),window.postMessage({__coverTable:!0,viewId:t.viewId,payload:s},"*")}this.emit(t.viewId,o)}subscribe(t,e){var a;let r=(a=this.subs.get(t))!=null?a:new Set;r.add(e),this.subs.set(t,r)}unsubscribe(t,e){var r;(r=this.subs.get(t))==null||r.delete(e)}emit(t,e){var r;(r=this.subs.get(t))==null||r.forEach(a=>{try{a(e)}catch(i){console.error(i)}})}ensureChannel(t){if(this.bcMap.has(t))return;let e=new BroadcastChannel(`coverTable-${t}`);e.onmessage=r=>{let{sender:a,state:i}=r.data||{};a!==Se&&this.applyRemote(t,i)},this.bcMap.set(t,e)}applyRemote(t,e){var o;let r=(o=this.paneMap.get(t))!=null?o:[];if(r.length===0)return;let a=r[0].notePath,i=this.makeKey(a,t),n=this.get(a,t);JSON.stringify(n)!==JSON.stringify(e)&&(localStorage.setItem(i,JSON.stringify(e)),this.emit(t,e))}makeKey(t,e){return`coverTable::${t}::${e}`}hasLivePane(t){var r;return((r=this.paneMap.get(t))!=null?r:[]).some(a=>a.leafEl&&document.body.contains(a.leafEl))}},_=new Ce;function Ze(){return crypto!=null&&crypto.randomUUID?crypto.randomUUID():`vid-${Date.now().toString(36)}-${Math.random().toString(36).slice(2,8)}`}function A(d,t,e){var r,a;return(a=(r=_.get(d,t))==null?void 0:r[e])!=null?a:null}function Xe(d,t,e,r){let a=_.paneMap.get(t),i=a==null?void 0:a[0];if(i){let o=!!i.skipStateWrite;_.set(i,{[e]:r},!1,o);return}let n=`coverTable::${d}::${t}`;try{let o=JSON.parse(localStorage.getItem(n)||"{}");o[e]=r,localStorage.setItem(n,JSON.stringify(o))}catch(o){localStorage.setItem(n,JSON.stringify({[e]:r}))}}var le=class{constructor(t,e,r,a,i,n){this.filteredRows=[];this.displayRows=[];this.totalRows=0;this.dateYMDRegex=/^(\d{4})-(\d{1,2})-(\d{1,2})$/;this.isoDateRegex=/^(\d{4})-(\d{2})-(\d{2})T/;this.timeHMRegex=/^(\d{1,2}):(\d{1,2})$/;var l;if(!(a!=null&&a.sourcePath))throw new Error("ctx.sourcePath missing");this.dv=t,this.pages=e,this.columns=r,this.ctx=a,this.settings=i,this.notePath=a.sourcePath,this.host=n;let o=n.closest(".workspace-leaf");if(!o)throw new Error("workspace-leaf not found");this.viewId=(l=i.__viewId)!=null?l:i.__viewId=Ze(),_.addPane({viewId:this.viewId,notePath:this.notePath,dv:t,settings:i,ctx:a,container:n,leafEl:o,rerender:async s=>await this.compute(s),refreshView:async s=>{var c;return await((c=i.___refreshHook)==null?void 0:c.call(i,s))}})}async compute(t=!1){var i;let e=this.pages.map((n,o)=>{var p,g,u,m,b,S,H,C;let l={...n,__idx:o};l.tags=Array.isArray(n.tags)?n.tags:Array.isArray((p=n.file)==null?void 0:p.tags)?n.file.tags:n.tags?[n.tags]:[];let s=(()=>{try{return this.dv.page(n.file.path)}catch(L){return null}})(),c=(u=(g=n.file)==null?void 0:g.basename)!=null?u:"",h=c.endsWith(".excalidraw")?c.slice(0,-11):c||"-";return l.__fmTitle=(C=(H=(b=(m=s==null?void 0:s.frontmatter)==null?void 0:m.title)!=null?b:s==null?void 0:s.title)!=null?H:(S=n.frontmatter)==null?void 0:S.title)!=null?C:h,l}),r=await this.applyAllFilters(e);r=this.applySort(r),this.filteredRows=r,this.totalRows=r.length;let a=(i=this.settings.perPage)!=null?i:10;this.displayRows=a>0?this.paginate(r,a,t):r}async applyAllFilters(t){for(let e of this.columns.filter(r=>r.filter))t=await this.filterByProp(e,t);return t=await this.applyTagFilter(t),t=this.applySearch(t),t}async filterByProp(t,e){let r=`filter_${this.viewId}_${t.prop}`,a=A(this.notePath,this.viewId,r);if(!a||a==="ALL")return e;let i=n=>{var o;switch(t.format){case"date":{let l=this.normalizeYMD(n);return l!=null?l:"-"}case"year":{let l=typeof n=="number"?String(n):(o=String(n).match(/\d{4}/))==null?void 0:o[0];return l!=null?l:"-"}default:return String(n!=null?n:"-")}};return e.filter(n=>i(this.getVal(n,t.prop))===a)}async applyTagFilter(t){let e=A(this.notePath,this.viewId,`tagFilter_${this.viewId}`)||"ALL";return e==="ALL"?t:t.filter(r=>{var i,n,o;return(Array.isArray((i=r.file)==null?void 0:i.tags)?r.file.tags:Array.isArray(r.tags)?r.tags:[(o=(n=r.file)==null?void 0:n.tags)!=null?o:r.tags]).includes(e)})}applySearch(t){if(!A(this.notePath,this.viewId,`search_ready_${this.viewId}`))return t;let r=(A(this.notePath,this.viewId,`search_${this.viewId}`)||"").trim().toLowerCase();if(!r)return t;let a=this.columns.filter(i=>i.column);return t.forEach(i=>{let n=[];a.forEach(o=>{let l=o.prop==="title_link"?i.__fmTitle||"":String(this.getVal(i,o.prop)||"");n.push(l.toLowerCase())}),i.__searchText=n.join(" ")}),t.filter(i=>r.split(" ").every(n=>n&&(i.__searchText||"").includes(n.toLowerCase())))}applySort(t){var n;let e=A(this.notePath,this.viewId,`sort_${this.viewId}`),r=A(this.notePath,this.viewId,`sort_direction_${this.viewId}`);if(!e||!r)return t.sort((o,l)=>o.__idx-l.__idx);if(!e)return t.sort((o,l)=>o.__idx-l.__idx);let a=this.columns.find(o=>o.prop===e),i=(n=a==null?void 0:a.format)!=null?n:"text";return t.sort((o,l)=>{let s=this.getSortValue(this.getVal(o,e),i),c=this.getSortValue(this.getVal(l,e),i),h=typeof s=="number"&&typeof c=="number"?s-c:JSON.stringify(s).localeCompare(JSON.stringify(c),"ko");return r==="asc"?h:-h})}paginate(t,e,r){var o;let a=`pagination_${this.viewId}`,i=e>0?Math.ceil(t.length/e):1,n=(o=A(this.notePath,this.viewId,a))!=null?o:0;return i===0?n=0:(n<0&&(n=0),n>=i&&(n=i-1)),!r&&n!==A(this.notePath,this.viewId,a)&&Xe(this.notePath,this.viewId,a,n),e>0?t.slice(n*e,(n+1)*e):[...t]}parseDateYMD(t){if(typeof t!="string")return null;let e=t.match(this.dateYMDRegex);if(!e)return null;let r=+e[1],a=+e[2],i=+e[3];return r<1e3||r>9999||a<1||a>12||i<1||i>31?null:new Date(r,a-1,i)}normalizeYMD(t){if(!t)return null;let r=String(t).split("T")[0].match(/^(\d{4})-(\d{1,2})-(\d{1,2})$/);return r?`${+r[1]}-${+r[2]}-${+r[3]}`:null}parseTimeHM(t){if(typeof t!="string")return null;let e=t.match(this.timeHMRegex);if(!e)return null;let r=+e[1],a=+e[2];if(r>23||a>59)return null;let i=new Date;return i.setHours(r,a,0,0),i}getSortValue(t,e="text"){var r,a;if(t==null)return e==="num"?0:[99,"",""];switch(e){case"num":{let i=Number(t);return isNaN(i)?0:i}case"date":{let i=String(t);this.isoDateRegex.test(i)&&(i=i.slice(0,10));let n=this.parseDateYMD(i);return n?n.getTime():0}case"year":{let i=(r=String(t).match(/\d{4}/))==null?void 0:r[0];return i?Number(i):0}case"tags":{let i=ie(t).sort((n,o)=>n.localeCompare(o,"ko"))[0];return i!=null?i:""}default:{let i=String(t!=null?t:""),n=i.normalize("NFKD").replace(/[\u0300-\u036F]/g,"").replace(/[#*_`~\[\]\(\)\{\}<>\-]/g,"").trim().toLowerCase(),o=(a=n[0])!=null?a:"";return[/[a-z]/.test(o)?0:/[가-힣]/.test(o)?1:/\d/.test(o)?2:/\p{Extended_Pictographic}/u.test(o)?4:3,n,i]}}}formatAsDate(t){if(t==null)return"";let e=this.parseDateYMD(String(t));if(!e)return String(t);let r=e.getFullYear(),a=e.getMonth()+1,i=e.getDate();return`${r}-${a<10?"0":""}${a}-${i<10?"0":""}${i}`}getVal(t,e){return e.startsWith("file.")?e.split(".").reduce((r,a)=>r==null?void 0:r[a],t):t[e]}};function Me(d,t,e){var r,a;return(a=(r=_.get(d,t))==null?void 0:r[e])!=null?a:null}function se(d,t,e,r){let a=_.paneMap.get(t),i=a==null?void 0:a[0];if(i){let o=!!i.skipStateWrite;_.set(i,{[e]:r},!1,o);return}let n=`coverTable::${d}::${t}`;try{let o=JSON.parse(localStorage.getItem(n)||"{}");o[e]=r,localStorage.setItem(n,JSON.stringify(o))}catch(o){localStorage.setItem(n,JSON.stringify({[e]:r}))}}var ce=class{constructor(t){this.app=t;this.models=new Map;this._rendering=!1;this.skipStateWrite=!1;this.dateYMDRegex=/^(\d{4})-(\d{1,2})-(\d{1,2})$/;this.timeHMRegex=/^(\d{1,2}):(\d{1,2})$/;this.svc=new q(t),this.cb={getState:Me,setState:se,getLocalState:(e,r)=>_.get(e,r),getVal:(e,r)=>this.svc.getVal(e,r),parseDateYMD:e=>this.svc.parseDateYMD(e),formatAsDate:e=>this.svc.formatAsDate(e),getSortValue:e=>this.svc.getSortValue(e),suggester:e=>this.svc.suggester(e),rerender:async()=>{await this.rerender(!0)},sync:async(e,r,a,i)=>{se(e,r,a,i),await this.rerender(!0,r)},resetState:async()=>{}},this.ui=new oe(t,this.cb)}async renderAutoView(t,e={},r,a,i=!1){var c,h,p,g,u,m,b,S,H;let n={...e},o=r,l=(r==null?void 0:r.sourcePath)||"";if(this._rendering)return;this._rendering=!0,i&&(this.skipStateWrite=!0);let s=null;try{if(!(r!=null&&r.sourcePath)||!a)return;a.dataset.coverVid?n.__wipeState=!1:(a.dataset.coverVid=crypto.randomUUID(),n.__wipeState=!0),n.__viewId=a.dataset.coverVid,n._notePath=r.sourcePath;let C=(c=n.path)!=null?c:r.sourcePath.substring(0,r.sourcePath.lastIndexOf("/")),L=t.pages().where(f=>f.file.folder===C).where(f=>!this.isFolderNote(f)).array(),M=this.app.vault.getFiles().filter(f=>f.extension==="canvas"&&f.path.startsWith(C+"/")).map(f=>({file:{path:f.path,link:t.fileLink(f.path),folder:C,basename:f.basename},frontmatter:{title:f.basename},created:"-",published:"-",status:"-",importance:"-",tags:"#canvas"})),we=this.app.vault.getFiles().filter(f=>f.extension==="md"&&f.basename.endsWith(".excalidraw")&&f.path.startsWith(C+"/")).map(f=>({file:{path:f.path,link:t.fileLink(f.path),folder:C,basename:f.basename},frontmatter:{title:f.basename.replace(/\.excalidraw$/,"")},created:"-",published:"-",status:"-",importance:"-",tags:"#excalidraw"})),ke=[...L,...M,...we],Ee={prop:"__fmTitle",name:"Title",filter:!1,column:!0,format:"text"},W={prop:"tags",name:"Tags",filter:!1,column:!0,format:"tags"},J=Array.isArray(n.props)?n.props:[],F=[Ee,...J.filter(f=>!["title_link","tags"].includes(f.prop)).map(f=>{var E,x,v;return{...f,filter:(E=f.filter)!=null?E:!0,column:(x=f.column)!=null?x:!0,format:(v=f.format)!=null?v:"text"}}),W];n.___refreshHook=async(f=!1)=>{await this.renderAutoView(t,n,r,a,f)},s=new le(t,ke,F,r,n,a),a.setAttribute("data-cover-view",s.viewId),this.models.set(s.viewId,s),await s.compute(i);let $=F.filter(f=>f.filter).map(f=>{let E=[...new Set(s.filteredRows.map(x=>{var P;let v=this.svc.getVal(x,f.prop);switch(f.format){case"date":{let k=s.normalizeYMD(v);return k!=null?k:"-"}case"year":{let k=typeof v=="number"?String(v):(P=String(v).match(/\d{4}/))==null?void 0:P[0];return k!=null?k:"-"}default:return String(v!=null?v:"-")}}))].sort((x,v)=>String(x).localeCompare(String(v)));return{prop:f.prop,values:["ALL",...E]}}),R=(()=>{let f=new Set;return s.filteredRows.forEach(E=>{var x,v,P;return(Array.isArray((x=E.file)==null?void 0:x.tags)?E.file.tags:Array.isArray(E.tags)?E.tags:[(P=(v=E.file)==null?void 0:v.tags)!=null?P:E.tags]).forEach(k=>f.add(k))}),f.size?["ALL",...[...f].sort()]:null})(),xe=F.filter(f=>f.filter).map(f=>{let E=[...new Set(s.filteredRows.map(x=>{var P;let v=this.svc.getVal(x,f.prop);switch(f.format){case"date":{let k=s.normalizeYMD(v);return k!=null?k:"-"}case"year":{let k=typeof v=="number"?String(v):(P=String(v).match(/\d{4}/))==null?void 0:P[0];return k!=null?k:"-"}default:return String(v!=null?v:"-")}}))].sort((x,v)=>String(x).localeCompare(String(v)));return{prop:f.prop,values:["ALL",...E]}}),V=new Set;s.filteredRows.forEach(f=>{var E,x,v;((v=(x=(E=f.file)==null?void 0:E.tags)!=null?x:f.tags)!=null?v:[]).forEach(P=>V.add(P))});let ot=V.size?["ALL",...[...V].sort()]:null,Ue=this.makeScopedCb(n._notePath,s.viewId);await this.ui.buildView(a,n._notePath,s.viewId,s.displayRows,F,(h=n.perPage)!=null?h:10,s.totalRows,{showOpenFolderButton:(p=n.showOpenFolderButton)!=null?p:!0,showNewNoteButton:(g=n.showNewNoteButton)!=null?g:!0,showTagFilterButton:(u=n.showTagFilterButton)!=null?u:!0,showFrontmatterFilterButton:(m=n.showFrontmatterFilterButton)!=null?m:!0,showSearchBox:(b=n.showSearchBox)!=null?b:!0,showRefreshButton:(S=n.showRefreshButton)!=null?S:!0,folderPath:(H=n.path)!=null?H:null},$,R,Ue)}finally{this.skipStateWrite=!1,this._rendering=!1}}async rerender(t=!1,e){for(;this._rendering;)await new Promise(a=>setTimeout(a,15));let r=e?this.models.get(e):(()=>{var n,o;let a=(o=(n=event==null?void 0:event.target)==null?void 0:n.closest)==null?void 0:o.call(n,"[data-cover-view]"),i=a?a.dataset.coverView:null;return i?this.models.get(i):[...this.models.values()].pop()})();r&&(await r.compute(t),await this.renderAutoView(r.dv,r.settings,r.ctx,r.host,t),this.models.forEach((a,i)=>{document.body.contains(a.host)||this.models.delete(i)}))}getVal(t,e){return e.startsWith("file.")?e.split(".").reduce((r,a)=>r==null?void 0:r[a],t):t[e]}parseDateYMD(t){if(typeof t!="string")return null;let e=t.match(this.dateYMDRegex);if(!e)return null;let r=+e[1],a=+e[2],i=+e[3];return r<1e3||r>9999||a<1||a>12||i<1||i>31?null:new Date(r,a-1,i)}parseTimeHM(t){if(typeof t!="string")return null;let e=t.match(this.timeHMRegex);if(!e)return null;let r=+e[1],a=+e[2];if(r>23||a>59)return null;let i=new Date;return i.setHours(r,a,0,0),i}formatAsDate(t){if(t==null)return"";let e=this.parseDateYMD(String(t));if(!e)return String(t);let r=e.getFullYear(),a=e.getMonth()+1,i=e.getDate();return`${r}-${a<10?"0":""}${a}-${i<10?"0":""}${i}`}getSortValue(t){if(t==null)return"";let e=typeof t=="string"?t:String(t),r=this.parseDateYMD(e)||this.parseTimeHM(e);if(r)return r.getTime();let a=parseFloat(e);return isNaN(a)?e.toLowerCase():a}async suggester(t){return this.svc.suggester(t)}isFolderNote(t){var i;let{path:e,folder:r}=(i=t==null?void 0:t.file)!=null?i:{};return!e||!r?!1:e.substring(e.lastIndexOf("/")+1,e.lastIndexOf("."))===r}makeScopedCb(t,e){return{...this.cb,rerender:async()=>{await this.rerender(!0,e)},sync:async(r,a,i,n)=>{se(t,e,i,n),await this.rerender(!0,e)},getState:(r,a,i)=>Me(r!=null?r:t,a!=null?a:e,i),setState:(r,a,i,n)=>se(r!=null?r:t,a!=null?a:e,i,n)}}};var et=["#ff6363","#ffa600","#ffcf00","#8aff80","#2effd3","#00ffff","#25c6fc","#3399ff","#9975e2","#cc66cc","#ff66ff","#ff66cc","#ff6699","#ff6666","#f06b60","#ed7732","#de9f00","#afff68","#53ffb4","#2f9eff"],tt=["#ff9999","#ffc04d","#ffe680","#b3ffb3","#80fff2","#80ffff","#99daff","#99c2ff","#c2a3e8","#df9edf","#ff99ff","#ff99e6","#ff99c2","#ff9999","#f4a38c","#f1b066","#eec900","#c5ff8a","#84ffc9","#74baff"];function Fe(d,t={}){var i,n;let{colorPalette:e,colorPaletteDark:r,colorPaletteLight:a}=t;return d?((i=r!=null?r:e)!=null?i:et).slice():((n=a!=null?a:e)!=null?n:tt).slice()}var de=class{constructor(t){this.palette=t;this.noteColorMap={};this.colorPtr=0}assign(t){if(this.noteColorMap[t])return;if(this.palette.length===0){this.noteColorMap[t]={colorIndex:null};return}let e=this.colorPtr%this.palette.length;this.noteColorMap[t]={colorIndex:e},this.colorPtr++}colorOf(t){let e=this.noteColorMap[t];return!e||e.colorIndex==null?"#999":this.palette[e.colorIndex]}legend(){let t={};return Object.keys(this.noteColorMap).forEach(e=>{t[e]=this.colorOf(e)}),t}reset(){this.colorPtr=0,Object.keys(this.noteColorMap).forEach(t=>delete this.noteColorMap[t])}};var he=class{constructor(t,e,r={},a){var i,n,o,l,s,c;(i=r.statusField)!=null||(r.statusField="obsidianUIMode"),(n=r.statusDoneValue)!=null||(r.statusDoneValue="preview"),(o=r.excludeDone)!=null||(r.excludeDone=!0),(l=r.startField)!=null||(r.startField="created"),(s=r.endField)!=null||(r.endField="end"),this.app=t,this.dv=e,this.settings=r,this.isDark=document.body.classList.contains("theme-dark"),this.palette=Fe(this.isDark,r),this.gPalette=new de(this.palette),!((c=e.current)!=null&&c.call(e))&&(a!=null&&a.sourcePath)&&(e.current=()=>e.page(a.sourcePath))}compute(){let{pages:t,year:e,month:r,daysInMonth:a}=this.collectPages(),i=this.gPalette.legend();return{pages:t,year:e,month:r,daysInMonth:a,legend:i,palette:[...this.palette],startField:this.settings.startField,endField:this.settings.endField}}collectPages(){var g,u;let t=new Date,e=t.getFullYear(),r=t.getMonth(),a=new Date(e,r+1,0).getDate(),i=(u=(g=this.dv).current)==null?void 0:u.call(g),n=Array.isArray(this.settings.customPages)?this.settings.customPages:this.settings.path?this.dv.pages(`"${this.settings.path}"`).array():i!=null&&i.file?this.dv.pages().where(m=>m.file.folder===i.file.folder&&m.file.path!==i.file.path).array():[],o=this.settings.statusField,l=this.settings.statusDoneValue.toLowerCase(),s=this.settings.excludeDone!==!1,c=this.settings.startField,h=this.settings.endField,p=n.filter(m=>{var b;return s&&((b=m[o])!=null?b:"").toString().toLowerCase()===l?!1:!!m[c]&&!!m[h]});return p.forEach(m=>{var S;let b=m.title||((S=m.file)==null?void 0:S.name)||"Untitled";this.gPalette.assign(b)}),{pages:p,year:e,month:r,daysInMonth:a}}colorFor(t,e,r){var g,u;let{pages:a,year:i,month:n,startField:o,endField:l}=r,s=a.find(m=>{var b;return(m.title||((b=m.file)==null?void 0:b.name)||"Untitled")===t});if(!s)return null;let c=(g=this.dv.date(s[o]))==null?void 0:g.toJSDate(),h=(u=this.dv.date(s[l]))==null?void 0:u.toJSDate();if(!c||!h)return null;let p=new Date(i,n,e);return p>=c&&p<=h?this.gPalette.colorOf(t):null}};var pe=class{buildGantt(t,e,r,a,i=!0,n=!1){let o=document.createElement("div");o.className="gantt-view";let l=document.createElement("div");l.className="gantt-month-year",l.textContent=e,o.appendChild(l);let s=document.createElement("div");if(s.className="gantt-container",s.innerHTML=r,o.appendChild(s),i){let c=document.createElement("div");c.className="gantt-legend",Object.entries(a).forEach(([h,p])=>{let g=document.createElement("div");g.className="gantt-legend-item";let u=document.createElement("span");u.className="gantt-legend-color",u.style.background=p,g.appendChild(u);let m=document.createElement("span");m.textContent=h,g.appendChild(m),c.appendChild(g)}),o.appendChild(c)}return t.appendChild(o),o}colorize(t,e){document.querySelectorAll(".gantt-table td[data-note]").forEach(r=>{let a=r.dataset.note,i=Number(r.dataset.day),n=t(a,i);n?(r.style.setProperty("--gantt-color",n),r.classList.add("is-filled")):(r.classList.remove("is-filled"),r.style.removeProperty("--gantt-color"));let o=e(a,i);o&&r.classList.add(`gantt-${o}`)})}highlightToday(){let t=new Date().getDate();document.querySelectorAll(`.gantt-table td[data-day='${t}']`).forEach(e=>e.classList.add("is-today"))}};var me=class{constructor(t){this.app=t;this.ui=new pe;this._rendering=!1}async renderView(t,e={},r,a){var i,n,o,l,s,c,h;if(!this._rendering){this._rendering=!0;try{(i=e.renderInteractiveBelow)!=null||(e.renderInteractiveBelow=!0),(n=e.showLegend)!=null||(e.showLegend=!0),(o=e.forceInteractiveBelow)!=null||(e.forceInteractiveBelow=!1),e.forceInteractiveBelow&&(e.renderInteractiveBelow=!0);let p=(l=t.current)==null?void 0:l.call(t);if((!p||!p.file)&&(r!=null&&r.sourcePath)&&(p=t.page(r.sourcePath)),!(p!=null&&p.file)){console.warn("[Gantt] current page not found \u2013 abort");return}let g=t.current;t.current=()=>p;let u=new he(this.app,t,e,r),m=u.compute(),b;a?b=a:b=t.container;let H=`${new Intl.DateTimeFormat("en",{month:"long"}).format(new Date(m.year,m.month,1))} ${m.year}`,C=this.ui.buildGantt(b,H,this.buildTableHTML(m),m.legend,(s=e.showLegend)!=null?s:!0,e.renderInteractiveBelow);if(this.ui.colorize((L,M)=>u.colorFor(L,M,m),(L,M)=>{let{startField:we,endField:ke,pages:Ee,year:W,month:J}=m,F=Ee.find(xe=>{var V;return(xe.title||((V=xe.file)==null?void 0:V.name))===L});if(!F)return null;let $=t.date(F[we]),R=t.date(F[ke]);return $&&$.year===W&&$.month-1===J&&$.day===M?"start":R&&R.year===W&&R.month-1===J&&R.day===M?"end":null}),this.ui.highlightToday(),e.renderInteractiveBelow){let L=(c=window.coverTable)==null?void 0:c.engine;if(L){let M=C.createDiv({cls:"ct-it-mount"});r&&await L.renderAutoView(t,(h=e.interactiveOptions)!=null?h:{},r,M)}}if(e.debugLegend){let L=C.createEl("pre",{cls:"gantt-debug"});L.innerText=JSON.stringify(m.legend,null,2)}t.current=g}finally{this._rendering=!1}}}buildTableHTML(t){let{pages:e,daysInMonth:r}=t,i=`<thead><tr><th class="gantt-corner-col"></th>${Array.from({length:r},(o,l)=>`<th class="gantt-day-col">${String(l+1).padStart(2,"0")}</th>`).join("")}</tr></thead>`,n="<tbody>";return e.forEach(o=>{var s;let l=o.title||((s=o.file)==null?void 0:s.name)||"Untitled";n+=`<tr><td class="gantt-note-col">${l}</td>`;for(let c=1;c<=r;c++)n+=`<td class="gantt-cell" data-note="${l}" data-day="${c}"></td>`;n+="</tr>"}),n+="</tbody>",`<table class="gantt-table">${i}${n}</table>`}};var fe=class{constructor(t){this.plugin=t;this.cnt=[0,0,0,0,0,0];this.lastPath=null;this.styleInjected=!1;this.HIDE_ID="ct-hn-hide"}register(){this.injectBaseStyleOnce(),this.injectHideStyle(),this.plugin.registerMarkdownPostProcessor((t,e)=>{e.sourcePath!==this.lastPath&&(this.cnt.fill(0),this.lastPath=e.sourcePath),t.querySelectorAll("h1,h2,h3,h4,h5,h6").forEach(r=>this.decorate(r))},100),this.plugin.registerEvent(this.plugin.app.workspace.on("file-open",()=>{this.cnt.fill(0),this.lastPath=null})),this.plugin.registerEvent(this.plugin.app.workspace.on("css-change",()=>this.injectHideStyle()))}decorate(t){let e=Number(t.tagName[1]);if(!e)return;for(let i=e;i<6;i++)this.cnt[i]=0;this.cnt[e-1]++;let r=this.cnt.slice(0,e).join(".")+" ",a=t.querySelector(".ct-hn-label");a||(a=document.createElement("span"),a.className="ct-hn-label",t.prepend(a)),a.textContent=r}injectBaseStyleOnce(){if(this.styleInjected)return;this.styleInjected=!0;let t=`
      /* HeaderNumbering \u2013 \uAE30\uC874 CSS counter \uC81C\uAC70 */
      .markdown-preview-view h1::before,
      .markdown-preview-view h2::before,
      .markdown-preview-view h3::before,
      .markdown-preview-view h4::before,
      .markdown-preview-view h5::before,
      .markdown-preview-view h6::before{ content:none!important; }

      /* \uC0C8 \uB77C\uBCA8(span) \uACF5\uD1B5 \uC2A4\uD0C0\uC77C */
      .ct-hn-label{ font-weight:bold; margin-right:.3em; }
    `,e=document.createElement("style");e.id="ct-hn-style",e.textContent=t,document.head.appendChild(e)}injectHideStyle(){var r,a;let t=(a=(r=this.plugin.settings)==null?void 0:r.enableHeaderNumbering)!=null?a:!0,e=document.getElementById(this.HIDE_ID);t?e==null||e.remove():(e||(e=document.createElement("style"),e.id=this.HIDE_ID,document.head.appendChild(e)),e.textContent=".ct-hn-label{ display:none!important; }")}destroy(){this.cnt.fill(0),this.lastPath=null}};var ge=require("@codemirror/view"),Ie=require("@codemirror/state");function rt(d){let t=Object.keys(d).join("");if(!t)return[];let e=new RegExp(`^\\s*(?:[-*+]|\\d+[.)])\\s+([${t}])\\s+`),r=a=>{let i=new Ie.RangeSetBuilder,n=a.state.doc.length;for(let{from:o,to:l}of a.visibleRanges){let s=o;for(;s<=l&&s<n;){let c=a.state.doc.lineAt(s),h=e.exec(c.text);if(h){let p=h[1];i.add(c.from,c.from,ge.Decoration.line({attributes:{class:"lc-cm6-row","data-callout-char":p}}))}if(c.to<=s)break;s=c.to+1}}return i.finish()};return ge.ViewPlugin.fromClass(class{constructor(a){this.decorations=r(a)}update(a){(a.docChanged||a.viewportChanged)&&(this.decorations=r(a.view))}},{decorations:a=>a.decorations})}var ue=class{constructor(t){this.plugin=t;this.styleEl=null;this.cmExt=[];this.cmDispose=null;this.map={};this.rebuild()}rebuild(){var t;this.map={},((t=this.plugin.settings.listCallouts)!=null?t:[]).forEach(e=>this.map[e.char]=e),this.injectCss(),this.cmDispose&&(this.cmDispose(),this.cmDispose=null),this.cmExt=rt(this.map),this.cmExt.length&&this.plugin.registerEditorExtension(this.cmExt)}editorExtensions(){return this.cmExt}postProcessor(){return t=>{Object.keys(this.map).length&&t.querySelectorAll("li").forEach(e=>{var o;let r=((o=e.textContent)==null?void 0:o.trim())||"",a=r.charAt(0);if(!this.map[a])return;e.empty();let n=document.createElement("span");n.className="lc-pill",n.textContent=r.slice(1).trim(),e.appendChild(n),e.classList.add("lc-list-callout"),e.setAttribute("data-callout-char",a)})}}injectCss(){this.styleEl||(this.styleEl=document.createElement("style"),this.styleEl.id="ct-lc-style",document.head.appendChild(this.styleEl));let t=".lc-pill{display:block;width:100%;padding:6px 10px;border-radius:6px;font-weight:600}";t+=`
    li.lc-list-callout{
      list-style-type:none!important;
      list-style-position:inside!important;
      margin-inline-start:0!important;
      padding-inline-start:0!important;
      text-indent:0!important;
    }
    li.lc-list-callout::marker{content:""!important;font-size:0!important;}
  `;for(let e in this.map){let r=this.map[e];t+=`
    .theme-light li[data-callout-char='${e}'] .lc-pill{
      background:${r.bgLight}!important;color:${r.fgLight}!important;
    }
    .theme-dark  li[data-callout-char='${e}'] .lc-pill{
      background:${r.bgDark}!important;color:${r.fgDark}!important;
    }`}this.styleEl.textContent=t}};var ve=class{constructor(t,e){this.app=t;this.getCfg=e;this.offDrop=null;this.offPaste=null}enable(){if(this.disable(),!this.getCfg().enableEmbedNoPreview)return;let t=(e,r,a)=>{var s,c;let i=e instanceof DragEvent?(s=e.dataTransfer)==null?void 0:s.files:(c=e.clipboardData)==null?void 0:c.files;if(!(i!=null&&i.length))return;let n=this.getCfg().nonPreviewExtensions.map(h=>h.toLowerCase()),o=!1;for(let h of Array.from(i)){let p=h.name.includes(".")?h.name.slice(h.name.lastIndexOf(".")).toLowerCase():"";if(p&&n.includes(p)){o=!0;break}}if(!o)return;e.preventDefault(),e.stopPropagation();let l="";for(let h of Array.from(i)){let p=h.name.includes(".")?h.name.slice(h.name.lastIndexOf(".")).toLowerCase():"";l+=p&&n.includes(p)?`[[${h.name}]]
`:`![[${h.name}]]
`}l.endsWith(`
`)&&(l=l.slice(0,-1)),r.replaceSelection(l)};this.offDrop=this.app.workspace.on("editor-drop",t),this.offPaste=this.app.workspace.on("editor-paste",t)}disable(){this.offDrop&&this.app.workspace.offref(this.offDrop),this.offPaste&&this.app.workspace.offref(this.offPaste),this.offDrop=this.offPaste=null}reload(){this.enable()}destroy(){this.disable()}};var Ae={enableEmbedNoPreview:!0,nonPreviewExtensions:[".pdf",".exe",".zip",".rar"]},be=class{constructor(t,e){this.override=new ve(t.app,e)}enable(){this.override.enable()}reload(){this.override.reload()}disable(){this.override.disable()}destroy(){this.override.destroy()}};var He=`/*****************************************************************\r
 *  Cover-Table  \u2013  Global Color \xB7 Style Tokens  (\uCD5C\uC885 \uD1B5\uD569\uD310)\r
 *  \xB7 \uAE30\uC874 \uAE30\uB2A5 \u201C\uBAA8\uB450\u201D \uBCF4\uC874  \xB7 \uC694\uC57D/\uD568\uCD95/\uC0AD\uC81C \uC5C6\uC74C\r
 *  \xB7 \uD14C\uC774\uBE14\xB7\uC774\uBBF8\uC9C0 \uC0C9\uC0C1\uC740 \uB2E8\uC77C \uD1A0\uD070 + \uB2E4\uD06C/\uB77C\uC774\uD2B8 \uC790\uB3D9 \uC624\uBC84\uB77C\uC774\uB4DC\r
 *  \xB7 \uD5E4\uB529\uC740 \uBB34\uC9C0\uAC1C 6\uC0C9(\uD1A0\uD070)\uC73C\uB85C \uC9C1\uAD00\uC801 \uAD6C\uBD84\r
 *****************************************************************/\r
:root{\r
  /* \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 \uBCA0\uC774\uC2A4 / \uACF5\uD1B5 \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 */\r
  --ct-base-white        : #ffffff;\r
  --ct-base-black        : #000000;\r
\r
  /* \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 \uD0D0\uC0C9\uAE30 \uD3F4\uB354 \uC0C9\uC0C1 \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 */\r
  /* 0 \uB2E8\uACC4(\uCD5C\uC0C1\uC704) */\r
  --ct-folder-lvl0-01-dark  : #91dcff;   --ct-folder-lvl0-01-light  : #0076ad;\r
  --ct-folder-lvl0-25-dark  : #fffcab;   --ct-folder-lvl0-25-light  : #989300;\r
  --ct-folder-lvl0-68-dark  : #ffb3ab;   --ct-folder-lvl0-68-light  : #9b1000;\r
  /* 1 \uB2E8\uACC4(\uB0B4\uBD80) */\r
  --ct-folder-lvl1-01-dark  : #2ebdff;   --ct-folder-lvl1-01-light  : #003d5a;\r
  --ct-folder-lvl1-25-dark  : #ffdf3e;   --ct-folder-lvl1-25-light  : #453a01;\r
  --ct-folder-lvl1-68-dark  : #ff7e4f;   --ct-folder-lvl1-68-light  : #461300;\r
  /* \u2018Q)\u2019 \uD3F4\uB354\uB178\uD2B8 */\r
  --ct-folder-q-dark        : #848484;   --ct-folder-q-light        : #848484;\r
\r
  /* \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 \uBCF8\uBB38 \uD14D\uC2A4\uD2B8 \uC2A4\uD0C0\uC77C \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 */\r
  --ct-bold-dark            : rgb(255,188,188);\r
  --ct-bold-light           : rgb(138,0,119);\r
\r
  /* \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 \uD5E4\uB529(\uBB34\uC9C0\uAC1C \uD1A0\uD070: \uC77D\uAE30+\uD3B8\uC9D1 \uACF5\uD1B5) \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 */\r
  --ct-h1-dark : #ff5555;  --ct-h1-light : #ff5555;   /* red    */\r
  --ct-h2-dark : #ffae42;  --ct-h2-light : #ffae42;   /* orange */\r
  --ct-h3-dark : #f7ff50;  --ct-h3-light : #f7ff50;   /* yellow */\r
  --ct-h4-dark : #4cd964;  --ct-h4-light : #4cd964;   /* green  */\r
  --ct-h5-dark : #5ac8fa;  --ct-h5-light : #5ac8fa;   /* blue   */\r
  --ct-h6-dark : #af52de;  --ct-h6-light : #af52de;   /* violet */\r
\r
  /* \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 \uB9AC\uC2A4\uD2B8 \uBD88\uB9BF/\uBC88\uD638 \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 */\r
  --ct-bullet-dark          : rgb(89,89,223);\r
  --ct-bullet-light         : rgb(54,54,190);\r
  --ct-ol-marker-dark       : red;\r
  --ct-ol-marker-light      : red;\r
\r
  /* \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 \uD14C\uC774\uBE14(\uB2E8\uC77C \uD1A0\uD070) \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 */\r
  --ct-table-border         : #c0c0c0;         /* light \uAE30\uBCF8, dark \uBAA8\uB4DC\uC5D0\uC11C \uC7AC\uC815\uC758 */\r
  --ct-table-shadow         : rgba(0,0,0,.10);\r
  --ct-table-row-even       : rgba(0,0,0,.03);\r
  --ct-table-row-hover      : rgba(0,0,0,.07);\r
\r
  /* \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 \uC774\uBBF8\uC9C0(\uB2E8\uC77C \uD1A0\uD070) \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 */\r
  --ct-image-border         : #d0d0d0;\r
  --ct-image-shadow         : rgba(0,0,0,.10);\r
}\r
\r
/* \uB2E4\uD06C \uBAA8\uB4DC \uC624\uBC84\uB77C\uC774\uB4DC \u2013 \uC790\uB3D9 \uC0C9\uC0C1 \uC804\uD658 */\r
.theme-dark:root{\r
  --bullet-new-color        : var(--ct-bullet-dark);\r
  --image-border            : #555555;\r
  --image-shadow            : rgba(0,0,0,.60);\r
\r
  /* \uD14C\uC774\uBE14 \uD1A0\uD070(\uD22C\uBA85\xB7\uBC30\uACBD\uACC4\uC5F4) */\r
  --ct-table-border         : #444444;\r
  --ct-table-shadow         : rgba(0,0,0,.55);\r
  --ct-table-row-even       : transparent;\r
  --ct-table-row-hover      : rgba(255,255,255,.07);\r
}\r
\r
/* \uB77C\uC774\uD2B8 \uBAA8\uB4DC \uC624\uBC84\uB77C\uC774\uB4DC \u2013 \uC790\uB3D9 \uC0C9\uC0C1 \uC804\uD658 */\r
.theme-light:root{\r
  --bullet-new-color        : var(--ct-bullet-light);\r
  --image-border            : #d0d0d0;\r
  --image-shadow            : rgba(0,0,0,.10);\r
\r
  --ct-table-border         : #c0c0c0;\r
  --ct-table-shadow         : rgba(0,0,0,.10);\r
  --ct-table-row-even       : rgba(0,0,0,.03);\r
  --ct-table-row-hover      : rgba(0,0,0,.07);\r
}\r
\r
/*****************************************************************\r
 *  \uACF5\uD1B5 \uD0C0\uC774\uD3EC\uADF8\uB798\uD53C / \uB808\uC774\uC544\uC6C3\r
 *****************************************************************/\r
p               { text-indent:25px; margin:5px 0!important; text-align:justify; }\r
li              { margin-block:5px; }\r
.hr.cm-line     { text-indent:0!important; }\r
.cm-line        { font-size:1em!important; text-align:justify; text-indent:25px; line-height:1.5em; }\r
.cm-s-obsidian .cm-line.HyperMD-header { padding:0!important; text-indent:0; }\r
.HyperMD-list-line.HyperMD-list-line-1.cm-line { text-indent:-50px!important; padding-inline-start:40px!important; }\r
\r
/*****************************************************************\r
 *  \uD0D0\uC0C9\uAE30 \uD3F4\uB354 \uC0C9\uC0C1 (\uBAA8\uB4E0 \uB2E8\uACC4\xB7\uBAA8\uB4DC \uBCF4\uC874)\r
 *****************************************************************/\r
\r
/* \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r
   0 \uB2E8\uACC4(\uCD5C\uC0C1\uC704)  \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500*/\r
/* DARK */\r
.theme-dark .nav-files-container .tree-item.nav-folder> .tree-item-self[data-path^="0_"],\r
.theme-dark .nav-files-container .tree-item.nav-folder> .tree-item-self[data-path^="1_"]{\r
  color:var(--ct-folder-lvl0-01-dark)!important;\r
}\r
.theme-dark .nav-files-container .tree-item.nav-folder> .tree-item-self[data-path^="2_"],\r
.theme-dark .nav-files-container .tree-item.nav-folder> .tree-item-self[data-path^="3_"],\r
.theme-dark .nav-files-container .tree-item.nav-folder> .tree-item-self[data-path^="4_"],\r
.theme-dark .nav-files-container .tree-item.nav-folder> .tree-item-self[data-path^="5_"]{\r
  color:var(--ct-folder-lvl0-25-dark)!important;\r
}\r
.theme-dark .nav-files-container .tree-item.nav-folder> .tree-item-self[data-path^="6_"],\r
.theme-dark .nav-files-container .tree-item.nav-folder> .tree-item-self[data-path^="7_"],\r
.theme-dark .nav-files-container .tree-item.nav-folder> .tree-item-self[data-path^="8_"]{\r
  color:var(--ct-folder-lvl0-68-dark)!important;\r
}\r
\r
/* LIGHT */\r
.theme-light .nav-files-container .tree-item.nav-folder> .tree-item-self[data-path^="0_"],\r
.theme-light .nav-files-container .tree-item.nav-folder> .tree-item-self[data-path^="1_"]{\r
  color:var(--ct-folder-lvl0-01-light)!important;\r
}\r
.theme-light .nav-files-container .tree-item.nav-folder> .tree-item-self[data-path^="2_"],\r
.theme-light .nav-files-container .tree-item.nav-folder> .tree-item-self[data-path^="3_"],\r
.theme-light .nav-files-container .tree-item.nav-folder> .tree-item-self[data-path^="4_"],\r
.theme-light .nav-files-container .tree-item.nav-folder> .tree-item-self[data-path^="5_"]{\r
  color:var(--ct-folder-lvl0-25-light)!important;\r
}\r
.theme-light .nav-files-container .tree-item.nav-folder> .tree-item-self[data-path^="6_"],\r
.theme-light .nav-files-container .tree-item.nav-folder> .tree-item-self[data-path^="7_"],\r
.theme-light .nav-files-container .tree-item.nav-folder> .tree-item-self[data-path^="8_"]{\r
  color:var(--ct-folder-lvl0-68-light)!important;\r
}\r
\r
/* \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r
   1 \uB2E8\uACC4(\uB0B4\uBD80)  \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500*/\r
/* DARK */\r
.theme-dark .nav-files-container .tree-item.nav-folder .tree-item-children .tree-item.nav-folder> .tree-item-self[data-path^="0_"],\r
.theme-dark .nav-files-container .tree-item.nav-folder .tree-item-children .tree-item.nav-folder> .tree-item-self[data-path^="1_"]{\r
  color:var(--ct-folder-lvl1-01-dark)!important;\r
}\r
.theme-dark .nav-files-container .tree-item.nav-folder .tree-item-children .tree-item.nav-folder> .tree-item-self[data-path^="2_"],\r
.theme-dark .nav-files-container .tree-item.nav-folder .tree-item-children .tree-item.nav-folder> .tree-item-self[data-path^="3_"],\r
.theme-dark .nav-files-container .tree-item.nav-folder .tree-item-children .tree-item.nav-folder> .tree-item-self[data-path^="4_"],\r
.theme-dark .nav-files-container .tree-item.nav-folder .tree-item-children .tree-item.nav-folder> .tree-item-self[data-path^="5_"]{\r
  color:var(--ct-folder-lvl1-25-dark)!important;\r
}\r
.theme-dark .nav-files-container .tree-item.nav-folder .tree-item-children .tree-item.nav-folder> .tree-item-self[data-path^="6_"],\r
.theme-dark .nav-files-container .tree-item.nav-folder .tree-item-children .tree-item.nav-folder> .tree-item-self[data-path^="7_"],\r
.theme-dark .nav-files-container .tree-item.nav-folder .tree-item-children .tree-item.nav-folder> .tree-item-self[data-path^="8_"]{\r
  color:var(--ct-folder-lvl1-68-dark)!important;\r
}\r
\r
/* LIGHT */\r
.theme-light .nav-files-container .tree-item.nav-folder .tree-item-children .tree-item.nav-folder> .tree-item-self[data-path^="0_"],\r
.theme-light .nav-files-container .tree-item.nav-folder .tree-item-children .tree-item.nav-folder> .tree-item-self[data-path^="1_"]{\r
  color:var(--ct-folder-lvl1-01-light)!important;\r
}\r
.theme-light .nav-files-container .tree-item.nav-folder .tree-item-children .tree-item.nav-folder> .tree-item-self[data-path^="2_"],\r
.theme-light .nav-files-container .tree-item.nav-folder .tree-item-children .tree-item.nav-folder> .tree-item-self[data-path^="3_"],\r
.theme-light .nav-files-container .tree-item.nav-folder .tree-item-children .tree-item.nav-folder> .tree-item-self[data-path^="4_"],\r
.theme-light .nav-files-container .tree-item.nav-folder .tree-item-children .tree-item.nav-folder> .tree-item-self[data-path^="5_"]{\r
  color:var(--ct-folder-lvl1-25-light)!important;\r
}\r
.theme-light .nav-files-container .tree-item.nav-folder .tree-item-children .tree-item.nav-folder> .tree-item-self[data-path^="6_"],\r
.theme-light .nav-files-container .tree-item.nav-folder .tree-item-children .tree-item.nav-folder> .tree-item-self[data-path^="7_"],\r
.theme-light .nav-files-container .tree-item.nav-folder .tree-item-children .tree-item.nav-folder> .tree-item-self[data-path^="8_"]{\r
  color:var(--ct-folder-lvl1-68-light)!important;\r
}\r
\r
/* \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r
   \u2018Q)\u2019 \uD3F4\uB354\uB178\uD2B8 \uC0C9\uC0C1  \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500*/\r
/* DARK */\r
.theme-dark .nav-files-container .tree-item.nav-folder .tree-item-children .tree-item-self.is-clickable.mod-collapsible.has-folder-note[data-path*="Q)"]{\r
  color:var(--ct-folder-q-dark)!important;\r
}\r
/* LIGHT */\r
.theme-light .nav-files-container .tree-item.nav-folder .tree-item-children .tree-item-self.is-clickable.mod-collapsible.has-folder-note[data-path*="Q)"]{\r
  color:var(--ct-folder-q-light)!important;\r
}\r
\r
\r
/*****************************************************************\r
 *  \uBCFC\uB4DC \uCEEC\uB7EC (\uAE30\uC874 \uAE30\uB2A5 \uC720\uC9C0)\r
 *****************************************************************/\r
.theme-dark .markdown-preview-view strong,\r
.theme-dark .markdown-preview-view b,\r
.theme-dark .markdown-source-view.mod-cm6 .cm-content strong,\r
.theme-dark .markdown-source-view.mod-cm6 .cm-content b,\r
.theme-dark .markdown-source-view.mod-cm6 .cm-content .cm-strong{\r
  font-weight:normal!important; color:var(--ct-bold-dark)!important;\r
}\r
.theme-light .markdown-preview-view strong,\r
.theme-light .markdown-preview-view b,\r
.theme-light .markdown-source-view.mod-cm6 .cm-content strong,\r
.theme-light .markdown-source-view.mod-cm6 .cm-content b,\r
.theme-light .markdown-source-view.mod-cm6 .cm-content .cm-strong{\r
  font-weight:normal!important; color:var(--ct-bold-light)!important;\r
}\r
\r
/*****************************************************************\r
 *  \uD5E4\uB529 \u2013 \uBB34\uC9C0\uAC1C + \uBC11\uC904 100% + \uC544\uC774\uCF58 \uC6B0\uCE21\r
 *****************************************************************/\r
.markdown-preview-view h1,\r
.markdown-preview-view h2,\r
.markdown-preview-view h3,\r
.markdown-preview-view h4,\r
.markdown-preview-view h5,\r
.markdown-preview-view h6{\r
  display:flex!important; align-items:center; width:100%!important;\r
  font-size:1.5em; line-height:1em; margin:5px 0!important; border-bottom-style:outset;\r
}\r
.markdown-preview-view h1{color:var(--ct-h1-dark); border-bottom-color:var(--ct-h1-dark);}\r
.markdown-preview-view h2{color:var(--ct-h2-dark); border-bottom-color:var(--ct-h2-dark);}\r
.markdown-preview-view h3{color:var(--ct-h3-dark); border-bottom-color:var(--ct-h3-dark);}\r
.markdown-preview-view h4{color:var(--ct-h4-dark); border-bottom-color:var(--ct-h4-dark);}\r
.markdown-preview-view h5{color:var(--ct-h5-dark); border-bottom-color:var(--ct-h5-dark);}\r
.markdown-preview-view h6{color:var(--ct-h6-dark); border-bottom-color:var(--ct-h6-dark);}\r
.theme-light .markdown-preview-view h1{color:var(--ct-h1-light); border-bottom-color:var(--ct-h1-light);}\r
.theme-light .markdown-preview-view h2{color:var(--ct-h2-light); border-bottom-color:var(--ct-h2-light);}\r
.theme-light .markdown-preview-view h3{color:var(--ct-h3-light); border-bottom-color:var(--ct-h3-light);}\r
.theme-light .markdown-preview-view h4{color:var(--ct-h4-light); border-bottom-color:var(--ct-h4-light);}\r
.theme-light .markdown-preview-view h5{color:var(--ct-h5-light); border-bottom-color:var(--ct-h5-light);}\r
.theme-light .markdown-preview-view h6{color:var(--ct-h6-light); border-bottom-color:var(--ct-h6-light);}\r
.markdown-preview-view h1 .collapse-indicator,\r
.markdown-preview-view h2 .collapse-indicator,\r
.markdown-preview-view h3 .collapse-indicator,\r
.markdown-preview-view h4 .collapse-indicator,\r
.markdown-preview-view h5 .collapse-indicator,\r
.markdown-preview-view h6 .collapse-indicator{margin-left:auto;}\r
\r
.cm-header-1{font-size:1.5em!important;line-height:2em;color:var(--ct-h1-dark);border-bottom:outset 1px var(--ct-h1-dark);}\r
.cm-header-2{font-size:1.5em!important;line-height:2em;color:var(--ct-h2-dark);border-bottom:outset 1px var(--ct-h2-dark);}\r
.cm-header-3{font-size:1.5em!important;line-height:2em;color:var(--ct-h3-dark);border-bottom:outset 1px var(--ct-h3-dark);}\r
.cm-header-4{font-size:1.5em!important;line-height:2em;color:var(--ct-h4-dark);border-bottom:outset 1px var(--ct-h4-dark);}\r
.cm-header-5{font-size:1.5em!important;line-height:2em;color:var(--ct-h5-dark);border-bottom:outset 1px var(--ct-h5-dark);}\r
.cm-header-6{font-size:1.5em!important;line-height:2em;color:var(--ct-h6-dark);border-bottom:outset 1px var(--ct-h6-dark);}\r
.theme-light .cm-header-1{color:var(--ct-h1-light);border-bottom-color:var(--ct-h1-light);}\r
.theme-light .cm-header-2{color:var(--ct-h2-light);border-bottom-color:var(--ct-h2-light);}\r
.theme-light .cm-header-3{color:var(--ct-h3-light);border-bottom-color:var(--ct-h3-light);}\r
.theme-light .cm-header-4{color:var(--ct-h4-light);border-bottom-color:var(--ct-h4-light);}\r
.theme-light .cm-header-5{color:var(--ct-h5-light);border-bottom-color:var(--ct-h5-light);}\r
.theme-light .cm-header-6{color:var(--ct-h6-light);border-bottom-color:var(--ct-h6-light);}\r
\r
/*****************************************************************\r
 *  \uB9AC\uC2A4\uD2B8 \uB9C8\uCEE4 (\uAE30\uB2A5 \uC644\uC804 \uBCF4\uC874)\r
 *****************************************************************/\r
.list-number, ol>li::marker, ul>li::marker{color:var(--ct-ol-marker-dark);}\r
.theme-light .list-number, .theme-light ol>li::marker, .theme-light ul>li::marker{color:var(--ct-ol-marker-light);}\r
.markdown-reading-view ul>li>.list-bullet:after,\r
.markdown-source-view.mod-cm6 .HyperMD-list-line-1 .list-bullet:after{height:5px;width:5px;border-radius:50%;background:var(--bullet-new-color);}\r
.markdown-reading-view ul>li>ul>li>.list-bullet:after,\r
.markdown-source-view.mod-cm6 .HyperMD-list-line-2 .list-bullet:after{height:1px;width:7px;border-radius:0;background:var(--bullet-new-color);}\r
.markdown-reading-view ul>li>ul>li>ul>li>.list-bullet:after,\r
.markdown-source-view.mod-cm6 .HyperMD-list-line-3 .list-bullet:after{height:4px;width:4px;background:transparent;border:1px solid var(--bullet-new-color);border-radius:50%;}\r
.markdown-reading-view ul>li>ul>li>ul>li>ul>li>.list-bullet:after,\r
.markdown-source-view.mod-cm6 .HyperMD-list-line-4 .list-bullet:after{height:5px;width:5px;border-radius:0;background:var(--bullet-new-color);}\r
.markdown-reading-view ul>li>ul>li>ul>li>ul>li>ul>li>.list-bullet:after,\r
.markdown-source-view.mod-cm6 .HyperMD-list-line-5 .list-bullet:after{height:1px;width:7px;border-radius:0;background:var(--bullet-new-color);}\r
.markdown-reading-view ul>li>ul>li>ul>li>ul>li>ul>li>ul>li>.list-bullet:after,\r
.markdown-source-view.mod-cm6 .HyperMD-list-line-6 .list-bullet:after{height:4px;width:4px;background:transparent;border:1px solid var(--bullet-new-color);}\r
.markdown-reading-view ul>li>ul>li>ul>li>ul>li>ul>li>ul>li>ul>li>.list-bullet:after,\r
.markdown-source-view.mod-cm6 .HyperMD-list-line-7 .list-bullet:after{height:2px;width:2px;border-radius:50%;background:var(--bullet-new-color);}\r
\r
/*****************************************************************\r
 *  UI \uAC00\uB3C5\uC131 \u2013 \uACF5\uD1B5 \uC544\uC774\uCF58 \uC228\uAE40 (\uAE30\uC874 \uC720\uC9C0)\r
 *****************************************************************/\r
.nav-files-container .tree-item.nav-folder .tree-item-children .tree-item.nav-folder>.tree-item-self .collapse-icon,\r
.tree-item-self.nav-folder-title.has-folder-note::before{display:none!important;}\r
\r
/*****************************************************************\r
 *  \uD14C\uC774\uBE14 \uC2A4\uD0C0\uC77C \u2013 \uB2E8\uC77C \uD1A0\uD070 \uAE30\uBC18 / \uBAA8\uB4DC\uBCC4 \uC790\uB3D9\r
 *****************************************************************/\r
.el-table table{\r
  width:100%!important; border-collapse:collapse;border-spacing:0;\r
  border-top:2.27px solid var(--ct-table-border);\r
  border-bottom:2.27px solid var(--ct-table-border);\r
  box-shadow:0 0 20px var(--ct-table-shadow);\r
}\r
.el-table th,.el-table td{border:none;padding:.51rem;line-height:1.1;}\r
.el-table table>tbody>tr:first-child>th,\r
.el-table table>tbody>tr:first-child>td{border-top:1.36px solid var(--ct-table-border);}\r
.el-table table>tbody>tr:last-child>th,\r
.el-table table>tbody>tr:last-child>td{border-bottom:1.36px solid var(--ct-table-border);}\r
.el-table thead th{\r
  font-weight:700;padding:8px 9px 5px;\r
  background:var(--ct-base-white)!important;color:var(--ct-base-black);\r
}\r
.theme-dark .el-table thead th{\r
  background:var(--background-primary)!important;color:var(--ct-base-white);\r
}\r
.el-table tbody tr:nth-child(even){background:var(--ct-table-row-even);}\r
.el-table tbody tr:hover td   {background:var(--ct-table-row-hover);}\r
.theme-dark .el-table td      {color:var(--ct-base-white);}  /* \uD14D\uC2A4\uD2B8 \uD770\uC0C9 */\r
\r
/*****************************************************************\r
 *  \uC774\uBBF8\uC9C0(Embeds) & \uB9AC\uC2A4\uD2B8 \uB0B4 \uC774\uBBF8\uC9C0 \uBCF4\uD638\r
 *****************************************************************/\r
.el-p.el-embed-image img,\r
li .el-p.el-embed-image img,\r
ul li img,ol li img,\r
.tab-content img,.tabs img{\r
  display:block;width:700px;max-width:100%;height:auto;margin:1rem auto;\r
  border:1px solid var(--ct-image-border);\r
  box-shadow:0 4px 10px var(--ct-image-shadow);\r
  border-radius:4px;\r
}\r
li img{display:block;max-width:100%;height:auto;margin:.5rem auto;}\r
\r
/*****************************************************************\r
 *  \uBA54\uD0C0\uB370\uC774\uD130 \uD328\uB110 \uC228\uAE40(.hide_properties) \u2013 \uC6D0\uBCF8 \uC720\uC9C0\r
 *****************************************************************/\r
.hide_properties .metadata-container,\r
.hide_properties .metadata-properties,\r
.hide_properties .metadata-property,\r
.hide_properties .metadata-collapse-indicator,\r
.hide_properties .frontmatter-container,\r
.hide_properties .frontmatter{display:none!important;}\r
\r
/* \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r
   \uD5E4\uB354 \uB0B4\uBD80:  \uBC88\uD638 \u2192 \uD14D\uC2A4\uD2B8 \u2192 \uC811\uAE30\uC544\uC774\uCF58(\uC6B0\uCE21)  +  \uACB9\uCE68 \uD574\uC18C\r
   \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 */\r
\r
/* \u2460 \uD5E4\uB354 \uCEE8\uD14C\uC774\uB108\uB294 \uC774\uBBF8 flex; \uC815\uB82C\uB9CC \uD655\uC778 */\r
.markdown-preview-view h1,\r
.markdown-preview-view h2,\r
.markdown-preview-view h3,\r
.markdown-preview-view h4,\r
.markdown-preview-view h5,\r
.markdown-preview-view h6{\r
  display:flex!important;          /* \uD639\uC2DC inline-flex\uAC00 \uC544\uB2CC \uACBD\uC6B0 \uB300\uBE44 */\r
  align-items:center;\r
  width:100%!important;            /* \uBC11\uC904 100 % */\r
  margin:5px 0!important;\r
  border-bottom-style:outset;\r
}\r
/* \u2461 \uBC88\uD638(ct-hn-label) \u2013 \uB9E8 \uC55E */\r
.markdown-preview-view h1 .ct-hn-label,\r
.markdown-preview-view h2 .ct-hn-label,\r
.markdown-preview-view h3 .ct-hn-label,\r
.markdown-preview-view h4 .ct-hn-label,\r
.markdown-preview-view h5 .ct-hn-label,\r
.markdown-preview-view h6 .ct-hn-label{\r
  order:0;\r
  flex:0 0 auto;\r
  margin-right:.35em;\r
}\r
/* \u2462 \uC811\uAE30 \uC544\uC774\uCF58 \u2013 \uC808\uB300\u2192\uC815\uC801 + \uC6B0\uCE21 \uB05D */\r
.markdown-preview-view .heading-collapse-indicator.collapse-indicator{\r
  position:static!important;       /* \u2190 \uACB9\uCE68 \uC6D0\uC778 \uC81C\uAC70 */\r
  order:2;                         /* \uB9E8 \uB4A4 */\r
  flex:0 0 auto;\r
  margin-left:auto;                /* \uB0A8\uC740 \uACF5\uAC04 \uCC44\uC6B0\uACE0 \uC6B0\uCE21 \uC815\uB82C */\r
}\r
\r
\r
/* settings \uD0ED \uC548\uB0B4 \uBB38\uAD6C */\r
.ct-tip{\r
  font-size: 0.85em;\r
  margin: 0 0 0.5em 0;\r
  color: var(--text-muted);\r
}\r
`;var ye=class{constructor(t,e){this.root=document.documentElement;this.cfg=e,this.applyAll(),t.workspace.on("css-change",()=>this.applyAll())}applyAll(){let{tokens:t,customCss:e}=this.cfg(),r=document.body.classList.contains("theme-dark")?"dark":"light";Q(r,t!=null?t:Y),this.upsertStyle(ye.BASE,He),this.upsertStyle(ye.CUSTOM,e||"")}upsertStyle(t,e){let r=document.getElementById(t);!r&&e&&(r=Object.assign(document.createElement("style"),{id:t}),document.head.appendChild(r)),r&&(r.textContent=e)}},j=ye;j.BASE="ct-base-theme",j.CUSTOM="ct-custom-css";var Be;(Be=window.coverTable)!=null||(window.coverTable={});var T=window.coverTable,Oe;(Oe=T.waitForEngine)!=null||(T.waitForEngine=async(d=4e3)=>{let t=Date.now();for(;Date.now()-t<d;){if(T.engine)return T.engine;await new Promise(e=>setTimeout(e,40))}throw new Error("coverTable.waitForEngine \u2192 timeout")});var Ve="ct-hide-notes",it=`
/* Cover-Table \u2192 hide ALL notes */
body.${Ve} .nav-file{ display:none !important; }
`,Le=class extends D.Plugin{constructor(){super(...arguments);this.headerNumbering=null;this.explorerStyleEl=null}applyZeroFolderVisibility(){let e=Le.ZERO_FOLDER_STYLE_ID,r=document.getElementById(e);this.settings.hideZeroFolders?r||(r=document.createElement("style"),r.id=e,r.textContent=`
/* Cover-Table \u25BA hide 0_ folders */
.nav-file-title[data-path^="0_"],
.nav-folder-title[data-path^="0_"],
.nav-file-title[data-path*="/0_"],
.nav-folder-title[data-path*="/0_"]{ display:none!important; }`,document.head.appendChild(r)):r==null||r.remove()}applyExplorerHide(){this.explorerStyleEl||(this.explorerStyleEl=document.createElement("style"),this.explorerStyleEl.id="ct-hide-notes-style",this.explorerStyleEl.textContent=it,document.head.appendChild(this.explorerStyleEl)),document.body.classList.toggle(Ve,this.settings.hideAllNotes)}async onload(){console.log("[Cover-Table] \u25B6 onload");try{let e=this.app.vault.adapter instanceof Re.FileSystemAdapter?this.app.vault.adapter.getBasePath():"",r=this.manifest.dir||"",a=(0,$e.join)(e,r,"style.css"),i=(0,Ne.readFileSync)(a,"utf8"),n=document.createElement("style");n.id="ct-style-fallback",n.textContent=i,document.head.appendChild(n),this.register(()=>n.remove()),console.log("[Cover-Table] fallback style injected \u2714")}catch(e){console.error("[Cover-Table] fallback style inject FAIL",e)}this.tabManager=new ee(this.app),T.engine||(T.engine=new ce(this.app)),T.ganttController||(T.ganttController=new me(this.app)),T.obsidian={Notice:D.Notice,Modal:D.Modal,SuggestModal:D.SuggestModal},await this.loadSettings();try{let e=new X(this.app,this);this.addSettingTab(e),console.log("\u{1F197} CoverTableSettingTab \uB4F1\uB85D \uC644\uB8CC")}catch(e){console.error("\u274C SettingTab \uC0DD\uC131 \uC2E4\uD328:",e),new D.Notice("Cover-Table \uC124\uC815 UI \uB85C\uB4DC \uC2E4\uD328 \u2014 \uCF58\uC194(DevTools)\uC744 \uD655\uC778\uD558\uC138\uC694.")}this.applyZeroFolderVisibility(),this.applyExplorerHide(),this.embed=new be(this,()=>this.settings.embed),this.embed.enable(),this.listCallouts=new ue(this),this.registerEditorExtension(this.listCallouts.editorExtensions()),this.registerMarkdownPostProcessor(this.listCallouts.postProcessor(),1e4),this.reloadHeaderNumbering(),this.design=new j(this.app,()=>this.settings),this.registerMarkdownPostProcessor(async(e,r)=>{var n;let a=e.querySelectorAll("pre > code.language-ct, pre > code.language-cover-table");if(a.length===0)return;let i=window.dataviewApi||window.DataviewAPI||window.dvAPI;if(!i){console.warn("[Cover-Table] Dataview API not found");return}await T.waitForEngine();for(let o of Array.from(a))try{let l=JSON.parse(o.textContent||"{}"),s=o.parentElement;if(l.type==="gantt"){(n=l.renderInteractiveBelow)!=null||(l.renderInteractiveBelow=!0),await T.ganttController.renderView(i,l,r,s);continue}r&&await T.engine.renderAutoView(i,l,r,s)}catch(l){console.error("[Cover-Table] render error:",l)}}),console.log("[Cover-Table] \u25B6 onload done")}onunload(){console.log("[Cover-Table] \u25B6 onunload"),this.tabManager.destroy(),this.embed.destroy()}async loadSettings(){let e=await this.loadData();this.settings=Object.assign({},_e,e),this.settings.embed=Object.assign({},Ae,this.settings.embed)}async saveSettings(){await this.saveData(this.settings),this.applyZeroFolderVisibility(),this.applyExplorerHide(),this.embed.reload()}applyDesignSettings(){let e=this.app.getTheme()==="obsidian-dark"?"dark":"light",r=document.documentElement,a="ct-base-vars",i=document.getElementById(a);i||(i=document.createElement("style"),i.id=a,document.head.appendChild(i));let n=this.settings.baseVars,o=[],l=[];Object.entries(n).forEach(([h,p])=>{(h.endsWith("-dark")?l:o).push(`${h}:${p};`)}),i.textContent=`
      :root{${o.join("")}}
      .theme-dark{${l.join("")}}
    `;let s="ct-custom-css",c=document.getElementById(s);c||(c=document.createElement("style"),c.id=s,document.head.appendChild(c)),c.textContent=this.settings.customCss||""}reloadHeaderNumbering(){var e;if(this.headerNumbering=null,!this.settings.enableHeaderNumbering){if(!document.getElementById("ct-hn-hide")){let r=document.createElement("style");r.id="ct-hn-hide",r.textContent=".ct-hn-label{ display:none!important; }",document.head.appendChild(r)}return}(e=document.getElementById("ct-hn-hide"))==null||e.remove(),this.headerNumbering=new fe(this),this.headerNumbering.register()}rebuildListCallouts(){this.listCallouts&&this.listCallouts.rebuild()}},K=Le;K.ZERO_FOLDER_STYLE_ID="ct-hide-zero-folders";
