/*
 THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
 If you want to view the source, please visit:
 https://github.com/HammerfallGenesis/obsidian-cover-table-plugin
*/

"use strict";var De=Object.defineProperty;var it=Object.getOwnPropertyDescriptor;var ot=Object.getOwnPropertyNames;var lt=Object.prototype.hasOwnProperty;var st=(l,e)=>{for(var t in e)De(l,t,{get:e[t],enumerable:!0})},ct=(l,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let a of ot(e))!lt.call(l,a)&&a!==t&&De(l,a,{get:()=>e[a],enumerable:!(r=it(e,a))||r.enumerable});return l};var dt=l=>ct(De({},"__esModule",{value:!0}),l);var Pt={};st(Pt,{default:()=>te});module.exports=dt(Pt);var H=require("obsidian"),Ze=require("fs"),Xe=require("path"),et=require("obsidian");var Ue=()=>({base:{white:"#ffffff",black:"#000000"},heading:{h1:"#ff5555",h2:"#ffae42",h3:"#f7ff50",h4:"#4cd964",h5:"#5ac8fa",h6:"#af52de"},list:{bullet:"rgb(54,54,190)",olMarker:"red"},bold:{bold:"rgb(138,0,119)"},folder:{lvl0:{_01:"#0076ad",_25:"#989300",_68:"#9b1000"},lvl1:{_01:"#003d5a",_25:"#453a01",_68:"#461300"},q:"#848484"},table:{border:"#c0c0c0",shadow:"rgba(0,0,0,.10)",rowEven:"rgba(0,0,0,.03)",rowHover:"rgba(0,0,0,.07)"},image:{border:"#d0d0d0",shadow:"rgba(0,0,0,.10)"}}),Q={light:Ue(),dark:(()=>{let l=Ue();return l.list={bullet:"rgb(89,89,223)",olMarker:"red"},l.bold={bold:"rgb(255,188,188)"},l.table={border:"#444444",shadow:"rgba(0,0,0,.55)",rowEven:"transparent",rowHover:"rgba(255,255,255,.07)"},l.image={border:"#555555",shadow:"rgba(0,0,0,.60)"},l.folder.lvl0={_01:"#91dcff",_25:"#fffcab",_68:"#ffb3ab"},l.folder.lvl1={_01:"#2ebdff",_25:"#ffdf3e",_68:"#ff7e4f"},l})()},j={baseWhite:"--ct-base-white",baseBlack:"--ct-base-black",h1:"--ct-h1-dark",h2:"--ct-h2-dark",h3:"--ct-h3-dark",h4:"--ct-h4-dark",h5:"--ct-h5-dark",h6:"--ct-h6-dark",bullet:"--bullet-new-color",olMarker:"--ct-ol-marker-dark",bold:"--ct-bold",lvl0_01:"--ct-folder-lvl0-01-dark",lvl0_25:"--ct-folder-lvl0-25-dark",lvl0_68:"--ct-folder-lvl0-68-dark",lvl1_01:"--ct-folder-lvl1-01-dark",lvl1_25:"--ct-folder-lvl1-25-dark",lvl1_68:"--ct-folder-lvl1-68-dark",folderQ:"--ct-folder-q-dark",tBorder:"--ct-table-border",tShadow:"--ct-table-shadow",tEven:"--ct-table-row-even",tHover:"--ct-table-row-hover",iBorder:"--ct-image-border",iShadow:"--ct-image-shadow"};function Z(l,e,t=document.documentElement){let r=e[l],a=t instanceof Document?t.documentElement:t,n=l==="dark"?"dark":"light";a.style.setProperty(j.baseWhite,r.base.white),a.style.setProperty(j.baseBlack,r.base.black),["h1","h2","h3","h4","h5","h6"].forEach(c=>a.style.setProperty(`--ct-${c}-${n}`,r.heading[c])),a.style.setProperty(`--ct-bullet-${n}`,r.list.bullet),a.style.setProperty(`--ct-ol-marker-${n}`,r.list.olMarker),a.style.setProperty(`--ct-bold-${n}`,r.bold.bold);let{lvl0:i,lvl1:o,q:s}=r.folder;a.style.setProperty(`--ct-folder-lvl0-01-${n}`,i._01),a.style.setProperty(`--ct-folder-lvl0-25-${n}`,i._25),a.style.setProperty(`--ct-folder-lvl0-68-${n}`,i._68),a.style.setProperty(`--ct-folder-lvl1-01-${n}`,o._01),a.style.setProperty(`--ct-folder-lvl1-25-${n}`,o._25),a.style.setProperty(`--ct-folder-lvl1-68-${n}`,o._68),a.style.setProperty(`--ct-folder-q-${n}`,s),a.style.setProperty(j.tBorder,r.table.border),a.style.setProperty(j.tShadow,r.table.shadow),a.style.setProperty(j.tEven,r.table.rowEven),a.style.setProperty(j.tHover,r.table.rowHover),a.style.setProperty("--ct-image-border",r.image.border),a.style.setProperty("--ct-image-shadow",r.image.shadow)}var A=require("obsidian");function _e(l){return(...e)=>ie&&console[l]("[CT]",...e)}var ie=!0,v={setDebug(l){ie=l},d:_e("debug"),w:_e("warn"),e:_e("error"),time(l){ie&&console.time(`[CT] ${l}`)},timeEnd(l){ie&&console.timeEnd(`[CT] ${l}`)}};var Ye={enableHeaderNumbering:!0,hideZeroFolders:!0,hideAllNotes:!0,listCallouts:[],tokens:structuredClone(Q),baseVars:{},customCss:"",debugLog:!1},R={baseWhite:"Base \u2027 \uBC30\uACBD(\uD770\uC0C9)",baseBlack:"Base \u2027 \uAE00\uC790(\uAC80\uC815)",h1:"H1 (Red)",h2:"H2 (Orange)",h3:"H3 (Yellow)",h4:"H4 (Green)",h5:"H5 (Blue)",h6:"H6 (Violet)",bullet:"List Bullet",olMarker:"Ordered-list Number",lvl0_01:"Folder L0 - 0~1",lvl0_25:"Folder L0 - 2~5",lvl0_68:"Folder L0 - 6~8",lvl1_01:"Folder L1 - 0~1",lvl1_25:"Folder L1 - 2~5",lvl1_68:"Folder L1 - 6~8",folderQ:"Folder \u201CQ)\u201D",tBorder:"Table Border",tShadow:"Table Shadow",tRowEven:"Table Row (even)",tRowHover:"Table Row (hover)",iBorder:"Image Border",iShadow:"Image Shadow"},oe=5,le=class extends A.PluginSettingTab{constructor(t,r){super(t,r);this.plugin=r}async commit(){await this.plugin.saveSettings(),Z("dark",this.plugin.settings.tokens),Z("light",this.plugin.settings.tokens),this.plugin.rebuildListCallouts()}fillMissing(t){["dark","light"].forEach(r=>{var o,s;let a=Q[r],n=t[r];n.base={...a.base,...n.base},n.heading={...a.heading,...n.heading},n.list={...a.list,...n.list},n.bold={...a.bold,...n.bold};let i=(c,d)=>{Object.keys(c).forEach(h=>{var m;(m=d[h])!=null||(d[h]=c[h])})};i(a.folder.lvl0,n.folder.lvl0),i(a.folder.lvl1,n.folder.lvl1),(s=(o=n.folder).q)!=null||(o.q=a.folder.q),n.table={...a.table,...n.table},n.image={...a.image,...n.image}})}addDualPicker(t,r,a,n,i,o){let s=new A.Setting(t).setName(r).setDesc("\u2600 Light \u25B8 left   \xB7   \u{1F319} Dark \u25B8 right"),c=(d,h,m,f)=>{var p;d.setValue(h()).onChange(async b=>{m(b),await this.commit()});let u=(p=d.inputEl)!=null?p:null;u?u.setAttribute("title",f):queueMicrotask(()=>{var b;u=(b=d.containerEl)==null?void 0:b.querySelector("input[type='color']"),u==null||u.setAttribute("title",f)})};s.addColorPicker(d=>c(d,a,i,"Light mode colour (\u2600)")),s.addColorPicker(d=>c(d,n,o,"Dark mode colour (\u{1F319})"))}buildCalloutRow(t,r,a,n){let i=new A.Setting(t);i.addText(s=>s.setPlaceholder("\u2605").setValue(r.char).onChange(async c=>{r.char=c.trim().charAt(0)||"\u2022",await this.commit(),this.display()})).setName(`Marker ${a+1}`);let o=(s,c,d)=>{i.addColorPicker(h=>{h.setValue(c()).onChange(async f=>{d(f),await this.commit()});let m=()=>{var p;let u=(p=h.containerEl)==null?void 0:p.querySelector("input[type='color']");u==null||u.setAttribute("title",s)};m(),queueMicrotask(m)})};o("bgLight",()=>r.bgLight,s=>r.bgLight=s),o("fgLight",()=>r.fgLight,s=>r.fgLight=s),o("bgDark",()=>r.bgDark,s=>r.bgDark=s),o("fgDark",()=>r.fgDark,s=>r.fgDark=s),i.addExtraButton(s=>s.setIcon("trash").setTooltip("Delete").onClick(async()=>{n.listCallouts.splice(a,1),await this.commit(),this.display()}))}newCallout(){return{char:"\u2605",bgLight:"#dbeafe",fgLight:"#1e40af",bgDark:"#1e3a8a",fgDark:"#dbeafe"}}display(){let t=this.containerEl;t.empty();let r=this.plugin.settings;this.fillMissing(r.tokens),new A.Setting(t).setName("Debug \uB85C\uADF8 \uD45C\uC2DC").addToggle(a=>a.setValue(this.plugin.settings.debugLog).onChange(async n=>{this.plugin.settings.debugLog=n,await this.plugin.saveSettings(),v.setDebug(n)})),new A.Setting(t).setName("_0  On / Off").setDesc('Hide every folder or file whose name starts with "0_" in Explorer').addToggle(a=>a.setValue(r.hideZeroFolders).onChange(async n=>{r.hideZeroFolders=n,await this.commit(),this.plugin.applyZeroFolderVisibility()})),new A.Setting(t).setName("Hide all notes in Explorer").setDesc("Temporarily hide every file (nav-file); folders stay visible.").addToggle(a=>a.setValue(r.hideAllNotes).onChange(async n=>{r.hideAllNotes=n,await this.commit(),this.plugin.applyExplorerHide()})),t.createEl("h3",{text:"\u{1F3A8} Color palette \u2013 Light / Dark"}),t.createEl("p",{text:"Each row shows two colour pickers:  \u2600  = Light mode   \xB7   \u{1F319}  = Dark mode.",cls:"ct-tip"}),this.addDualPicker(t,R.baseWhite,()=>r.tokens.light.base.white,()=>r.tokens.dark.base.white,a=>r.tokens.light.base.white=a,a=>r.tokens.dark.base.white=a),this.addDualPicker(t,R.baseBlack,()=>r.tokens.light.base.black,()=>r.tokens.dark.base.black,a=>r.tokens.light.base.black=a,a=>r.tokens.dark.base.black=a),t.createEl("h4",{text:"Headings (H1\u2013H6)"}),["h1","h2","h3","h4","h5","h6"].forEach(a=>this.addDualPicker(t,R[a],()=>r.tokens.light.heading[a],()=>r.tokens.dark.heading[a],n=>r.tokens.light.heading[a]=n,n=>r.tokens.dark.heading[a]=n)),t.createEl("h4",{text:"List / Bold"}),["bullet","olMarker"].forEach(a=>this.addDualPicker(t,R[a],()=>r.tokens.light.list[a],()=>r.tokens.dark.list[a],n=>r.tokens.light.list[a]=n,n=>r.tokens.dark.list[a]=n)),this.addDualPicker(t,"Bold text",()=>r.tokens.light.bold.bold,()=>r.tokens.dark.bold.bold,a=>r.tokens.light.bold.bold=a,a=>r.tokens.dark.bold.bold=a),t.createEl("h4",{text:"Explorer folders \u2013 Level 0"}),["_01","_25","_68"].forEach(a=>this.addDualPicker(t,R[`lvl0_${a.slice(1)}`],()=>r.tokens.light.folder.lvl0[a],()=>r.tokens.dark.folder.lvl0[a],n=>r.tokens.light.folder.lvl0[a]=n,n=>r.tokens.dark.folder.lvl0[a]=n)),t.createEl("h4",{text:"Explorer folders \u2013 Level 1"}),["_01","_25","_68"].forEach(a=>this.addDualPicker(t,R[`lvl1_${a.slice(1)}`],()=>r.tokens.light.folder.lvl1[a],()=>r.tokens.dark.folder.lvl1[a],n=>r.tokens.light.folder.lvl1[a]=n,n=>r.tokens.dark.folder.lvl1[a]=n)),t.createEl("h4",{text:'Explorer folder \u2013 "Q)"'}),this.addDualPicker(t,R.folderQ,()=>r.tokens.light.folder.q,()=>r.tokens.dark.folder.q,a=>r.tokens.light.folder.q=a,a=>r.tokens.dark.folder.q=a),t.createEl("h3",{text:"\u{1F4DD} List Callouts"}),r.listCallouts.forEach((a,n)=>this.buildCalloutRow(t,a,n,r)),new A.Setting(t).addButton(a=>{let n=r.listCallouts.length>=oe;a.setButtonText(n?"Limit reached":"+ Add").setDisabled(n).setCta().setTooltip(n?`You can register up to ${oe} callouts`:"Add a new callout").onClick(async()=>{r.listCallouts.length>=oe||(r.listCallouts.push(this.newCallout()),await this.commit(),this.display())})}).setName(`\uC0C8 Callout \uCD94\uAC00 (max ${oe})`)}};var G=require("obsidian"),se=class{constructor(e){this.app=e;this.restoreOpenLinkText=null;this.patchOpenLinkText(),this.watchFileOpenEvent(),this.app.vault.on("delete",t=>{t instanceof G.TFile&&this.leavesFor(t).forEach(r=>r.detach())}),this.registerGlobalClick()}watchFileOpenEvent(){this.fileOpenHandler=(...e)=>{let t=e[0];if(!t)return;let r=this.leavesFor(t);r.length>1&&r.slice(1).forEach(a=>a.detach())},this.app.workspace.on("file-open",this.fileOpenHandler)}registerGlobalClick(){this.clickHandler=this.handleClick.bind(this),this.app.workspace.containerEl.addEventListener("click",this.clickHandler,!0)}leavesFor(e){let t=[];return this.app.workspace.iterateAllLeaves(r=>{let a=r.view.file;(a==null?void 0:a.path)===e.path&&t.push(r)}),t}async focusOrOpenFile(e){let t=this.leavesFor(e)[0];if(t)return this.app.workspace.revealLeaf(t);let r=this.app.workspace.getLeaf("tab");await r.openFile(e),this.app.workspace.revealLeaf(r)}openPathAny(e){let t=this.app.vault.getAbstractFileByPath(e);t instanceof G.TFile?this.focusOrOpenFile(t):this.app.workspace.openLinkText(e,"",!0)}findFolderNote(e){let t=e.split("/").pop()||"";for(let r of[`${e}.md`,`${e}/${t}.md`,`${e}/index.md`,`${e}/README.md`]){let a=this.app.vault.getAbstractFileByPath(r);if(a instanceof G.TFile)return a}return null}handleClick(e){var i,o,s,c;if(e.button!==0||e.ctrlKey||e.metaKey)return;let t="div.nav-file-title, div.nav-file-title-content",r="div.nav-folder-title",a="a[href$='.pdf']",n=e.target.closest(`${t}, ${r}, ${a}`);if(n){if(n.matches(r)){let d=(s=(o=n.dataset.path)!=null?o:(i=n.closest(".nav-folder"))==null?void 0:i.dataset.path)!=null?s:"";if(!d)return;let h=this.findFolderNote(d);if(!h)return;e.preventDefault(),this.focusOrOpenFile(h);return}if(n.matches(a)){let d=n.getAttribute("href")||"";if(!d)return;e.preventDefault();let h=(c=this.app.metadataCache.getFirstLinkpathDest(d,""))!=null?c:this.app.vault.getAbstractFileByPath(d);h instanceof G.TFile&&this.focusOrOpenFile(h);return}}}patchOpenLinkText(){let e=this.app.workspace,t=e.openLinkText.bind(e);e.openLinkText=async(r,a,n,i)=>{let o=this.app.metadataCache.getFirstLinkpathDest(r,a);if(o instanceof G.TFile){let s=this.leavesFor(o)[0];if(s)return e.revealLeaf(s),s}return t(r,a,n,i)},this.restoreOpenLinkText=()=>e.openLinkText=t}destroy(){var e;this.fileOpenHandler&&this.app.workspace.off("file-open",this.fileOpenHandler),this.app.workspace.containerEl.removeEventListener("click",this.clickHandler,!0),(e=this.restoreOpenLinkText)==null||e.call(this)}};var Be=require("obsidian");var X=require("obsidian");var y=class{static el(e,t="",r=""){let a=document.createElement(e);return t&&(a.className=t),r&&(a.textContent=r),a}};var z=class{constructor(e){this.app=e}newCanvas(){return this.create({label:"\uFF0B New canvas",cls:"interactive_table-button interactive_table-button--new-canvas",onClick:()=>{}})}create(e){let t=y.el("button",e.cls,e.label);return e.disabled?(t.classList.add(`${e.cls}--disabled`),t.setAttribute("aria-disabled","true"),t.disabled=!0,t):(t.onclick=e.onClick,t)}openFolder(e){return this.create({label:"\u21AA Open Folder",cls:"interactive_table-button interactive_table-button--open-folder",onClick:async()=>{try{let{shell:t}=window.require("electron"),r=window.require("path"),a=this.app.vault.adapter.basePath,n=r.resolve(a,e);r.extname(n)!==""?t.showItemInFolder(n):t.openPath(n)}catch(t){}}})}newNote(){return this.create({label:"\uFF0B New note",cls:"interactive_table-button interactive_table-button--new-note",onClick:()=>this.app.commands.executeCommandById("file-explorer:new-file")})}refresh(e){return this.create({label:"\u21BB",cls:"interactive_table-button interactive_table-button--refresh",onClick:e})}tagFilter(e,t){return this.create({label:e,cls:"interactive_table-button interactive_table-button--tag-filter",onClick:t})}filter(e,t){return this.create({label:e,cls:"interactive_table-button interactive_table-filter__btn",onClick:t})}pagination(e,t,r){return this.create({label:e,cls:"interactive_table-pagination__btn",disabled:t,onClick:r})}};var ce=class{static text(e={}){var r,a;let t=y.el("input",(r=e.cls)!=null?r:"");return t.type="text",t.placeholder=(a=e.placeholder)!=null?a:"",e.value!=null&&(t.value=String(e.value)),e.onEnter&&t.addEventListener("keydown",n=>{n.key==="Enter"&&e.onEnter(t.value.trim())}),e.onChange&&t.addEventListener("change",()=>e.onChange(t.value.trim())),t}static number(e={}){var r;let t=y.el("input",(r=e.cls)!=null?r:"");return t.type="number",e.min!=null&&(t.min=String(e.min)),e.max!=null&&(t.max=String(e.max)),e.step!=null&&(t.step=String(e.step)),e.value!=null&&(t.value=String(e.value)),e.onChange&&t.addEventListener("change",()=>e.onChange(t.value===""?NaN:Number(t.value))),t}static date(e={}){var r;let t=y.el("input",(r=e.cls)!=null?r:"");if(t.type="date",e.value!=null){let a=e.value instanceof Date?e.value.toISOString().slice(0,10):String(e.value);t.value=a}return e.onChange&&t.addEventListener("change",()=>e.onChange(t.value?new Date(`${t.value}T00:00:00`):"")),t}};var V=class{static create(e=!1,t=""){return y.el("div",`ct-spinner${e?" ct-spinner--sm":""}${t?" "+t:""}`)}static default(){return V.create()}static tiny(){return V.create(!0)}};var E=[];for(let l=0;l<256;++l)E.push((l+256).toString(16).slice(1));function qe(l,e=0){return(E[l[e+0]]+E[l[e+1]]+E[l[e+2]]+E[l[e+3]]+"-"+E[l[e+4]]+E[l[e+5]]+"-"+E[l[e+6]]+E[l[e+7]]+"-"+E[l[e+8]]+E[l[e+9]]+"-"+E[l[e+10]]+E[l[e+11]]+E[l[e+12]]+E[l[e+13]]+E[l[e+14]]+E[l[e+15]]).toLowerCase()}var Fe,ht=new Uint8Array(16);function Ie(){if(!Fe){if(typeof crypto=="undefined"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Fe=crypto.getRandomValues.bind(crypto)}return Fe(ht)}var mt=typeof crypto!="undefined"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Ae={randomUUID:mt};function pt(l,e,t){var a,n,i;if(Ae.randomUUID&&!e&&!l)return Ae.randomUUID();l=l||{};let r=(i=(n=l.random)!=null?n:(a=l.rng)==null?void 0:a.call(l))!=null?i:Ie();if(r.length<16)throw new Error("Random bytes length must be >= 16");if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){if(t=t||0,t<0||t+16>e.length)throw new RangeError(`UUID byte range ${t}:${t+15} is out of buffer bounds`);for(let o=0;o<16;++o)e[t+o]=r[o];return e}return qe(r)}var He=pt;var de=class{constructor(e,t,r,a,n,i,o,s,c){this.app=e;this.note=r;this.vid=a;this.cols=n;this.cb=i;this.opts=o;this.fmList=s;this.tagList=c;if(this.btnFactory=new z(e),this.wrap=y.el("div","ct-filter-bar"),t.prepend(this.wrap),o.showFrontmatterFilterButton&&this.buildFrontmatterFilters(),o.showTagFilterButton&&this.buildTagFilter(),o.showSearchBox&&this.buildSearchBox(),this.btns=y.el("div","ct-filter-bar__utils"),this.wrap.appendChild(this.btns),o.showOpenFolderButton&&o.folderPath&&this.btns.appendChild(this.btnFactory.openFolder(o.folderPath)),o.showNewNoteButton){let d=this.btnFactory.newNote();d.onclick=async()=>{var p;let h=(p=this.opts.folderPath)!=null?p:this.note.substring(0,this.note.lastIndexOf("/")),m=this.app.vault.getAbstractFileByPath(h);m instanceof X.TFolder||(await this.app.vault.createFolder(h),m=this.app.vault.getAbstractFileByPath(h));let f=`Untitled ${window.moment().format("YYYY-MM-DD HHmmss")}.md`,u=await this.app.fileManager.createNewMarkdownFile(m,f);await he(this.app,u.path,t)},this.btns.appendChild(d)}if(o.showNewCanvasButton){let d=this.btnFactory.newCanvas();d.onclick=async()=>{var h;try{let m=(h=this.opts.folderPath)!=null?h:this.note.substring(0,this.note.lastIndexOf("/")),f=this.app.vault.getAbstractFileByPath(m);f instanceof X.TFolder||(await this.app.vault.createFolder(m),f=this.app.vault.getAbstractFileByPath(m));let p=`Untitled ${window.moment().format("YYYY-MM-DD HHmmss")}.canvas`,b=`${m}/${p}`;await this.createBlankCanvas(b),await he(this.app,b,t)}catch(m){new X.Notice(`Failed to create canvas: ${m.message}`),console.error(m)}},this.btns.appendChild(d)}o.showRefreshButton&&this.btns.appendChild(this.btnFactory.refresh(async()=>{let d=event.currentTarget,h=d.textContent;d.replaceChildren(V.tiny());try{await this.cb.rerender()}finally{d.textContent=h!=null?h:"\u21BB"}}))}buildTagFilter(){let e=`tagFilter_${this.vid}`,t=this.cb.getState(this.note,this.vid,e)||"ALL",r=this.btnFactory.tagFilter(t==="ALL"?"#Tags":t,async()=>{if(!this.tagList)return;let a=await this.cb.suggester(this.tagList);a!=null&&this.cb.sync(this.note,this.vid,e,a)});t!=="ALL"&&r.classList.add("is-active"),this.wrap.appendChild(r)}buildFrontmatterFilters(){this.fmList.forEach(({prop:e,values:t})=>{let r=`filter_${this.vid}_${e}`,a=this.cb.getState(this.note,this.vid,r)||"ALL",n=a==="ALL"?e:`${e}: ${a}`,i=this.btnFactory.filter(n,async()=>{let o=await this.cb.suggester(t);o!=null&&this.cb.sync(this.note,this.vid,r,o)});a!=="ALL"&&i.classList.add("is-active"),this.wrap.appendChild(i)})}collectPropValues(e){var a,n;let t=(n=(a=this.cb.getLocalState(this.note,this.vid))==null?void 0:a.pages)!=null?n:[],r=new Set;return t.forEach(i=>{let o=this.cb.getVal(i,e),s=this.cb.formatAsDate(o)||String(o!=null?o:"-");r.add(s)}),Array.from(r).filter(i=>i!=="-").sort()}buildSearchBox(){let e=`search_ready_${this.vid}`,t=`search_${this.vid}`,r=this.cb.getState(this.note,this.vid,t)||"",a=ce.text({cls:"ct-filter-bar__search",placeholder:"Search\u2026",value:r,onEnter:n=>{this.cb.sync(this.note,this.vid,e,!0),this.cb.sync(this.note,this.vid,t,n)}});this.wrap.appendChild(a)}async createBlankCanvas(e){let t=JSON.stringify({nodes:[],edges:[],version:"1.0.0",id:He()},null,2);await this.app.vault.create(e,t)}};var me=class{constructor(e,t,r,a,n){this.note=e;this.vid=t;this.cb=r;var o;this.btnFactory=new z(r);let i=Math.max(n.perPage,1);if(this.totalPages=Math.ceil(n.totalRows/i),this.totalPages<=1){this.wrap=y.el("div");return}this.wrap=y.el("div","ct-pagination"),a.appendChild(this.wrap),this.render((o=n.maxButtons)!=null?o:7)}render(e){var s;this.wrap.empty();let t=`pagination_${this.vid}`,r=(s=this.cb.getState(this.note,this.vid,t))!=null?s:0,a=(c,d,h=!1)=>{let m=this.btnFactory.pagination(c,h,()=>{this.cb.sync(this.note,this.vid,t,d)});m.classList.add(c==="\u2190"||c==="\u2192"?"interactive_table-pagination__btn--arrow":"interactive_table-pagination__btn--num"),h&&m.classList.add("is-active"),this.wrap.appendChild(m)};a("\u2190",r-1,r===0);let n=Math.max(3,e),i=Math.max(0,r-Math.floor(n/2)),o=i+n-1;o>=this.totalPages&&(o=this.totalPages-1,i=Math.max(0,o-n+1)),i>0&&a("1",0),i>1&&this.wrap.appendChild(y.el("span","ct-pagination__ellipsis","\u2026"));for(let c=i;c<=o;c++)a(String(c+1),c,c===r);o<this.totalPages-2&&this.wrap.appendChild(y.el("span","ct-pagination__ellipsis","\u2026")),o<this.totalPages-1&&a(String(this.totalPages),this.totalPages-1),a("\u2192",r+1,r>=this.totalPages-1)}};function pe(l){return(l==null?[]:Array.isArray(l)?l:l instanceof Set?[...l]:typeof l=="string"?l.split(/[,;]/).filter(Boolean):[]).map(t=>(t!=null?t:"").trim()).filter(Boolean).map(t=>t.startsWith("#")?t.slice(1):t)}function je(l){return l.toString().padStart(2,"0")}function ut(l){return`${l.getFullYear()}-${je(l.getMonth()+1)}-${je(l.getDate())}`}function ft(l){let e=y.el("span",""),t=pe(l).sort((r,a)=>r.localeCompare(a,"ko"));return t.forEach((r,a)=>{let n=y.el("span","ct-tag",r),i=r.split("/")[0];n.classList.add(`ct-tag--${i}`),e.appendChild(n),a<t.length-1&&e.appendChild(document.createTextNode(", "))}),e}function gt(l,e){var t;if(l==null)return"";switch(e){case"num":return String(l);case"year":{let r=(t=String(l).match(/\d{4}/))==null?void 0:t[0];return r!=null?r:String(l)}case"date":{let r=new Date(l);return isNaN(r.getTime())?String(l):ut(r)}case"tags":return ft(l);default:return String(l)}}function vt(l,e){return e.startsWith("file.")?e.split(".").reduce((t,r)=>t==null?void 0:t[r],l):l[e]}var ue=class{static build(e){let t=y.el("table","ct-data-table");e.zebra&&t.classList.add("ct-data-table--zebra");let r=y.el("thead",""),a=y.el("tr","");e.columns.filter(i=>i.column).forEach(i=>{let o=y.el("th","ct-data-table__th",i.name),s=e.cb.getState(e.notePath,e.viewId,`sort_${e.viewId}`),c=e.cb.getState(e.notePath,e.viewId,`sort_direction_${e.viewId}`);i.prop===s&&(c==="asc"&&o.classList.add("is-asc"),c==="desc"&&o.classList.add("is-desc")),o.addEventListener("click",()=>{a.querySelectorAll(".ct-data-table__th").forEach(T=>T.classList.remove("is-asc","is-desc"));let d=`sort_${e.viewId}`,h=`sort_direction_${e.viewId}`,m=e.cb.getState(e.notePath,e.viewId,d),f=e.cb.getState(e.notePath,e.viewId,h),u=null,p=null,b=m&&f;i.prop!==m?b?(u=null,p=null):(u=i.prop,p="asc"):f===null?(u=i.prop,p="asc"):f==="asc"?(u=i.prop,p="desc"):(u=null,p=null),p==="asc"&&o.classList.add("is-asc"),p==="desc"&&o.classList.add("is-desc"),e.cb.sync(e.notePath,e.viewId,d,u),e.cb.sync(e.notePath,e.viewId,h,p)}),a.appendChild(o)}),r.appendChild(a),t.appendChild(r);let n=y.el("tbody","");return e.rows.forEach((i,o)=>{var c,d;let s=y.el("tr","ct-data-table__tr");s.dataset.path=(d=(c=i==null?void 0:i.file)==null?void 0:c.path)!=null?d:"",s.onclick=()=>{if(s.classList.contains("ct-row--active")){s.classList.remove("ct-row--active");return}let m=t.querySelector(".ct-row--active");m&&m.classList.remove("ct-row--active"),s.classList.add("ct-row--active")},s.ondblclick=()=>{var m;let h=(m=i==null?void 0:i.file)==null?void 0:m.path;h&&window.app.workspace.openLinkText(h,"",!1)},e.columns.filter(h=>h.column).forEach(h=>{let m=y.el("td","ct-data-table__td"),f;if(e.cellRenderer)f=e.cellRenderer(i,h);else{let u=vt(i,h.prop);f=gt(u,h.format)}f instanceof HTMLElement?m.appendChild(f):m.textContent=f,s.appendChild(m)}),n.appendChild(s)}),t.appendChild(n),t}};async function bt(l,e){var a;if(!e)return;let t=(a=l.metadataCache.getFirstLinkpathDest(e,""))!=null?a:l.vault.getAbstractFileByPath(e);if(!(t instanceof Be.TFile))return;let r=l.workspace.openPopoutLeaf();await r.openFile(t),l.workspace.revealLeaf(r)}async function he(l,e,t){var s,c,d,h;let r=l.workspace.openPopoutLeaf(),a=l.vault.getAbstractFileByPath(e);a instanceof Be.TFile?await r.openFile(a,{active:!0}):await l.workspace.openLinkText(e,"",!0),(h=(d=(c=(s=t.closest(".workspace-leaf"))==null?void 0:s.view)==null?void 0:c.leaf)==null?void 0:d.detach)==null||h.call(d);let n=()=>{r.view!=null&&r.detach()},i=l.vault.on("delete",m=>{m.path===e&&n()}),o=l.workspace.on("file-open",m=>{m==null&&l.workspace.activeLeaf===r&&n()});l.workspace.on("layout-change",()=>{r.view==null&&(l.vault.offref(i),l.workspace.offref(o))})}var fe=class{constructor(e,t){this.app=e,this.cb=t}async buildView(e,t,r,a,n,i,o,s,c=[],d=null,h=this.cb){e.empty(),e.classList.add("ct-it-container");let m={showOpenFolderButton:s.showOpenFolderButton,showNewNoteButton:s.showNewNoteButton,showNewCanvasButton:s.showNewCanvasButton,showTagFilterButton:s.showTagFilterButton,showFrontmatterFilterButton:s.showFrontmatterFilterButton,showSearchBox:s.showSearchBox,showRefreshButton:s.showRefreshButton,folderPath:s.folderPath};new de(this.app,e,t,r,n,h,m,c,d);let f=ue.build({columns:n,rows:a,zebra:!0,onRowClick:u=>{var b;let p=(b=u==null?void 0:u.file)==null?void 0:b.path;p&&he(this.app,p,e)},notePath:t,viewId:r,cb:{getState:h.getState,sync:h.sync}});if(e.appendChild(f),f.addEventListener("dblclick",async u=>{var D,C;let p=u.target;if(p.closest(".nav-file-title"))return;let b=(D=p.closest("a"))==null?void 0:D.getAttribute("href"),T=p.closest("tr"),M=(C=b!=null?b:T==null?void 0:T.dataset.path)!=null?C:"";M&&(u.preventDefault(),await bt(this.app,M))},!0),i>0){let u={perPage:i,totalRows:o};new me(t,r,h,e,u)}}};var U=require("obsidian");var ee=class{constructor(e){this.app=e;this.dateYMDRegex=/^(\d{4})-(\d{1,2})-(\d{1,2})$/;this.timeHMRegex=/^(\d{1,2}):(\d{1,2})$/}async editProp(e){var r,a;let t=this.app.vault.getAbstractFileByPath((0,U.normalizePath)(e.path));if(t instanceof U.TFile&&e.type==="file name"){let n=t.basename,i=await this.textInput(n);if(!i||i===n)return;let o=(a=(r=t.parent)==null?void 0:r.path)!=null?a:"",s=t.extension,c=o?`${o}/${i}.${s}`:`${i}.${s}`;try{await this.app.vault.rename(t,c),new U.Notice("\u2705 File renamed")}catch(d){v.e(d),new U.Notice("\u26A0\uFE0F Failed to rename file")}}}async textInput(e){return new Promise(t=>{let{Modal:r}=globalThis.coverTable.obsidian;class a extends r{constructor(o){super(o);this.result=e}onOpen(){let{contentEl:o}=this;o.createEl("h1",{text:"Input"});let s=o.createEl("input",{value:this.result});s.style.width="100%",s.addEventListener("keydown",d=>{d.key==="Enter"&&(this.result=s.value.trim(),this.close(),t(this.result))});let c=o.createEl("button",{text:"OK"});c.onclick=()=>{this.result=s.value.trim(),this.close(),t(this.result)}}onClose(){this.contentEl.empty()}}new a(this.app).open()})}getVal(e,t){return t.startsWith("file.")?t.split(".").reduce((r,a)=>r==null?void 0:r[a],e):e[t]}parseDateYMD(e){if(typeof e!="string")return null;let t=e.match(this.dateYMDRegex);if(t){let[a,n,i,o]=t.map(Number);return n<1e3||n>9999||i<1||i>12||o<1||o>31?null:new Date(n,i-1,o)}let r=new Date(e);return isNaN(r.getTime())?null:r}parseTimeHM(e){if(typeof e!="string")return null;let t=e.match(this.timeHMRegex);if(!t)return null;let[r,a,n]=t.map(Number);if(a>23||n>59)return null;let i=new Date;return i.setHours(a,n,0,0),i}getSortValue(e){if(e==null)return"";let t=typeof e=="string"?e:String(e),r=this.parseDateYMD(t)||this.parseTimeHM(t);if(r)return r.getTime();let a=parseFloat(t);return isNaN(a)?t.toLowerCase():a}formatAsDate(e){if(e==null)return"";let t=this.parseDateYMD(String(e));if(!t)return String(e);let r=t.getFullYear(),a=t.getMonth()+1,n=t.getDate();return`${r}-${a<10?"0":""}${a}-${n<10?"0":""}${n}`}sortByProp(e,t,r="asc"){return!t||t==="title_link"||t==="tags"?e:e.sort((a,n)=>{let i=this.getSortValue(this.getVal(a,t)),o=this.getSortValue(this.getVal(n,t));return typeof i=="number"&&typeof o=="number"?r==="asc"?i-o:o-i:r==="asc"?String(i).localeCompare(String(o)):String(o).localeCompare(String(i))})}async suggester(e){let{SuggestModal:t}=globalThis.coverTable.obsidian;return new Promise(r=>{class a extends t{constructor(i){super(i)}getSuggestions(i){let o=i.toLowerCase();return e.filter(s=>s.toLowerCase().includes(o))}renderSuggestion(i,o){o.createEl("div",{text:i})}onChooseSuggestion(i){r(i)}}new a(this.app).open()})}};var $e=crypto!=null&&crypto.randomUUID?crypto.randomUUID():`tab-${Date.now().toString(36)}-${Math.random().toString(36).slice(2,10)}`,Ne=class{constructor(){this.paneMap=new Map;this.bcMap=new Map;this.subs=new Map;window.addEventListener("storage",e=>{var a;if(!((a=e.key)!=null&&a.startsWith("coverTable::"))||e.newValue==null)return;let[,t,r]=e.key.split("::");try{this.applyRemote(r,JSON.parse(e.newValue))}catch(n){}}),window.addEventListener("message",e=>{var a;if(!((a=e.data)!=null&&a.__coverTable))return;let{viewId:t,payload:r}=e.data;r.sender!==$e&&this.applyRemote(t,r.state)})}sweep(e){var r;let t=((r=this.paneMap.get(e))!=null?r:[]).filter(a=>document.body.contains(a.leafEl));this.paneMap.set(e,t)}addPane(e){var a;let t=(a=this.paneMap.get(e.viewId))!=null?a:[];if(t.some(n=>n.container===e.container))return;t.push(e),this.paneMap.set(e.viewId,t),v.d("addPane \u25B6",e.viewId,"\uD604\uC7AC Pane \uC218:",t.length),this.sweep(e.viewId);let r=async()=>{v.d("listener \uD638\uCD9C \u25B6",e.viewId),await e.refreshView(!0);let n=new CustomEvent("__cover_refresh",{detail:e.viewId});window.dispatchEvent(n)};if(this.subscribe(e.viewId,r),e.leafEl){let n=new MutationObserver(()=>{var i;if(e.leafEl&&!document.body.contains(e.leafEl)){this.unsubscribe(e.viewId,r);let o=((i=this.paneMap.get(e.viewId))!=null?i:[]).filter(s=>s!==e);this.paneMap.set(e.viewId,o),v.d("Pane \uC81C\uAC70 \u25B6",e.viewId,"\uB0A8\uC740 Pane:",o.length),n.disconnect()}});n.observe(document.body,{childList:!0,subtree:!0})}this.ensureChannel(e.viewId)}removePane(e,t){var a,n,i;this.sweep(t);let r=((a=this.paneMap.get(t))!=null?a:[]).filter(o=>o.notePath!==e);if(this.paneMap.set(t,r),v.d("removePane \u25B6",t,"\uB0A8\uC740 Pane:",r.length),r.length===0){(n=this.subs.get(t))==null||n.clear(),this.subs.delete(t),(i=this.bcMap.get(t))==null||i.close(),this.bcMap.delete(t);try{localStorage.removeItem(this.makeKey(e,t))}catch(o){}}}get(e,t){let r=localStorage.getItem(this.makeKey(e,t));try{return r?JSON.parse(r):{}}catch(a){return{}}}set(e,t,r=!1,a=!1){var s;v.d("set \u25B6",e.viewId,{patch:t,wipe:r,silent:a}),window.__COVER_TABLE_DISABLE_BC&&(a=!0);let n=this.makeKey(e.notePath,e.viewId),i=this.get(e.notePath,e.viewId),o=r?t:{...i,...t};try{localStorage.setItem(n,JSON.stringify(o))}catch(c){if((c==null?void 0:c.name)==="QuotaExceededError")console.warn("[Cover-Table] localStorage quota exceeded \u2192 using memory only");else throw c}if(!a){let c={sender:$e,state:o};(s=this.bcMap.get(e.viewId))==null||s.postMessage(c),window.postMessage({__coverTable:!0,viewId:e.viewId,payload:c},"*")}this.emit(e.viewId,o)}subscribe(e,t){var a;let r=(a=this.subs.get(e))!=null?a:new Set;r.add(t),this.subs.set(e,r)}unsubscribe(e,t){var r;(r=this.subs.get(e))==null||r.delete(t)}emit(e,t){var r;(r=this.subs.get(e))==null||r.forEach(a=>{try{a(t)}catch(n){console.error(n)}})}ensureChannel(e){if(this.bcMap.has(e))return;let t=new BroadcastChannel(`coverTable-${e}`);t.onmessage=r=>{let{sender:a,state:n}=r.data||{};a!==$e&&this.applyRemote(e,n)},this.bcMap.set(e,t)}applyRemote(e,t){var o;let r=(o=this.paneMap.get(e))!=null?o:[];if(r.length===0)return;let a=r[0].notePath,n=this.makeKey(a,e),i=this.get(a,e);JSON.stringify(i)!==JSON.stringify(t)&&(localStorage.setItem(n,JSON.stringify(t)),this.emit(e,t))}makeKey(e,t){return`coverTable::${e}::${t}`}hasLivePane(e){var r;return((r=this.paneMap.get(e))!=null?r:[]).some(a=>a.leafEl&&document.body.contains(a.leafEl))}},F=new Ne;function wt(){return crypto!=null&&crypto.randomUUID?crypto.randomUUID():`vid-${Date.now().toString(36)}-${Math.random().toString(36).slice(2,8)}`}function $(l,e,t){var r,a;return(a=(r=F.get(l,e))==null?void 0:r[t])!=null?a:null}function yt(l,e,t,r){let a=F.paneMap.get(e),n=a==null?void 0:a[0];if(n){let o=!!n.skipStateWrite;F.set(n,{[t]:r},!1,o);return}let i=`coverTable::${l}::${e}`;try{let o=JSON.parse(localStorage.getItem(i)||"{}");o[t]=r,localStorage.setItem(i,JSON.stringify(o))}catch(o){localStorage.setItem(i,JSON.stringify({[t]:r}))}}var ge=class{constructor(e,t,r,a,n,i){this.filteredRows=[];this.displayRows=[];this.totalRows=0;this.dateYMDRegex=/^(\d{4})-(\d{1,2})-(\d{1,2})$/;this.isoDateRegex=/^(\d{4})-(\d{2})-(\d{2})T/;this.timeHMRegex=/^(\d{1,2}):(\d{1,2})$/;var s;if(!(a!=null&&a.sourcePath))throw new Error("ctx.sourcePath missing");this.dv=e,this.pages=t,this.columns=r,this.ctx=a,this.settings=n,this.notePath=a.sourcePath,this.host=i,this.viewId=(s=n.__viewId)!=null?s:n.__viewId=wt();let o=i.closest(".workspace-leaf");o?F.addPane({viewId:this.viewId,notePath:this.notePath,dv:e,settings:n,ctx:a,container:i,leafEl:o,rerender:async c=>await this.compute(c),refreshView:async c=>{var d;return await((d=n.___refreshHook)==null?void 0:d.call(n,c))}}):v.w("[Cover-Table] workspace-leaf not found \u2013 skip pane registration")}async compute(e=!1){var n;let t=this.pages.map((i,o)=>{var m,f,u,p,b,T,M,D;let s={...i,__idx:o};s.tags=Array.isArray(i.tags)?i.tags:Array.isArray((m=i.file)==null?void 0:m.tags)?i.file.tags:i.tags?[i.tags]:[];let c=(()=>{try{return this.dv.page(i.file.path)}catch(C){return null}})(),d=(u=(f=i.file)==null?void 0:f.basename)!=null?u:"",h=d.endsWith(".excalidraw")?d.slice(0,-11):d||"-";return s.__fmTitle=(D=(M=(b=(p=c==null?void 0:c.frontmatter)==null?void 0:p.title)!=null?b:c==null?void 0:c.title)!=null?M:(T=i.frontmatter)==null?void 0:T.title)!=null?D:h,s}),r=await this.applyAllFilters(t);r=this.applySort(r),this.filteredRows=r,this.totalRows=r.length;let a=(n=this.settings.perPage)!=null?n:10;this.displayRows=a>0?this.paginate(r,a,e):r}async applyAllFilters(e){for(let t of this.columns.filter(r=>r.filter))e=await this.filterByProp(t,e);return e=await this.applyTagFilter(e),e=this.applySearch(e),e}async filterByProp(e,t){let r=`filter_${this.viewId}_${e.prop}`,a=$(this.notePath,this.viewId,r);if(!a||a==="ALL")return t;let n=i=>{var o;switch(e.format){case"date":{let s=this.normalizeYMD(i);return s!=null?s:"-"}case"year":{let s=typeof i=="number"?String(i):(o=String(i).match(/\d{4}/))==null?void 0:o[0];return s!=null?s:"-"}default:return String(i!=null?i:"-")}};return t.filter(i=>n(this.getVal(i,e.prop))===a)}async applyTagFilter(e){let t=$(this.notePath,this.viewId,`tagFilter_${this.viewId}`)||"ALL";return t==="ALL"?e:e.filter(r=>{var n,i,o;return(Array.isArray((n=r.file)==null?void 0:n.tags)?r.file.tags:Array.isArray(r.tags)?r.tags:[(o=(i=r.file)==null?void 0:i.tags)!=null?o:r.tags]).includes(t)})}applySearch(e){if(!$(this.notePath,this.viewId,`search_ready_${this.viewId}`))return e;let r=($(this.notePath,this.viewId,`search_${this.viewId}`)||"").trim().toLowerCase();if(!r)return e;let a=this.columns.filter(n=>n.column);return e.forEach(n=>{let i=[];a.forEach(o=>{let s=o.prop==="title_link"?n.__fmTitle||"":String(this.getVal(n,o.prop)||"");i.push(s.toLowerCase())}),n.__searchText=i.join(" ")}),e.filter(n=>r.split(" ").every(i=>i&&(n.__searchText||"").includes(i.toLowerCase())))}applySort(e){var i;let t=$(this.notePath,this.viewId,`sort_${this.viewId}`),r=$(this.notePath,this.viewId,`sort_direction_${this.viewId}`);if(!t||!r)return e.sort((o,s)=>o.__idx-s.__idx);if(!t)return e.sort((o,s)=>o.__idx-s.__idx);let a=this.columns.find(o=>o.prop===t),n=(i=a==null?void 0:a.format)!=null?i:"text";return e.sort((o,s)=>{let c=this.getSortValue(this.getVal(o,t),n),d=this.getSortValue(this.getVal(s,t),n),h=typeof c=="number"&&typeof d=="number"?c-d:JSON.stringify(c).localeCompare(JSON.stringify(d),"ko");return r==="asc"?h:-h})}paginate(e,t,r){var o;let a=`pagination_${this.viewId}`,n=t>0?Math.ceil(e.length/t):1,i=(o=$(this.notePath,this.viewId,a))!=null?o:0;return n===0?i=0:(i<0&&(i=0),i>=n&&(i=n-1)),!r&&i!==$(this.notePath,this.viewId,a)&&yt(this.notePath,this.viewId,a,i),t>0?e.slice(i*t,(i+1)*t):[...e]}parseDateYMD(e){if(typeof e!="string")return null;let t=e.match(this.dateYMDRegex);if(!t)return null;let r=+t[1],a=+t[2],n=+t[3];return r<1e3||r>9999||a<1||a>12||n<1||n>31?null:new Date(r,a-1,n)}normalizeYMD(e){if(!e)return null;let r=String(e).split("T")[0].match(/^(\d{4})-(\d{1,2})-(\d{1,2})$/);return r?`${+r[1]}-${+r[2]}-${+r[3]}`:null}parseTimeHM(e){if(typeof e!="string")return null;let t=e.match(this.timeHMRegex);if(!t)return null;let r=+t[1],a=+t[2];if(r>23||a>59)return null;let n=new Date;return n.setHours(r,a,0,0),n}getSortValue(e,t="text"){var r,a;if(e==null)return t==="num"?0:[99,"",""];switch(t){case"num":{let n=Number(e);return isNaN(n)?0:n}case"date":{let n=String(e);this.isoDateRegex.test(n)&&(n=n.slice(0,10));let i=this.parseDateYMD(n);return i?i.getTime():0}case"year":{let n=(r=String(e).match(/\d{4}/))==null?void 0:r[0];return n?Number(n):0}case"tags":{let n=pe(e).sort((i,o)=>i.localeCompare(o,"ko"))[0];return n!=null?n:""}default:{let n=String(e!=null?e:""),i=n.normalize("NFKD").replace(/[\u0300-\u036F]/g,"").replace(/[#*_`~\[\]\(\)\{\}<>\-]/g,"").trim().toLowerCase(),o=(a=i[0])!=null?a:"";return[/[a-z]/.test(o)?0:/[가-힣]/.test(o)?1:/\d/.test(o)?2:/\p{Extended_Pictographic}/u.test(o)?4:3,i,n]}}}formatAsDate(e){if(e==null)return"";let t=this.parseDateYMD(String(e));if(!t)return String(e);let r=t.getFullYear(),a=t.getMonth()+1,n=t.getDate();return`${r}-${a<10?"0":""}${a}-${n<10?"0":""}${n}`}getVal(e,t){return t.startsWith("file.")?t.split(".").reduce((r,a)=>r==null?void 0:r[a],e):e[t]}};var Ge=require("obsidian");var W=class{constructor(e){this.ctrlSet=new Set;this.debounce=(e,t=150)=>{let r=null;return(...a)=>{r&&clearTimeout(r),r=window.setTimeout(()=>e(...a),t)}};this.broadcast=this.debounce(e=>{this.ctrlSet.forEach(t=>t(e))},150);this.app=e,this.attachVaultHooks(),this.attachWorkspaceHooks()}static get i(){return W._inst}emit(e){this.broadcast(e)}static init(e){W._inst||(W._inst=new W(e))}on(e){this.ctrlSet.add(e)}off(e){this.ctrlSet.delete(e)}attachVaultHooks(){let e=this.app.vault;["modify","delete","rename","create"].forEach(t=>e.on(t,r=>{r instanceof Ge.TFile&&this.broadcast(r)})),this.app.metadataCache.on("resolved",()=>this.broadcast())}attachWorkspaceHooks(){this.app.workspace.on("layout-change",()=>this.broadcast()),this.app.workspace.on("active-leaf-change",()=>setTimeout(()=>this.broadcast(),100))}forceRefresh(e){v.d("[CT] EventBus.forceRefresh()"),this.broadcast(e)}},P=W;P._inst=null;function ve(l,e,t){var r,a;return(a=(r=F.get(l,e))==null?void 0:r[t])!=null?a:null}function be(l,e,t,r){let a=F.paneMap.get(e),n=a==null?void 0:a[0];if(n){let o=!!n.skipStateWrite;F.set(n,{[t]:r},!1,o);return}let i=`coverTable::${l}::${e}`;try{let o=JSON.parse(localStorage.getItem(i)||"{}");o[t]=r,localStorage.setItem(i,JSON.stringify(o))}catch(o){localStorage.setItem(i,JSON.stringify({[t]:r}))}}function kt(){let l=new Date,e=l.getFullYear(),t=l.getMonth()+1,r=l.getDate();return`${e}-${t<10?"0":""}${t}-${r<10?"0":""}${r}`}function Tt(l){var e,t,r,a,n,i,o,s,c;if(!l.created||l.created==="-"){let d=(c=(o=(r=(t=(e=l.file)==null?void 0:e.cday)==null?void 0:t.toISODate)==null?void 0:r.call(t))!=null?o:(i=(n=(a=l.file)==null?void 0:a.ctime)==null?void 0:n.toISODate)==null?void 0:i.call(n))!=null?c:typeof((s=l.file)==null?void 0:s.ctime)=="number"?Oe(l.file.ctime):kt();return{...l,created:d,frontmatter:{...l.frontmatter,created:d}}}return l}function Oe(l){let e=new Date(l),t=e.getFullYear(),r=e.getMonth()+1,a=e.getDate();return`${t}-${r<10?"0":""}${r}-${a<10?"0":""}${a}`}var we=class{constructor(e){this.app=e;this.models=new Map;this._rendering=!1;this.refreshTimer=null;this.skipStateWrite=!1;this.handleWorkspaceTabClick=e=>{e.target.closest(".workspace-tab-header.tappable")&&document.querySelectorAll("[data-cover-view]").forEach(r=>{let a=r.dataset.coverView;if(this.models.has(a)){this.rerender(!0,a);return}let n=[...this.models.values()].find(i=>!i.host.isConnected);n&&this.rerender(!0,n.viewId)})};this.dateYMDRegex=/^(\d{4})-(\d{1,2})-(\d{1,2})$/;this.timeHMRegex=/^(\d{1,2}):(\d{1,2})$/;this.svc=new ee(e);let t=r=>this.refreshByBus(r);P.i.on(t),this.__cover_unload__=()=>P.i.off(t),this.cb={getState:ve,setState:be,getLocalState:(r,a)=>F.get(r,a),getVal:(r,a)=>this.svc.getVal(r,a),parseDateYMD:r=>this.svc.parseDateYMD(r),formatAsDate:r=>this.svc.formatAsDate(r),getSortValue:r=>this.svc.getSortValue(r),suggester:r=>this.svc.suggester(r),rerender:async()=>{await this.rerender(!0)},sync:async(r,a,n,i)=>{be(r,a,n,i),await this.rerender(!0,a)},resetState:async()=>{}},this.ui=new fe(e,this.cb),this.app.workspace.containerEl.addEventListener("click",r=>{r.target.closest(".workspace-tab-header.tappable")&&setTimeout(()=>{var o,s,c,d,h,m,f,u;let a=(d=(c=(s=(o=this.app.workspace.activeLeaf)==null?void 0:o.view)==null?void 0:s.containerEl)==null?void 0:c.querySelector)==null?void 0:d.call(c,"[data-cover-view]");if(!a)return;let n=a.dataset.coverView,i=(u=(f=(m=(h=this.app.workspace.activeLeaf)==null?void 0:h.view)==null?void 0:m.file)==null?void 0:f.path)!=null?u:"";this.cb.sync(i,n,`tagFilter_${n}`,"ALL")},180)},!0)}async renderAutoView(e,t={},r,a,n=!1){var d,h,m,f,u,p,b,T,M,D,C,I;let i={...t};if(i.perPage==null){let B=(h=(d=t["entries on page"])!=null?d:t.entries_on_page)!=null?h:t.entriesOnPage;B!=null&&(i.perPage=Number(B)||0)}let o=r,s=(r==null?void 0:r.sourcePath)||"";if(this._rendering)return;this._rendering=!0,n&&(this.skipStateWrite=!0);let c=null;try{if(!(r!=null&&r.sourcePath)||!a)return;a.dataset.coverVid?i.__wipeState=!1:(a.dataset.coverVid=crypto.randomUUID(),i.__wipeState=!0),i.__viewId=a.dataset.coverVid,i._notePath=r.sourcePath;let B=ve(s,i.__viewId,"perPage");typeof B=="number"&&B>0&&(i.perPage=B);let N=(m=i.path)!=null?m:r.sourcePath.substring(0,r.sourcePath.lastIndexOf("/")),Pe=e.pages().where(g=>g.file.folder===N).where(g=>!this.isFolderNote(g)).map(g=>{var k;return Tt({...g,file:{...g.file,basename:(k=g.file.basename)!=null?k:g.file.name}})}).array(),re=this.app.vault.getFiles().filter(g=>g.extension==="canvas"&&g.path.startsWith(N+"/")).map(g=>{let k=Oe(g.stat.ctime);return{file:{path:g.path,link:e.fileLink(g.path),folder:N,basename:g.basename},frontmatter:{title:g.basename},created:k,tags:"#canvas"}}),ae=this.app.vault.getFiles().filter(g=>g.extension==="md"&&g.basename.endsWith(".excalidraw")&&g.path.startsWith(N+"/")).map(g=>{let k=Oe(g.stat.ctime);return{file:{path:g.path,link:e.fileLink(g.path),folder:N,basename:g.basename},frontmatter:{title:g.basename.replace(/\.excalidraw$/,"")},created:k,tags:"#excalidraw"}}),J=[...Pe,...re,...ae],Y={prop:"__fmTitle",name:"Title",filter:!1,column:!0,format:"text"},q={prop:"tags",name:"Tags",filter:!1,column:!0,format:"tags"},ne=Array.isArray(i.props)?i.props:[],O=[Y,...ne.filter(g=>!["title_link","tags"].includes(g.prop)).map(g=>{var k,L,w;return{...g,filter:(k=g.filter)!=null?k:!0,column:(L=g.column)!=null?L:!0,format:(w=g.format)!=null?w:"text"}}),q];i.___refreshHook=async(g=!1)=>{await this.renderAutoView(e,i,r,a,g)},c=new ge(e,J,O,r,i,a),a.setAttribute("data-cover-view",c.viewId),this.models.set(c.viewId,c),await c.compute(n);let rt=O.filter(g=>g.filter).map(g=>{let k=[...new Set(c.filteredRows.map(L=>{var _;let w=this.svc.getVal(L,g.prop);switch(g.format){case"date":{let x=c.normalizeYMD(w);return x!=null?x:"-"}case"year":{let x=typeof w=="number"?String(w):(_=String(w).match(/\d{4}/))==null?void 0:_[0];return x!=null?x:"-"}default:return String(w!=null?w:"-")}}))].sort((L,w)=>String(L).localeCompare(String(w)));return{prop:g.prop,values:["ALL",...k]}}),at=(()=>{let g=new Set;return c.filteredRows.forEach(k=>{var L,w,_;return(Array.isArray((L=k.file)==null?void 0:L.tags)?k.file.tags:Array.isArray(k.tags)?k.tags:[(_=(w=k.file)==null?void 0:w.tags)!=null?_:k.tags]).forEach(x=>g.add(x))}),g.size?["ALL",...[...g].sort()]:null})(),Mt=O.filter(g=>g.filter).map(g=>{let k=[...new Set(c.filteredRows.map(L=>{var _;let w=this.svc.getVal(L,g.prop);switch(g.format){case"date":{let x=c.normalizeYMD(w);return x!=null?x:"-"}case"year":{let x=typeof w=="number"?String(w):(_=String(w).match(/\d{4}/))==null?void 0:_[0];return x!=null?x:"-"}default:return String(w!=null?w:"-")}}))].sort((L,w)=>String(L).localeCompare(String(w)));return{prop:g.prop,values:["ALL",...k]}}),Me=new Set;c.filteredRows.forEach(g=>{var k,L,w;((w=(L=(k=g.file)==null?void 0:k.tags)!=null?L:g.tags)!=null?w:[]).forEach(_=>Me.add(_))});let Dt=Me.size?["ALL",...[...Me].sort()]:null,nt=this.makeScopedCb(i._notePath,c.viewId);await this.ui.buildView(a,i._notePath,c.viewId,c.displayRows,O,(f=i.perPage)!=null?f:10,c.totalRows,{showOpenFolderButton:(u=i.showOpenFolderButton)!=null?u:!0,showNewNoteButton:(p=i.showNewNoteButton)!=null?p:!0,showNewCanvasButton:(b=i.showNewCanvasButton)!=null?b:!0,showTagFilterButton:(T=i.showTagFilterButton)!=null?T:!0,showFrontmatterFilterButton:(M=i.showFrontmatterFilterButton)!=null?M:!0,showSearchBox:(D=i.showSearchBox)!=null?D:!0,showRefreshButton:(C=i.showRefreshButton)!=null?C:!1,folderPath:(I=i.path)!=null?I:null},rt,at,nt)}finally{this.skipStateWrite=!1,this._rendering=!1}}async rerender(e=!1,t){var n,i,o,s,c,d;for(v.d(`[CT] rerender(${t!=null?t:"auto"}) \u25B6 passive=${e}`);this._rendering;)await new Promise(h=>setTimeout(h,15));let r=t?this.models.get(t):(()=>{var f,u;let h=(u=(f=event==null?void 0:event.target)==null?void 0:f.closest)==null?void 0:u.call(f,"[data-cover-view]"),m=h?h.dataset.coverView:null;return m?this.models.get(m):[...this.models.values()].pop()})();if(!r&&t){let h=document.querySelector(`[data-cover-view="${t}"]`);if(h){let m=(o=(i=(n=this.app.plugins)==null?void 0:n.plugins)==null?void 0:i.dataview)==null?void 0:o.api;if(m){let f=this.app.metadataCache;f.resolved||await new Promise(u=>{var p;return(p=f.once)==null?void 0:p.call(f,"resolved",u)}),await this.renderAutoView(m,{},{sourcePath:(d=(c=(s=h.closest(".markdown-preview-view"))==null?void 0:s.file)==null?void 0:c.path)!=null?d:""},h,!0),r=this.models.get(t)}}}if(r){let h=ve(r.settings._notePath,r.viewId,"perPage");typeof h=="number"&&h>0&&(r.settings.perPage=h)}if(r&&!document.body.contains(r.host)){let h=document.querySelector(`[data-cover-view="${r.viewId}"]`);h?r.host=h:(this.models.delete(r.viewId),r=void 0)}if(!r){v.d("[CT] rerender \u2013 model not found -> abort");return}v.time(`[CT] compute+render ${t}`),await r.compute(e),await this.renderAutoView(r.dv,r.settings,r.ctx,r.host,e),v.timeEnd(`[CT] compute+render ${t}`);let a=r.viewId;setTimeout(()=>{this.models.forEach((h,m)=>{m!==a&&(document.body.contains(h.host)||this.models.delete(m))})},300)}getVal(e,t){var r,a,n,i;if(t==="__fmTitle"){let o=(a=(r=e==null?void 0:e.frontmatter)==null?void 0:r.title)!=null?a:e==null?void 0:e.title;return o&&String(o).trim()!==""?o:((i=(n=e==null?void 0:e.file)==null?void 0:n.basename)!=null?i:"").replace(/\.excalidraw$/,"")}return t.startsWith("file.")?t.split(".").reduce((o,s)=>o==null?void 0:o[s],e):e[t]}parseDateYMD(e){if(typeof e!="string")return null;let t=e.match(this.dateYMDRegex);if(!t)return null;let r=+t[1],a=+t[2],n=+t[3];return r<1e3||r>9999||a<1||a>12||n<1||n>31?null:new Date(r,a-1,n)}parseTimeHM(e){if(typeof e!="string")return null;let t=e.match(this.timeHMRegex);if(!t)return null;let r=+t[1],a=+t[2];if(r>23||a>59)return null;let n=new Date;return n.setHours(r,a,0,0),n}formatAsDate(e){if(e==null)return"";let t=this.parseDateYMD(String(e));if(!t)return String(e);let r=t.getFullYear(),a=t.getMonth()+1,n=t.getDate();return`${r}-${a<10?"0":""}${a}-${n<10?"0":""}${n}`}getSortValue(e){if(e==null)return"";let t=typeof e=="string"?e:String(e),r=this.parseDateYMD(t)||this.parseTimeHM(t);if(r)return r.getTime();let a=parseFloat(t);return isNaN(a)?t.toLowerCase():a}async suggester(e){return this.svc.suggester(e)}isFolderNote(e){var n,i;let t=e==null?void 0:e.file;if(!(t!=null&&t.path)||t.folder==null)return!1;let r=(n=t.basename)!=null?n:t.path.substring(t.path.lastIndexOf("/")+1,t.path.lastIndexOf(".")),a=(i=t.folder.split("/").pop())!=null?i:"";return r===a}makeScopedCb(e,t){return{...this.cb,rerender:async(r=e,a=t)=>{await this.rerender(!0,a)},sync:async(r,a,n,i)=>{be(e,t,n,i),await this.rerender(!0,t)},getState:(r,a,n)=>ve(r!=null?r:e,a!=null?a:t,n),setState:(r,a,n,i)=>be(r!=null?r:e,a!=null?a:t,n,i)}}refreshByBus(e){var r,a;let t=()=>{this.refreshTimer&&clearTimeout(this.refreshTimer),this.refreshTimer=window.setTimeout(()=>{this.models.forEach((n,i)=>this.rerender(!0,i)),this.refreshTimer=null},80)};if(e&&this.models.size){let n=this.models.values().next().value;if(n){let i=(r=n.settings.path)!=null?r:n.ctx.sourcePath.replace(/\/[^/]+$/,"");if(!e.path.startsWith(i+"/"))return}}if(this.models.size||document.querySelectorAll("[data-cover-view]").forEach(n=>{let i=n.dataset.coverView;this.models.has(i)}),e){let n=this.app.metadataCache;if(!(((a=n.getFileCache(e))==null?void 0:a.frontmatter)!=null)){let o=n.on("resolved",()=>{n.offref(o),t()});return}}t()}};var xt=["#ff6363","#ffa600","#ffcf00","#8aff80","#2effd3","#00ffff","#25c6fc","#3399ff","#9975e2","#cc66cc","#ff66ff","#ff66cc","#ff6699","#ff6666","#f06b60","#ed7732","#de9f00","#afff68","#53ffb4","#2f9eff"],Et=["#ff9999","#ffc04d","#ffe680","#b3ffb3","#80fff2","#80ffff","#99daff","#99c2ff","#c2a3e8","#df9edf","#ff99ff","#ff99e6","#ff99c2","#ff9999","#f4a38c","#f1b066","#eec900","#c5ff8a","#84ffc9","#74baff"];function ze(l,e={}){var n,i;let{colorPalette:t,colorPaletteDark:r,colorPaletteLight:a}=e;return l?((n=r!=null?r:t)!=null?n:xt).slice():((i=a!=null?a:t)!=null?i:Et).slice()}var ye=class{constructor(e){this.palette=e;this.noteColorMap={};this.colorPtr=0}assign(e){if(this.noteColorMap[e])return;if(this.palette.length===0){this.noteColorMap[e]={colorIndex:null};return}let t=this.colorPtr%this.palette.length;this.noteColorMap[e]={colorIndex:t},this.colorPtr++}colorOf(e){let t=this.noteColorMap[e];return!t||t.colorIndex==null?"#999":this.palette[t.colorIndex]}legend(){let e={};return Object.keys(this.noteColorMap).forEach(t=>{e[t]=this.colorOf(t)}),e}reset(){this.colorPtr=0,Object.keys(this.noteColorMap).forEach(e=>delete this.noteColorMap[e])}};var ke=class{constructor(e,t,r={},a){var n,i,o,s,c,d;(n=r.statusField)!=null||(r.statusField="obsidianUIMode"),(i=r.statusDoneValue)!=null||(r.statusDoneValue="preview"),(o=r.excludeDone)!=null||(r.excludeDone=!0),(s=r.startField)!=null||(r.startField="created"),(c=r.endField)!=null||(r.endField="end"),this.app=e,this.dv=t,this.settings=r,this.isDark=document.body.classList.contains("theme-dark"),this.palette=ze(this.isDark,r),this.gPalette=new ye(this.palette),!((d=t.current)!=null&&d.call(t))&&(a!=null&&a.sourcePath)&&(t.current=()=>t.page(a.sourcePath))}compute(){let{pages:e,year:t,month:r,daysInMonth:a}=this.collectPages(),n=this.gPalette.legend();return{pages:e,year:t,month:r,daysInMonth:a,legend:n,palette:[...this.palette],startField:this.settings.startField,endField:this.settings.endField}}collectPages(){var f,u;let e=new Date,t=e.getFullYear(),r=e.getMonth(),a=new Date(t,r+1,0).getDate(),n=(u=(f=this.dv).current)==null?void 0:u.call(f),i=Array.isArray(this.settings.customPages)?this.settings.customPages:this.settings.path?this.dv.pages(`"${this.settings.path}"`).array():n!=null&&n.file?this.dv.pages().where(p=>p.file.folder===n.file.folder&&p.file.path!==n.file.path).array():[],o=this.settings.statusField,s=this.settings.statusDoneValue.toLowerCase(),c=this.settings.excludeDone!==!1,d=this.settings.startField,h=this.settings.endField,m=i.filter(p=>{var b,T;return((b=p.file)==null?void 0:b.extension)==="canvas"||c&&((T=p[o])!=null?T:"").toString().toLowerCase()===s?!1:!!p[d]&&!!p[h]});return m.forEach(p=>{var T;let b=p.title||((T=p.file)==null?void 0:T.name)||"Untitled";this.gPalette.assign(b)}),{pages:m,year:t,month:r,daysInMonth:a}}colorFor(e,t,r){var f,u;let{pages:a,year:n,month:i,startField:o,endField:s}=r,c=a.find(p=>{var b;return(p.title||((b=p.file)==null?void 0:b.name)||"Untitled")===e});if(!c)return null;let d=(f=this.dv.date(c[o]))==null?void 0:f.toJSDate(),h=(u=this.dv.date(c[s]))==null?void 0:u.toJSDate();if(!d||!h)return null;let m=new Date(n,i,t);return m>=d&&m<=h?this.gPalette.colorOf(e):null}};var Te=class{buildGantt(e,t,r,a,n=!0,i=!1){let o=document.createElement("div");o.className="gantt-view";let s=document.createElement("div");s.className="gantt-month-year",s.textContent=t,o.appendChild(s);let c=document.createElement("div");if(c.className="gantt-container",c.innerHTML=r,o.appendChild(c),n){let d=document.createElement("div");d.className="gantt-legend",Object.entries(a).forEach(([h,m])=>{let f=document.createElement("div");f.className="gantt-legend-item";let u=document.createElement("span");u.className="gantt-legend-color",u.style.background=m,f.appendChild(u);let p=document.createElement("span");p.textContent=h,f.appendChild(p),d.appendChild(f)}),o.appendChild(d)}return e.appendChild(o),o}colorize(e,t){document.querySelectorAll(".gantt-table td[data-note]").forEach(r=>{let a=r.dataset.note,n=Number(r.dataset.day),i=e(a,n);i?(r.style.setProperty("--gantt-color",i),r.classList.add("is-filled")):(r.classList.remove("is-filled"),r.style.removeProperty("--gantt-color"));let o=t(a,n);o&&r.classList.add(`gantt-${o}`)})}highlightToday(){let e=new Date().getDate();document.querySelectorAll(`.gantt-table td[data-day='${e}']`).forEach(t=>t.classList.add("is-today"))}};var xe=class{constructor(e){this.app=e;this.ui=new Te;this._rendering=!1;this.busCb=this.refreshByBus.bind(this),P.i.on(this.busCb),this.__cover_unload__=()=>P.i.off(this.busCb)}async renderView(e,t={},r,a){var n,i,o,s,c,d,h;if(!this._rendering){this._rendering=!0;try{(n=t.renderInteractiveBelow)!=null||(t.renderInteractiveBelow=!0),(i=t.showLegend)!=null||(t.showLegend=!0),(o=t.forceInteractiveBelow)!=null||(t.forceInteractiveBelow=!1),t.forceInteractiveBelow&&(t.renderInteractiveBelow=!0);let m=(s=e.current)==null?void 0:s.call(e);if((!m||!m.file)&&(r!=null&&r.sourcePath)&&(m=e.page(r.sourcePath)),!(m!=null&&m.file)){v.w("[Gantt] current page not found \u2013 abort");return}let f=e.current;e.current=()=>m;let u=new ke(this.app,e,t,r),p=u.compute(),b;a?b=a:b=e.container;let M=`${new Intl.DateTimeFormat("en",{month:"long"}).format(new Date(p.year,p.month,1))} ${p.year}`,D=this.ui.buildGantt(b,M,this.buildTableHTML(p),p.legend,(c=t.showLegend)!=null?c:!0,t.renderInteractiveBelow);if(this.ui.colorize((C,I)=>u.colorFor(C,I,p),(C,I)=>{let{startField:B,endField:N,pages:Pe,year:re,month:ae}=p,J=Pe.find(ne=>{var O;return(ne.title||((O=ne.file)==null?void 0:O.name))===C});if(!J)return null;let Y=e.date(J[B]),q=e.date(J[N]);return Y&&Y.year===re&&Y.month-1===ae&&Y.day===I?"start":q&&q.year===re&&q.month-1===ae&&q.day===I?"end":null}),this.ui.highlightToday(),t.renderInteractiveBelow){let C=(d=window.coverTable)==null?void 0:d.engine;if(C){let I=D.createDiv({cls:"ct-it-mount"});r&&await C.renderAutoView(e,(h=t.interactiveOptions)!=null?h:{},r,I)}}if(t.debugLegend){let C=D.createEl("pre",{cls:"gantt-debug"});C.innerText=JSON.stringify(p.legend,null,2)}e.current=f}finally{this._rendering=!1}}}buildTableHTML(e){let{pages:t,daysInMonth:r}=e,n=`<thead><tr><th class="gantt-corner-col"></th>${Array.from({length:r},(o,s)=>`<th class="gantt-day-col">${String(s+1).padStart(2,"0")}</th>`).join("")}</tr></thead>`,i="<tbody>";return t.forEach(o=>{var c;let s=o.title||((c=o.file)==null?void 0:c.name)||"Untitled";i+=`<tr><td class="gantt-note-col">${s}</td>`;for(let d=1;d<=r;d++)i+=`<td class="gantt-cell" data-note="${s}" data-day="${d}"></td>`;i+="</tr>"}),i+="</tbody>",`<table class="gantt-table">${n}${i}</table>`}refreshByBus(e){var s,c,d,h,m;if(this._rendering||(e==null?void 0:e.extension)==="canvas")return;let t=(d=(c=(s=this.app.plugins)==null?void 0:s.plugins)==null?void 0:c.dataview)==null?void 0:d.api;if(!t){v.w("[Gantt] Dataview API not available.");return}let r=this.app.workspace.getActiveFile();if(!r||r.extension==="canvas")return;if(!r){v.w("[Gantt] No active file found.");return}if(e&&e.path!==r.path)return;let a={renderInteractiveBelow:!0,showLegend:!0},n=document.querySelector(".gantt-view");if(!n){v.w("[Gantt] Gantt host container not found.");return}let i=n.parentElement;if(!i){v.w("[Gantt] Gantt host parent element not found.");return}n.remove();let o={sourcePath:r.path,frontmatter:(m=(h=this.app.metadataCache.getFileCache(r))==null?void 0:h.frontmatter)!=null?m:{},getSectionInfo:()=>null,docId:"",addChild:()=>null};this.renderView(t,a,o,i)}};var Ee=class{constructor(e){this.plugin=e;this.cnt=[0,0,0,0,0,0];this.lastPath=null;this.styleInjected=!1;this.HIDE_ID="ct-hn-hide"}register(){this.injectBaseStyleOnce(),this.injectHideStyle(),this.plugin.registerMarkdownPostProcessor((e,t)=>{t.sourcePath!==this.lastPath&&(this.cnt.fill(0),this.lastPath=t.sourcePath),e.querySelectorAll("h1,h2,h3,h4,h5,h6").forEach(r=>this.decorate(r))},100),this.plugin.registerEvent(this.plugin.app.workspace.on("file-open",()=>{this.cnt.fill(0),this.lastPath=null})),this.plugin.registerEvent(this.plugin.app.workspace.on("css-change",()=>this.injectHideStyle()))}decorate(e){let t=Number(e.tagName[1]);if(!t)return;for(let n=t;n<6;n++)this.cnt[n]=0;this.cnt[t-1]++;let r=this.cnt.slice(0,t).join(".")+" ",a=e.querySelector(".ct-hn-label");a||(a=document.createElement("span"),a.className="ct-hn-label",e.prepend(a)),a.textContent=r}injectBaseStyleOnce(){if(this.styleInjected)return;this.styleInjected=!0;let e=`
      /* HeaderNumbering \u2013 \uAE30\uC874 CSS counter \uC81C\uAC70 */
      .markdown-preview-view h1::before,
      .markdown-preview-view h2::before,
      .markdown-preview-view h3::before,
      .markdown-preview-view h4::before,
      .markdown-preview-view h5::before,
      .markdown-preview-view h6::before{ content:none!important; }

      /* \uC0C8 \uB77C\uBCA8(span) \uACF5\uD1B5 \uC2A4\uD0C0\uC77C */
      .ct-hn-label{ font-weight:bold; margin-right:.3em; }
    `,t=document.createElement("style");t.id="ct-hn-style",t.textContent=e,document.head.appendChild(t)}injectHideStyle(){var r,a;let e=(a=(r=this.plugin.settings)==null?void 0:r.enableHeaderNumbering)!=null?a:!0,t=document.getElementById(this.HIDE_ID);e?t==null||t.remove():(t||(t=document.createElement("style"),t.id=this.HIDE_ID,document.head.appendChild(t)),t.textContent=".ct-hn-label{ display:none!important; }")}destroy(){this.cnt.fill(0),this.lastPath=null}};var Ce=require("@codemirror/view"),We=require("@codemirror/state");function Lt(l){let e=Object.keys(l).join("");if(!e)return[];let t=new RegExp(`^\\s*(?:[-*+]|\\d+[.)])\\s+([${e}])\\s+`),r=a=>{let n=new We.RangeSetBuilder,i=a.state.doc.length;for(let{from:o,to:s}of a.visibleRanges){let c=o;for(;c<=s&&c<i;){let d=a.state.doc.lineAt(c),h=t.exec(d.text);if(h){let m=h[1];n.add(d.from,d.from,Ce.Decoration.line({attributes:{class:"lc-cm6-row","data-callout-char":m}}))}if(d.to<=c)break;c=d.to+1}}return n.finish()};return Ce.ViewPlugin.fromClass(class{constructor(a){this.decorations=r(a)}update(a){(a.docChanged||a.viewportChanged)&&(this.decorations=r(a.view))}},{decorations:a=>a.decorations})}var Le=class{constructor(e){this.plugin=e;this.styleEl=null;this.cmExt=[];this.cmDispose=null;this.map={};this.rebuild()}rebuild(){var e;this.map={},((e=this.plugin.settings.listCallouts)!=null?e:[]).forEach(t=>this.map[t.char]=t),this.injectCss(),this.cmDispose&&(this.cmDispose(),this.cmDispose=null),this.cmExt=Lt(this.map),this.cmExt.length&&this.plugin.registerEditorExtension(this.cmExt)}editorExtensions(){return this.cmExt}postProcessor(){return e=>{Object.keys(this.map).length&&e.querySelectorAll("li").forEach(t=>{var s;let r=(s=t.textContent)!=null?s:"",a=r.trim().charAt(0);if(!this.map[a])return;let n=t.querySelector("a.internal-link, a.external-link, a:not([href^='#'])"),i;if(n)i=n;else{let c=r.trim().slice(1).trim();i=document.createTextNode(c||" ")}t.replaceChildren();let o=document.createElement("span");o.className="lc-pill",o.appendChild(i),t.appendChild(o),t.classList.add("lc-list-callout"),t.setAttribute("data-callout-char",a),n&&t.addEventListener("dblclick",()=>{t.closest(".markdown-reading-view")&&n.dispatchEvent(new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window}))})})}}injectCss(){this.styleEl||(this.styleEl=document.createElement("style"),this.styleEl.id="ct-lc-style",document.head.appendChild(this.styleEl));let e=`
    /* \uC77C\uBC18 \uB9AC\uC2A4\uD2B8 \uC720\uC9C0, \uCF5C\uC544\uC6C3 \uC548\uC5D0\uC11C\uB9CC \uBD88\uB9BF \uC228\uAE40 */
  li.lc-list-callout .list-bullet{display:none!important;}

  li.lc-list-callout{
    list-style:none!important;
    margin:0!important;
    padding:0!important;
    font: 600 1em/1 var(--font-interface);
  }
  li.lc-list-callout::marker{content:""!important}

  .lc-pill{
    display:block;
    width:100%;
    padding:6px 10px;
    border-radius:6px;
    font-weight:600;
    margin:0px 0px 5px 0px;
    cursor: pointer;
  }
  .lc-pill:hover{
    transition:all .3s ease;
    transform:scale(.95);
  }

  /* \uB9C1\uD06C\u2006\u2192 \u201C\uC77C\uBC18 \uD14D\uC2A4\uD2B8\u201D \uCC98\uB9AC */
  .lc-pill a{
    color:inherit!important;
    text-decoration:none!important;
  }

  /* hover \uAC15\uC870\xB7\uC678\uACFD \uBC30\uACBD \uC81C\uAC70 (pill \uB0B4\uBD80 \uBC30\uACBD\uB9CC \uD45C\uC2DC) */
  .markdown-reading-view li.lc-list-callout:hover{
    background:unset!important;
  }

  /* \uD3B8\uC9D1\uBAA8\uB4DC CM6 \uD589 \uB370\uCF54 \uC601\uD5A5 \uC5C6\uC774, \uC77D\uAE30\uBAA8\uB4DC \uC804\uC6A9 \uBC30\uACBD\uB9CC \uC720\uC9C0 */
  .markdown-reading-view li.lc-list-callout .cm-line{background:transparent!important;}
  `;for(let t in this.map){let r=this.map[t];e+=`
    .theme-light li[data-callout-char='${t}'] .lc-pill{
      background:${r.bgLight}!important;
      color:${r.fgLight}!important;
    }
    .theme-dark  li[data-callout-char='${t}'] .lc-pill{
      background:${r.bgDark}!important;
      color:${r.fgDark}!important;
    }
    li.lc-list-callout[data-callout-char='${t}'] .lc-pill::before{ 
      content:""; 
    }`}this.styleEl.textContent=e}};var Ke=`/*****************************************************************\r
 *  Cover-Table  \u2013  Global Color \xB7 Style Tokens  (\uCD5C\uC885 \uD1B5\uD569\uD310)\r
 *  \xB7 \uAE30\uC874 \uAE30\uB2A5 \u201C\uBAA8\uB450\u201D \uBCF4\uC874  \xB7 \uC694\uC57D/\uD568\uCD95/\uC0AD\uC81C \uC5C6\uC74C\r
 *  \xB7 \uD14C\uC774\uBE14\xB7\uC774\uBBF8\uC9C0 \uC0C9\uC0C1\uC740 \uB2E8\uC77C \uD1A0\uD070 + \uB2E4\uD06C/\uB77C\uC774\uD2B8 \uC790\uB3D9 \uC624\uBC84\uB77C\uC774\uB4DC\r
 *  \xB7 \uD5E4\uB529\uC740 \uBB34\uC9C0\uAC1C 6\uC0C9(\uD1A0\uD070)\uC73C\uB85C \uC9C1\uAD00\uC801 \uAD6C\uBD84\r
 *****************************************************************/\r
:root{\r
  /* \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 \uBCA0\uC774\uC2A4 / \uACF5\uD1B5 \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 */\r
  --ct-base-white        : #ffffff;\r
  --ct-base-black        : #000000;\r
\r
  /* \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 \uD0D0\uC0C9\uAE30 \uD3F4\uB354 \uC0C9\uC0C1 \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 */\r
  /* 0 \uB2E8\uACC4(\uCD5C\uC0C1\uC704) */\r
  --ct-folder-lvl0-01-dark  : #91dcff;   --ct-folder-lvl0-01-light  : #0076ad;\r
  --ct-folder-lvl0-25-dark  : #fffcab;   --ct-folder-lvl0-25-light  : #989300;\r
  --ct-folder-lvl0-68-dark  : #ffb3ab;   --ct-folder-lvl0-68-light  : #9b1000;\r
  /* 1 \uB2E8\uACC4(\uB0B4\uBD80) */\r
  --ct-folder-lvl1-01-dark  : #2ebdff;   --ct-folder-lvl1-01-light  : #003d5a;\r
  --ct-folder-lvl1-25-dark  : #ffdf3e;   --ct-folder-lvl1-25-light  : #453a01;\r
  --ct-folder-lvl1-68-dark  : #ff7e4f;   --ct-folder-lvl1-68-light  : #461300;\r
  /* \u2018Q)\u2019 \uD3F4\uB354\uB178\uD2B8 */\r
  --ct-folder-q-dark        : #848484;   --ct-folder-q-light        : #848484;\r
\r
  /* \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 \uBCF8\uBB38 \uD14D\uC2A4\uD2B8 \uC2A4\uD0C0\uC77C \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 */\r
  --ct-bold-dark            : rgb(255,188,188);\r
  --ct-bold-light           : rgb(138,0,119);\r
\r
  /* \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 \uD5E4\uB529(\uBB34\uC9C0\uAC1C \uD1A0\uD070: \uC77D\uAE30+\uD3B8\uC9D1 \uACF5\uD1B5) \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 */\r
  --ct-h1-dark : #ff5555;  --ct-h1-light : #ff5555;   /* red    */\r
  --ct-h2-dark : #ffae42;  --ct-h2-light : #ffae42;   /* orange */\r
  --ct-h3-dark : #f7ff50;  --ct-h3-light : #f7ff50;   /* yellow */\r
  --ct-h4-dark : #4cd964;  --ct-h4-light : #4cd964;   /* green  */\r
  --ct-h5-dark : #5ac8fa;  --ct-h5-light : #5ac8fa;   /* blue   */\r
  --ct-h6-dark : #af52de;  --ct-h6-light : #af52de;   /* violet */\r
\r
  /* \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 \uB9AC\uC2A4\uD2B8 \uBD88\uB9BF/\uBC88\uD638 \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 */\r
  --ct-bullet-dark          : rgb(89,89,223);\r
  --ct-bullet-light         : rgb(54,54,190);\r
  --ct-ol-marker-dark       : red;\r
  --ct-ol-marker-light      : red;\r
\r
  /* \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 \uD14C\uC774\uBE14(\uB2E8\uC77C \uD1A0\uD070) \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 */\r
  --ct-table-border         : #c0c0c0;         /* light \uAE30\uBCF8, dark \uBAA8\uB4DC\uC5D0\uC11C \uC7AC\uC815\uC758 */\r
  --ct-table-shadow         : rgba(0,0,0,.10);\r
  --ct-table-row-even       : rgba(0,0,0,.03);\r
  --ct-table-row-hover      : rgba(0,0,0,.07);\r
\r
  /* \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 \uC774\uBBF8\uC9C0(\uB2E8\uC77C \uD1A0\uD070) \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 */\r
  --ct-image-border         : #d0d0d0;\r
  --ct-image-shadow         : rgba(0,0,0,.10);\r
}\r
\r
/* \uB2E4\uD06C \uBAA8\uB4DC \uC624\uBC84\uB77C\uC774\uB4DC \u2013 \uC790\uB3D9 \uC0C9\uC0C1 \uC804\uD658 */\r
.theme-dark:root{\r
  --image-border            : #555555;\r
  --image-shadow            : rgba(0,0,0,.60);\r
\r
  /* \uD14C\uC774\uBE14 \uD1A0\uD070(\uD22C\uBA85\xB7\uBC30\uACBD\uACC4\uC5F4) */\r
  --ct-table-border         : #444444;\r
  --ct-table-shadow         : rgba(0,0,0,.55);\r
  --ct-table-row-even       : transparent;\r
  --ct-table-row-hover      : rgba(255,255,255,.07);\r
}\r
\r
/* \uB77C\uC774\uD2B8 \uBAA8\uB4DC \uC624\uBC84\uB77C\uC774\uB4DC \u2013 \uC790\uB3D9 \uC0C9\uC0C1 \uC804\uD658 */\r
.theme-light:root{\r
  --image-border            : #d0d0d0;\r
  --image-shadow            : rgba(0,0,0,.10);\r
\r
  --ct-table-border         : #c0c0c0;\r
  --ct-table-shadow         : rgba(0,0,0,.10);\r
  --ct-table-row-even       : rgba(0,0,0,.03);\r
  --ct-table-row-hover      : rgba(0,0,0,.07);\r
}\r
\r
/*****************************************************************\r
 *  \uACF5\uD1B5 \uD0C0\uC774\uD3EC\uADF8\uB798\uD53C / \uB808\uC774\uC544\uC6C3\r
 *****************************************************************/\r
p               { text-indent:25px; margin:5px 0!important; text-align:justify; }\r
li p            { text-indent:0px !important;}\r
li              { margin-block:5px; }\r
.hr.cm-line     { text-indent:0!important; }\r
.cm-line        { font-size:1em!important; text-align:justify; text-indent:25px; line-height:1.5em; }\r
.cm-s-obsidian .cm-line.HyperMD-header { padding:0!important; text-indent:0; }\r
.HyperMD-list-line.HyperMD-list-line-1.cm-line { text-indent:-50px!important; padding-inline-start:40px!important; }\r
\r
/*****************************************************************\r
 *  \uD0D0\uC0C9\uAE30 \uD3F4\uB354 \uC0C9\uC0C1 (\uBAA8\uB4E0 \uB2E8\uACC4\xB7\uBAA8\uB4DC \uBCF4\uC874)\r
 *****************************************************************/\r
\r
/* \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r
   0 \uB2E8\uACC4(\uCD5C\uC0C1\uC704)  \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500*/\r
/* DARK */\r
.theme-dark .nav-files-container .tree-item.nav-folder> .tree-item-self[data-path^="0_"],\r
.theme-dark .nav-files-container .tree-item.nav-folder> .tree-item-self[data-path^="1_"]{\r
  color:var(--ct-folder-lvl0-01-dark)!important;\r
}\r
.theme-dark .nav-files-container .tree-item.nav-folder> .tree-item-self[data-path^="2_"],\r
.theme-dark .nav-files-container .tree-item.nav-folder> .tree-item-self[data-path^="3_"],\r
.theme-dark .nav-files-container .tree-item.nav-folder> .tree-item-self[data-path^="4_"],\r
.theme-dark .nav-files-container .tree-item.nav-folder> .tree-item-self[data-path^="5_"]{\r
  color:var(--ct-folder-lvl0-25-dark)!important;\r
}\r
.theme-dark .nav-files-container .tree-item.nav-folder> .tree-item-self[data-path^="6_"],\r
.theme-dark .nav-files-container .tree-item.nav-folder> .tree-item-self[data-path^="7_"],\r
.theme-dark .nav-files-container .tree-item.nav-folder> .tree-item-self[data-path^="8_"]{\r
  color:var(--ct-folder-lvl0-68-dark)!important;\r
}\r
\r
/* LIGHT */\r
.theme-light .nav-files-container .tree-item.nav-folder> .tree-item-self[data-path^="0_"],\r
.theme-light .nav-files-container .tree-item.nav-folder> .tree-item-self[data-path^="1_"]{\r
  color:var(--ct-folder-lvl0-01-light)!important;\r
}\r
.theme-light .nav-files-container .tree-item.nav-folder> .tree-item-self[data-path^="2_"],\r
.theme-light .nav-files-container .tree-item.nav-folder> .tree-item-self[data-path^="3_"],\r
.theme-light .nav-files-container .tree-item.nav-folder> .tree-item-self[data-path^="4_"],\r
.theme-light .nav-files-container .tree-item.nav-folder> .tree-item-self[data-path^="5_"]{\r
  color:var(--ct-folder-lvl0-25-light)!important;\r
}\r
.theme-light .nav-files-container .tree-item.nav-folder> .tree-item-self[data-path^="6_"],\r
.theme-light .nav-files-container .tree-item.nav-folder> .tree-item-self[data-path^="7_"],\r
.theme-light .nav-files-container .tree-item.nav-folder> .tree-item-self[data-path^="8_"]{\r
  color:var(--ct-folder-lvl0-68-light)!important;\r
}\r
\r
/* \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r
   1 \uB2E8\uACC4(\uB0B4\uBD80)  \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500*/\r
/* DARK */\r
.theme-dark .nav-files-container .tree-item.nav-folder .tree-item-children .tree-item.nav-folder> .tree-item-self[data-path^="0_"],\r
.theme-dark .nav-files-container .tree-item.nav-folder .tree-item-children .tree-item.nav-folder> .tree-item-self[data-path^="1_"]{\r
  color:var(--ct-folder-lvl1-01-dark)!important;\r
}\r
.theme-dark .nav-files-container .tree-item.nav-folder .tree-item-children .tree-item.nav-folder> .tree-item-self[data-path^="2_"],\r
.theme-dark .nav-files-container .tree-item.nav-folder .tree-item-children .tree-item.nav-folder> .tree-item-self[data-path^="3_"],\r
.theme-dark .nav-files-container .tree-item.nav-folder .tree-item-children .tree-item.nav-folder> .tree-item-self[data-path^="4_"],\r
.theme-dark .nav-files-container .tree-item.nav-folder .tree-item-children .tree-item.nav-folder> .tree-item-self[data-path^="5_"]{\r
  color:var(--ct-folder-lvl1-25-dark)!important;\r
}\r
.theme-dark .nav-files-container .tree-item.nav-folder .tree-item-children .tree-item.nav-folder> .tree-item-self[data-path^="6_"],\r
.theme-dark .nav-files-container .tree-item.nav-folder .tree-item-children .tree-item.nav-folder> .tree-item-self[data-path^="7_"],\r
.theme-dark .nav-files-container .tree-item.nav-folder .tree-item-children .tree-item.nav-folder> .tree-item-self[data-path^="8_"]{\r
  color:var(--ct-folder-lvl1-68-dark)!important;\r
}\r
\r
/* LIGHT */\r
.theme-light .nav-files-container .tree-item.nav-folder .tree-item-children .tree-item.nav-folder> .tree-item-self[data-path^="0_"],\r
.theme-light .nav-files-container .tree-item.nav-folder .tree-item-children .tree-item.nav-folder> .tree-item-self[data-path^="1_"]{\r
  color:var(--ct-folder-lvl1-01-light)!important;\r
}\r
.theme-light .nav-files-container .tree-item.nav-folder .tree-item-children .tree-item.nav-folder> .tree-item-self[data-path^="2_"],\r
.theme-light .nav-files-container .tree-item.nav-folder .tree-item-children .tree-item.nav-folder> .tree-item-self[data-path^="3_"],\r
.theme-light .nav-files-container .tree-item.nav-folder .tree-item-children .tree-item.nav-folder> .tree-item-self[data-path^="4_"],\r
.theme-light .nav-files-container .tree-item.nav-folder .tree-item-children .tree-item.nav-folder> .tree-item-self[data-path^="5_"]{\r
  color:var(--ct-folder-lvl1-25-light)!important;\r
}\r
.theme-light .nav-files-container .tree-item.nav-folder .tree-item-children .tree-item.nav-folder> .tree-item-self[data-path^="6_"],\r
.theme-light .nav-files-container .tree-item.nav-folder .tree-item-children .tree-item.nav-folder> .tree-item-self[data-path^="7_"],\r
.theme-light .nav-files-container .tree-item.nav-folder .tree-item-children .tree-item.nav-folder> .tree-item-self[data-path^="8_"]{\r
  color:var(--ct-folder-lvl1-68-light)!important;\r
}\r
\r
/* \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r
   \u2018Q)\u2019 \uD3F4\uB354\uB178\uD2B8 \uC0C9\uC0C1  \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500*/\r
/* DARK */\r
.theme-dark .nav-files-container .tree-item.nav-folder .tree-item-children .tree-item-self.is-clickable.mod-collapsible.has-folder-note[data-path*="Q)"]{\r
  color:var(--ct-folder-q-dark)!important;\r
}\r
/* LIGHT */\r
.theme-light .nav-files-container .tree-item.nav-folder .tree-item-children .tree-item-self.is-clickable.mod-collapsible.has-folder-note[data-path*="Q)"]{\r
  color:var(--ct-folder-q-light)!important;\r
}\r
\r
\r
/*****************************************************************\r
 *  \uBCFC\uB4DC \uCEEC\uB7EC (\uAE30\uC874 \uAE30\uB2A5 \uC720\uC9C0)\r
 *****************************************************************/\r
.theme-dark .markdown-preview-view strong,\r
.theme-dark .markdown-preview-view b,\r
.theme-dark .markdown-source-view.mod-cm6 .cm-content strong,\r
.theme-dark .markdown-source-view.mod-cm6 .cm-content b,\r
.theme-dark .markdown-source-view.mod-cm6 .cm-content .cm-strong{\r
  font-weight:normal!important; color:var(--ct-bold-dark)!important;\r
}\r
.theme-light .markdown-preview-view strong,\r
.theme-light .markdown-preview-view b,\r
.theme-light .markdown-source-view.mod-cm6 .cm-content strong,\r
.theme-light .markdown-source-view.mod-cm6 .cm-content b,\r
.theme-light .markdown-source-view.mod-cm6 .cm-content .cm-strong{\r
  font-weight:normal!important; color:var(--ct-bold-light)!important;\r
}\r
\r
/*****************************************************************\r
 *  \uD5E4\uB529 \u2013 \uBB34\uC9C0\uAC1C + \uBC11\uC904 100% + \uC544\uC774\uCF58 \uC6B0\uCE21\r
 *****************************************************************/\r
.markdown-preview-view h1,\r
.markdown-preview-view h2,\r
.markdown-preview-view h3,\r
.markdown-preview-view h4,\r
.markdown-preview-view h5,\r
.markdown-preview-view h6{\r
  display:flex!important; align-items:center; width:100%!important;\r
  font-size:1.5em; line-height:1em; margin:5px 0!important; border-bottom-style:outset;\r
}\r
.markdown-preview-view h1{color:var(--ct-h1-dark); border-bottom-color:var(--ct-h1-dark);}\r
.markdown-preview-view h2{color:var(--ct-h2-dark); border-bottom-color:var(--ct-h2-dark);}\r
.markdown-preview-view h3{color:var(--ct-h3-dark); border-bottom-color:var(--ct-h3-dark);}\r
.markdown-preview-view h4{color:var(--ct-h4-dark); border-bottom-color:var(--ct-h4-dark);}\r
.markdown-preview-view h5{color:var(--ct-h5-dark); border-bottom-color:var(--ct-h5-dark);}\r
.markdown-preview-view h6{color:var(--ct-h6-dark); border-bottom-color:var(--ct-h6-dark);}\r
.theme-light .markdown-preview-view h1{color:var(--ct-h1-light); border-bottom-color:var(--ct-h1-light);}\r
.theme-light .markdown-preview-view h2{color:var(--ct-h2-light); border-bottom-color:var(--ct-h2-light);}\r
.theme-light .markdown-preview-view h3{color:var(--ct-h3-light); border-bottom-color:var(--ct-h3-light);}\r
.theme-light .markdown-preview-view h4{color:var(--ct-h4-light); border-bottom-color:var(--ct-h4-light);}\r
.theme-light .markdown-preview-view h5{color:var(--ct-h5-light); border-bottom-color:var(--ct-h5-light);}\r
.theme-light .markdown-preview-view h6{color:var(--ct-h6-light); border-bottom-color:var(--ct-h6-light);}\r
.markdown-preview-view h1 .collapse-indicator,\r
.markdown-preview-view h2 .collapse-indicator,\r
.markdown-preview-view h3 .collapse-indicator,\r
.markdown-preview-view h4 .collapse-indicator,\r
.markdown-preview-view h5 .collapse-indicator,\r
.markdown-preview-view h6 .collapse-indicator{margin-left:auto;}\r
\r
.cm-header-1{font-size:1.5em!important;line-height:2em;color:var(--ct-h1-dark);border-bottom:outset 1px var(--ct-h1-dark);}\r
.cm-header-2{font-size:1.5em!important;line-height:2em;color:var(--ct-h2-dark);border-bottom:outset 1px var(--ct-h2-dark);}\r
.cm-header-3{font-size:1.5em!important;line-height:2em;color:var(--ct-h3-dark);border-bottom:outset 1px var(--ct-h3-dark);}\r
.cm-header-4{font-size:1.5em!important;line-height:2em;color:var(--ct-h4-dark);border-bottom:outset 1px var(--ct-h4-dark);}\r
.cm-header-5{font-size:1.5em!important;line-height:2em;color:var(--ct-h5-dark);border-bottom:outset 1px var(--ct-h5-dark);}\r
.cm-header-6{font-size:1.5em!important;line-height:2em;color:var(--ct-h6-dark);border-bottom:outset 1px var(--ct-h6-dark);}\r
.theme-light .cm-header-1{color:var(--ct-h1-light);border-bottom-color:var(--ct-h1-light);}\r
.theme-light .cm-header-2{color:var(--ct-h2-light);border-bottom-color:var(--ct-h2-light);}\r
.theme-light .cm-header-3{color:var(--ct-h3-light);border-bottom-color:var(--ct-h3-light);}\r
.theme-light .cm-header-4{color:var(--ct-h4-light);border-bottom-color:var(--ct-h4-light);}\r
.theme-light .cm-header-5{color:var(--ct-h5-light);border-bottom-color:var(--ct-h5-light);}\r
.theme-light .cm-header-6{color:var(--ct-h6-light);border-bottom-color:var(--ct-h6-light);}\r
\r
/*****************************************************************\r
 *  \uB9AC\uC2A4\uD2B8 \uB9C8\uCEE4 (\uAE30\uB2A5 \uC644\uC804 \uBCF4\uC874)\r
 *****************************************************************/\r
/* \u2500\u2500 *  DARK MODE  (theme-dark) \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 */\r
.theme-dark .list-number,\r
.theme-dark ol>li::marker,\r
.theme-dark ul>li::marker {\r
  color: var(--ct-ol-marker-dark);\r
}\r
\r
.theme-dark .markdown-reading-view ul>li>.list-bullet:after,\r
.theme-dark .markdown-source-view.mod-cm6 .HyperMD-list-line-1 .list-bullet:after {\r
  height: 5px; width: 5px; border-radius: 50%;\r
  background: var(--ct-bullet-dark) !important;\r
}\r
\r
.theme-dark .markdown-reading-view ul>li>ul>li>.list-bullet:after,\r
.theme-dark .markdown-source-view.mod-cm6 .HyperMD-list-line-2 .list-bullet:after {\r
  height: 1px; width: 7px; border-radius: 0;\r
  background: var(--ct-bullet-dark) !important;\r
}\r
\r
.theme-dark .markdown-reading-view ul>li>ul>li>ul>li>.list-bullet:after,\r
.theme-dark .markdown-source-view.mod-cm6 .HyperMD-list-line-3 .list-bullet:after {\r
  height: 4px; width: 4px;\r
  background: transparent;\r
  border: 1px solid var(--ct-bullet-dark) !important; border-radius: 50%;\r
}\r
\r
.theme-dark .markdown-reading-view ul>li>ul>li>ul>li>ul>li>.list-bullet:after,\r
.theme-dark .markdown-source-view.mod-cm6 .HyperMD-list-line-4 .list-bullet:after {\r
  height: 5px; width: 5px; border-radius: 0;\r
  background: var(--ct-bullet-dark) !important;\r
}\r
\r
.theme-dark .markdown-reading-view ul>li>ul>li>ul>li>ul>li>ul>li>.list-bullet:after,\r
.theme-dark .markdown-source-view.mod-cm6 .HyperMD-list-line-5 .list-bullet:after {\r
  height: 1px; width: 7px; border-radius: 0;\r
  background: var(--ct-bullet-dark) !important;\r
}\r
\r
.theme-dark .markdown-reading-view ul>li>ul>li>ul>li>ul>li>ul>li>ul>li>.list-bullet:after,\r
.theme-dark .markdown-source-view.mod-cm6 .HyperMD-list-line-6 .list-bullet:after {\r
  height: 4px; width: 4px;\r
  background: transparent;\r
  border: 1px solid var(--ct-bullet-dark) !important;\r
}\r
\r
.theme-dark .markdown-reading-view ul>li>ul>li>ul>li>ul>li>ul>li>ul>li>ul>li>.list-bullet:after,\r
.theme-dark .markdown-source-view.mod-cm6 .HyperMD-list-line-7 .list-bullet:after {\r
  height: 2px; width: 2px; border-radius: 50%;\r
  background: var(--ct-bullet-dark) !important;\r
}\r
\r
\r
/* \u2500\u2500 LIGHT MODE  (theme-light) \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 */\r
.theme-light .list-number,\r
.theme-light ol>li::marker,\r
.theme-light ul>li::marker {\r
  color: var(--ct-ol-marker-light);\r
}\r
\r
.theme-light .markdown-reading-view ul>li>.list-bullet:after,\r
.theme-light .markdown-source-view.mod-cm6 .HyperMD-list-line-1 .list-bullet:after {\r
  height: 5px; width: 5px; border-radius: 50%;\r
  background: var(--ct-bullet-light) !important;\r
}\r
\r
.theme-light .markdown-reading-view ul>li>ul>li>.list-bullet:after,\r
.theme-light .markdown-source-view.mod-cm6 .HyperMD-list-line-2 .list-bullet:after {\r
  height: 1px; width: 7px; border-radius: 0;\r
  background: var(--ct-bullet-light) !important;\r
}\r
\r
.theme-light .markdown-reading-view ul>li>ul>li>ul>li>.list-bullet:after,\r
.theme-light .markdown-source-view.mod-cm6 .HyperMD-list-line-3 .list-bullet:after {\r
  height: 4px; width: 4px;\r
  background: transparent;\r
  border: 1px solid var(--ct-bullet-light) !important; border-radius: 50%;\r
}\r
\r
.theme-light .markdown-reading-view ul>li>ul>li>ul>li>ul>li>.list-bullet:after,\r
.theme-light .markdown-source-view.mod-cm6 .HyperMD-list-line-4 .list-bullet:after {\r
  height: 5px; width: 5px; border-radius: 0;\r
  background: var(--ct-bullet-light) !important;\r
}\r
\r
.theme-light .markdown-reading-view ul>li>ul>li>ul>li>ul>li>ul>li>.list-bullet:after,\r
.theme-light .markdown-source-view.mod-cm6 .HyperMD-list-line-5 .list-bullet:after {\r
  height: 1px; width: 7px; border-radius: 0;\r
  background: var(--ct-bullet-light) !important;\r
}\r
\r
.theme-light .markdown-reading-view ul>li>ul>li>ul>li>ul>li>ul>li>ul>li>.list-bullet:after,\r
.theme-light .markdown-source-view.mod-cm6 .HyperMD-list-line-6 .list-bullet:after {\r
  height: 4px; width: 4px;\r
  background: transparent;\r
  border: 1px solid var(--ct-bullet-light) !important;\r
}\r
\r
.theme-light .markdown-reading-view ul>li>ul>li>ul>li>ul>li>ul>li>ul>li>ul>li>.list-bullet:after,\r
.theme-light .markdown-source-view.mod-cm6 .HyperMD-list-line-7 .list-bullet:after {\r
  height: 2px; width: 2px; border-radius: 50%;\r
  background: var(--ct-bullet-light) !important;\r
}\r
\r
/*****************************************************************\r
 *  UI \uAC00\uB3C5\uC131 \u2013 \uACF5\uD1B5 \uC544\uC774\uCF58 \uC228\uAE40 (\uAE30\uC874 \uC720\uC9C0)\r
 *****************************************************************/\r
.nav-files-container .tree-item.nav-folder .tree-item-children .tree-item.nav-folder>.tree-item-self .collapse-icon,\r
.tree-item-self.nav-folder-title.has-folder-note::before{display:none!important;}\r
\r
/*****************************************************************\r
 *  \uD14C\uC774\uBE14 \uC2A4\uD0C0\uC77C \u2013 \uB2E8\uC77C \uD1A0\uD070 \uAE30\uBC18 / \uBAA8\uB4DC\uBCC4 \uC790\uB3D9\r
 *****************************************************************/\r
.el-table table{\r
  width:100%!important; border-collapse:collapse;border-spacing:0;\r
  border-top:2.27px solid var(--ct-table-border);\r
  border-bottom:2.27px solid var(--ct-table-border);\r
  box-shadow:0 0 20px var(--ct-table-shadow);\r
}\r
.el-table th,.el-table td{border:none;padding:.51rem;line-height:1.1;}\r
.el-table table>tbody>tr:first-child>th,\r
.el-table table>tbody>tr:first-child>td{border-top:1.36px solid var(--ct-table-border);}\r
.el-table table>tbody>tr:last-child>th,\r
.el-table table>tbody>tr:last-child>td{border-bottom:1.36px solid var(--ct-table-border);}\r
.el-table thead th{\r
  font-weight:700;padding:8px 9px 5px;\r
  background:var(--ct-base-white)!important;color:var(--ct-base-black);\r
}\r
.theme-dark .el-table thead th{\r
  background:var(--background-primary)!important;color:var(--ct-base-white);\r
}\r
.el-table tbody tr:nth-child(even){background:var(--ct-table-row-even);}\r
.el-table tbody tr:hover td   {background:var(--ct-table-row-hover);}\r
.theme-dark .el-table td      {color:var(--ct-base-white);}  /* \uD14D\uC2A4\uD2B8 \uD770\uC0C9 */\r
\r
/*****************************************************************\r
 *  \uC774\uBBF8\uC9C0(Embeds) & \uB9AC\uC2A4\uD2B8 \uB0B4 \uC774\uBBF8\uC9C0 \uBCF4\uD638\r
 *****************************************************************/\r
.el-p.el-embed-image img,\r
li .el-p.el-embed-image img,\r
ul li img,ol li img,\r
.tab-content img,.tabs img{\r
  display:block;width:700px;max-width:100%;height:auto;margin:1rem auto;\r
  border:1px solid var(--ct-image-border);\r
  box-shadow:0 4px 10px var(--ct-image-shadow);\r
  border-radius:4px;\r
}\r
li img{display:block;max-width:100%;height:auto;margin:.5rem auto;}\r
\r
/*****************************************************************\r
 *  \uBA54\uD0C0\uB370\uC774\uD130 \uD328\uB110 \uC228\uAE40(.hide_properties) \u2013 \uC6D0\uBCF8 \uC720\uC9C0\r
 *****************************************************************/\r
.hide_properties .metadata-container,\r
.hide_properties .metadata-properties,\r
.hide_properties .metadata-property,\r
.hide_properties .metadata-collapse-indicator,\r
.hide_properties .frontmatter-container,\r
.hide_properties .frontmatter{display:none!important;}\r
\r
/* \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r
   \uD5E4\uB354 \uB0B4\uBD80:  \uBC88\uD638 \u2192 \uD14D\uC2A4\uD2B8 \u2192 \uC811\uAE30\uC544\uC774\uCF58(\uC6B0\uCE21)  +  \uACB9\uCE68 \uD574\uC18C\r
   \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 */\r
\r
/* \u2460 \uD5E4\uB354 \uCEE8\uD14C\uC774\uB108\uB294 \uC774\uBBF8 flex; \uC815\uB82C\uB9CC \uD655\uC778 */\r
.markdown-preview-view h1,\r
.markdown-preview-view h2,\r
.markdown-preview-view h3,\r
.markdown-preview-view h4,\r
.markdown-preview-view h5,\r
.markdown-preview-view h6{\r
  display:flex!important;          /* \uD639\uC2DC inline-flex\uAC00 \uC544\uB2CC \uACBD\uC6B0 \uB300\uBE44 */\r
  align-items:center;\r
  width:100%!important;            /* \uBC11\uC904 100 % */\r
  margin:5px 0!important;\r
  border-bottom-style:outset;\r
}\r
/* \u2461 \uBC88\uD638(ct-hn-label) \u2013 \uB9E8 \uC55E */\r
.markdown-preview-view h1 .ct-hn-label,\r
.markdown-preview-view h2 .ct-hn-label,\r
.markdown-preview-view h3 .ct-hn-label,\r
.markdown-preview-view h4 .ct-hn-label,\r
.markdown-preview-view h5 .ct-hn-label,\r
.markdown-preview-view h6 .ct-hn-label{\r
  order:0;\r
  flex:0 0 auto;\r
  margin-right:.35em;\r
}\r
/* \u2462 \uC811\uAE30 \uC544\uC774\uCF58 \u2013 \uC808\uB300\u2192\uC815\uC801 + \uC6B0\uCE21 \uB05D */\r
.markdown-preview-view .heading-collapse-indicator.collapse-indicator{\r
  position:static!important;       /* \u2190 \uACB9\uCE68 \uC6D0\uC778 \uC81C\uAC70 */\r
  order:2;                         /* \uB9E8 \uB4A4 */\r
  flex:0 0 auto;\r
  margin-left:auto;                /* \uB0A8\uC740 \uACF5\uAC04 \uCC44\uC6B0\uACE0 \uC6B0\uCE21 \uC815\uB82C */\r
}\r
\r
\r
/* settings \uD0ED \uC548\uB0B4 \uBB38\uAD6C */\r
.ct-tip{\r
  font-size: 0.85em;\r
  margin: 0 0 0.5em 0;\r
  color: var(--text-muted);\r
}\r
`;var Se=class{constructor(e,t){this.root=document.documentElement;this.cfg=t,this.applyAll(),e.workspace.on("css-change",()=>this.applyAll())}applyAll(){let{tokens:e,customCss:t}=this.cfg(),r=document.body.classList.contains("theme-dark")?"dark":"light";Z(r,e!=null?e:Q),this.upsertStyle(Se.BASE,Ke),this.upsertStyle(Se.CUSTOM,t||"")}upsertStyle(e,t){let r=document.getElementById(e);!r&&t&&(r=Object.assign(document.createElement("style"),{id:e}),document.head.appendChild(r)),r&&(r.textContent=t)}},K=Se;K.BASE="ct-base-theme",K.CUSTOM="ct-custom-css";function Re(l){let e=document.documentElement.style.cssText;l.workspace.iterateAllLeaves(t=>{var a,n;let r=(n=(a=t.view)==null?void 0:a.containerEl)==null?void 0:n.ownerDocument;r&&r!==document&&(r.documentElement.style.cssText=e)})}var Je;(Je=window.coverTable)!=null||(window.coverTable={});var S=window.coverTable,Qe;(Qe=S.waitForEngine)!=null||(S.waitForEngine=async(l=4e3)=>{let e=Date.now();for(;Date.now()-e<l;){if(S.engine)return S.engine;await new Promise(t=>setTimeout(t,40))}throw new Error("coverTable.waitForEngine \u2192 timeout")});var tt="ct-hide-notes",St=`
/* Cover-Table \u2192 hide ALL notes */
body.${tt} .nav-file{ display:none !important; }
`,Ve=class extends H.Plugin{constructor(){super(...arguments);this.headerNumbering=null;this.explorerStyleEl=null}applyZeroFolderVisibility(){let t=Ve.ZERO_FOLDER_STYLE_ID,r=document.getElementById(t);this.settings.hideZeroFolders?r||(r=document.createElement("style"),r.id=t,r.textContent=`
/* Cover-Table \u25BA hide 0_ folders */
.nav-file-title[data-path^="0_"],
.nav-folder-title[data-path^="0_"],
.nav-file-title[data-path*="/0_"],
.nav-folder-title[data-path*="/0_"]{ display:none!important; }`,document.head.appendChild(r)):r==null||r.remove()}applyExplorerHide(){this.explorerStyleEl||(this.explorerStyleEl=document.createElement("style"),this.explorerStyleEl.id="ct-hide-notes-style",this.explorerStyleEl.textContent=St,document.head.appendChild(this.explorerStyleEl)),document.body.classList.toggle(tt,this.settings.hideAllNotes)}async onload(){P.init(this.app),v.d("[Cover-Table] \u25B6 onload");try{let t=this.app.vault.adapter instanceof et.FileSystemAdapter?this.app.vault.adapter.getBasePath():"",r=this.manifest.dir||"",a=(0,Xe.join)(t,r,"style.css"),n=(0,Ze.readFileSync)(a,"utf8"),i=document.createElement("style");i.id="ct-style-fallback",i.textContent=n,document.head.appendChild(i),this.register(()=>i.remove()),v.d("[Cover-Table] fallback style injected \u2714")}catch(t){v.d("[Cover-Table] fallback style inject FAIL",t)}this.tabManager=new se(this.app),S.engine||(S.engine=new we(this.app)),S.ganttController||(S.ganttController=new xe(this.app)),S.obsidian={Notice:H.Notice,Modal:H.Modal,SuggestModal:H.SuggestModal},await this.loadSettings(),v.setDebug(this.settings.debugLog);try{let t=new le(this.app,this);this.addSettingTab(t),v.d("\u{1F197} CoverTableSettingTab \uB4F1\uB85D \uC644\uB8CC")}catch(t){v.e("\u274C SettingTab \uC0DD\uC131 \uC2E4\uD328:",t),new H.Notice("Cover-Table \uC124\uC815 UI \uB85C\uB4DC \uC2E4\uD328 \u2014 \uCF58\uC194(DevTools)\uC744 \uD655\uC778\uD558\uC138\uC694.")}this.applyZeroFolderVisibility(),this.applyExplorerHide(),this.listCallouts=new Le(this),this.registerEditorExtension(this.listCallouts.editorExtensions()),this.registerMarkdownPostProcessor(this.listCallouts.postProcessor(),1e4),this.reloadHeaderNumbering(),this.design=new K(this.app,()=>this.settings),this.registerMarkdownPostProcessor(async(t,r)=>{var i;let a=t.querySelectorAll("pre > code.language-ct, pre > code.language-cover-table");if(a.length===0)return;let n=window.dataviewApi||window.DataviewAPI||window.dvAPI;if(!n){v.w("[Cover-Table] Dataview API not found");return}await S.waitForEngine();for(let o of Array.from(a))try{let s=JSON.parse(o.textContent||"{}"),c=o.parentElement;if(s.type==="gantt"){(i=s.renderInteractiveBelow)!=null||(s.renderInteractiveBelow=!0),await S.ganttController.renderView(n,s,r,c);continue}r&&await S.engine.renderAutoView(n,s,r,c)}catch(s){v.e("[Cover-Table] render error:",s)}}),v.d("[Cover-Table] \u25B6 onload done"),window.addEventListener("unhandledrejection",t=>{var a;let r=String(((a=t.reason)==null?void 0:a.message)||t.reason||"").toLowerCase();if(r.includes("cannot read properties of null")&&r.includes("children")){t.preventDefault();return}r.includes("illegal access")&&t.preventDefault()}),this.registerEvent(this.app.workspace.on("layout-change",()=>{Re(this.app)}))}onunload(){v.d("[Cover-Table] \u25B6 onunload"),this.tabManager.destroy(),P.i.off(S.ganttController.refreshByBus.bind(S.ganttController))}async loadSettings(){let t=await this.loadData();this.settings=Object.assign({},Ye,t)}async saveSettings(){await this.saveData(this.settings),v.setDebug(this.settings.debugLog),this.applyZeroFolderVisibility(),this.applyExplorerHide(),this.applyDesignSettings(),Re(this.app)}applyDesignSettings(){let t=this.app.getTheme()==="obsidian-dark"?"dark":"light",r=document.documentElement,a="ct-base-vars",n=document.getElementById(a);n||(n=document.createElement("style"),n.id=a,document.head.appendChild(n));let i=this.settings.baseVars,o=[],s=[];Object.entries(i).forEach(([h,m])=>{(h.endsWith("-dark")?s:o).push(`${h}:${m};`)}),n.textContent=`
      :root{${o.join("")}}
      .theme-dark{${s.join("")}}
    `;let c="ct-custom-css",d=document.getElementById(c);d||(d=document.createElement("style"),d.id=c,document.head.appendChild(d)),d.textContent=this.settings.customCss||""}reloadHeaderNumbering(){var t;if(this.headerNumbering=null,!this.settings.enableHeaderNumbering){if(!document.getElementById("ct-hn-hide")){let r=document.createElement("style");r.id="ct-hn-hide",r.textContent=".ct-hn-label{ display:none!important; }",document.head.appendChild(r)}return}(t=document.getElementById("ct-hn-hide"))==null||t.remove(),this.headerNumbering=new Ee(this),this.headerNumbering.register()}rebuildListCallouts(){this.listCallouts&&this.listCallouts.rebuild()}reloadEmbed(){}},te=Ve;te.ZERO_FOLDER_STYLE_ID="ct-hide-zero-folders";
