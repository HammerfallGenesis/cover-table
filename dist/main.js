/*
 THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
 If you want to view the source, please visit:
 https://github.com/HammerfallGenesis/obsidian-cover-table-plugin
*/

"use strict";
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// src/main.ts
var main_exports = {};
__export(main_exports, {
  default: () => MiniTablePlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian2 = require("obsidian");

// src/interactive_table.ts
var import_obsidian = require("obsidian");
var InteractiveTable = class {
  constructor() {
    // 정규표현식 캐싱 (날짜, 시간 파싱)
    this.dateYMDRegex = /^(\d{4})-(\d{1,2})-(\d{1,2})$/;
    this.timeHMRegex = /^(\d{1,2}):(\d{1,2})$/;
  }
  /* --------------------------------------------------------------------
     [A] 뷰 ID 생성
  -------------------------------------------------------------------- */
  resolveViewId(settings) {
    let id = settings["id"];
    if (!id || typeof id !== "string") {
      id = "auto-" + Date.now() + "-" + Math.random().toString(16).slice(2, 6);
    }
    return id;
  }
  /* --------------------------------------------------------------------
     [B] 로컬 스토리지 관련 (키 생성 헬퍼 포함)
  -------------------------------------------------------------------- */
  getStorageKey(notePath, viewId) {
    return `miniTableEngine::${notePath}::${viewId}`;
  }
  _getLocalState(notePath, viewId) {
    const key = this.getStorageKey(notePath, viewId);
    const dataString = localStorage.getItem(key);
    if (!dataString)
      return {};
    try {
      return JSON.parse(dataString);
    } catch (e) {
      return {};
    }
  }
  _setLocalState(notePath, viewId, obj) {
    const key = this.getStorageKey(notePath, viewId);
    localStorage.setItem(key, JSON.stringify(obj));
  }
  _getState(notePath, viewId, propName) {
    const localData = this._getLocalState(notePath, viewId);
    return localData.hasOwnProperty(propName) ? localData[propName] : null;
  }
  _setState(notePath, viewId, propName, val) {
    const localData = this._getLocalState(notePath, viewId);
    localData[propName] = val;
    this._setLocalState(notePath, viewId, localData);
  }
  /* --------------------------------------------------------------------
     refresh (다중 호출 코드 통합)
  -------------------------------------------------------------------- */
  refreshCommand(delay = 50) {
    setTimeout(() => {
      app.commands.executeCommandById("dataview:dataview-force-refresh-views");
    }, delay);
  }
  /* --------------------------------------------------------------------
     [C] 버튼들
  -------------------------------------------------------------------- */
  async viewFolderButton(relPath, container) {
    const btn = document.createElement("button");
    btn.className = "dvit-button folder-button";
    btn.append("\u21AA Open Folder");
    btn.onclick = async () => {
      try {
        const { shell } = window.require("electron");
        const pathMod = window.require("path");
        if (!shell) {
          new globalThis.miniTableGlobal.obsidian.Notice("Electron shell is undefined!");
          return;
        }
        const vaultBase = app.vault.adapter.basePath;
        const absolutePath = pathMod.resolve(vaultBase, relPath);
        const isFile = pathMod.extname(absolutePath) !== "";
        if (isFile) {
          shell.showItemInFolder(absolutePath);
        } else {
          shell.openPath(absolutePath);
        }
      } catch (e) {
        new globalThis.miniTableGlobal.obsidian.Notice(`Error:
${e.message}`);
      }
    };
    container.append(btn);
  }
  async newFolderButton(dv, args, container) {
    let { folderName } = args;
    if (!folderName)
      folderName = "New Folder";
    const btn = document.createElement("button");
    btn.className = "dvit-button folder-button";
    btn.append("+ \uC0C8 \uD3F4\uB354");
    btn.onclick = async () => {
      const inputName = await this.textInput(folderName);
      if (!inputName)
        return;
      const currentFolder = dv.current().file.folder || "";
      const finalPath = currentFolder ? `${currentFolder}/${inputName}` : inputName;
      try {
        await app.vault.createFolder(finalPath);
        new globalThis.miniTableGlobal.obsidian.Notice(`Folder created: ${finalPath}`);
      } catch (er) {
        new globalThis.miniTableGlobal.obsidian.Notice(`Error creating folder:
${finalPath}`);
      }
    };
    container.append(btn);
  }
  async refreshButton(container, notePath, viewId) {
    const btn = document.createElement("button");
    btn.className = "dvit-button";
    btn.style.marginRight = "8px";
    btn.append("\u21BA");
    btn.onclick = async () => {
      this._setState(notePath, viewId, `sort_${viewId}`, null);
      this._setState(notePath, viewId, `sort_direction_${viewId}`, "asc");
      this.refreshCommand(50);
    };
    container.append(btn);
  }
  /* --------------------------------------------------------------------
     [D] getVal: 중첩 프로퍼티 접근 최적화 (for 루프 사용)
  -------------------------------------------------------------------- */
  getVal(page, prop) {
    if (!page)
      return null;
    if (prop.startsWith("file.")) {
      const parts = prop.split(".");
      let v = page;
      for (let i = 0; i < parts.length; i++) {
        if (v && v[parts[i]] !== void 0) {
          v = v[parts[i]];
        } else {
          return null;
        }
      }
      return v;
    }
    return page[prop];
  }
  /* --------------------------------------------------------------------
     [E] 날짜/시간/숫자 정렬 & 포맷
  -------------------------------------------------------------------- */
  parseDateYMD(str) {
    if (typeof str !== "string")
      return null;
    const m = str.match(this.dateYMDRegex);
    if (m) {
      const y = parseInt(m[1], 10);
      const mo = parseInt(m[2], 10);
      const d = parseInt(m[3], 10);
      if (y < 1e3 || y > 9999 || mo < 1 || mo > 12 || d < 1 || d > 31)
        return null;
      return new Date(y, mo - 1, d);
    }
    const dt = new Date(str);
    return isNaN(dt.getTime()) ? null : dt;
  }
  parseTimeHM(str) {
    if (typeof str !== "string")
      return null;
    const m = str.match(this.timeHMRegex);
    if (!m)
      return null;
    const hh = parseInt(m[1], 10);
    const mm = parseInt(m[2], 10);
    if (hh > 23 || mm > 59)
      return null;
    const dt = /* @__PURE__ */ new Date();
    dt.setHours(hh);
    dt.setMinutes(mm);
    return dt;
  }
  getSortValue(value, _prop) {
    if (value === void 0 || value === null)
      return "";
    const s = typeof value === "string" ? value : String(value);
    let dt = this.parseDateYMD(s);
    if (!dt) {
      const dt2 = this.parseTimeHM(s);
      if (dt2)
        dt = dt2;
    }
    if (dt)
      return dt.getTime();
    const num = parseFloat(s);
    return !isNaN(num) ? num : s.toLowerCase();
  }
  formatAsYYYYMMDDIfDate(value) {
    if (value === void 0 || value === null)
      return "";
    const s = typeof value === "string" ? value : String(value);
    const dt = this.parseDateYMD(s);
    if (!dt)
      return s;
    const yy = dt.getFullYear();
    const mm = dt.getMonth() + 1;
    const dd = dt.getDate();
    const mmStr = mm < 10 ? "0" + mm : "" + mm;
    const ddStr = dd < 10 ? "0" + dd : "" + dd;
    return `${yy}-${mmStr}-${ddStr}`;
  }
  /* --------------------------------------------------------------------
     [F] 태그 필터
  -------------------------------------------------------------------- */
  async renderTagFilterButton(pages, container, notePath, viewId) {
    try {
      const currentTag = this._getState(notePath, viewId, "tagFilter") || "ALL";
      const btn = document.createElement("button");
      btn.className = "dvit-button tag-filter-button";
      btn.textContent = currentTag;
      btn.onclick = async () => {
        try {
          const allTags = /* @__PURE__ */ new Set();
          pages.forEach((pg) => {
            var _a;
            const tg = ((_a = pg == null ? void 0 : pg.file) == null ? void 0 : _a.tags) || (pg == null ? void 0 : pg.tags);
            if (!tg)
              return;
            if (Array.isArray(tg))
              tg.forEach((xx) => allTags.add(xx));
          });
          const arr = ["ALL", ...Array.from(allTags).sort()];
          const chosen = await this.suggester(arr);
          if (!chosen)
            return;
          this._setState(notePath, viewId, "tagFilter", chosen);
          this.refreshCommand(50);
        } catch (e) {
        }
      };
      container.appendChild(btn);
    } catch (e) {
    }
  }
  async applyTagFilter(pages, notePath, viewId) {
    const tg = this._getState(notePath, viewId, "tagFilter") || "ALL";
    if (tg === "ALL")
      return pages;
    return pages.filter((pg) => {
      var _a;
      const arr = ((_a = pg == null ? void 0 : pg.file) == null ? void 0 : _a.tags) || (pg == null ? void 0 : pg.tags);
      return Array.isArray(arr) && arr.includes(tg);
    });
  }
  /* --------------------------------------------------------------------
     [G] frontmatter 필터 + 검색
  -------------------------------------------------------------------- */
  async changePropFilter(p, pages, notePath, viewId) {
    const setOfVals = /* @__PURE__ */ new Set();
    for (const pg of pages) {
      let rawVal = this.getVal(pg, p.prop);
      let val = this.formatAsYYYYMMDDIfDate(rawVal);
      if (!val)
        val = "-";
      setOfVals.add(val);
    }
    let arrOfVals = Array.from(setOfVals);
    const hasDash = arrOfVals.includes("-");
    if (hasDash) {
      arrOfVals = arrOfVals.filter((v) => v !== "-");
    }
    arrOfVals.sort((a, b) => a.localeCompare(b));
    const uv = hasDash ? ["ALL", "-"].concat(arrOfVals) : ["ALL", ...arrOfVals];
    const chosen = await this.suggester(uv);
    if (!chosen)
      return;
    const fKey = `filter_${viewId}_${p.prop}`;
    this._setState(notePath, viewId, fKey, chosen);
    this.refreshCommand(50);
  }
  async filterByProp(p, pages, notePath, viewId) {
    const fKey = `filter_${viewId}_${p.prop}`;
    const val = this._getState(notePath, viewId, fKey);
    if (!val || val === "ALL")
      return pages;
    return pages.filter((pg) => {
      let rawV = this.getVal(pg, p.prop);
      let cmpV = this.formatAsYYYYMMDDIfDate(rawV);
      if (!cmpV)
        cmpV = "-";
      return cmpV === val;
    });
  }
  /**
   * file.link 검색 시 "frontmatter.title"만 검색 대상으로 사용
   */
  buildSearchTextMap(props, pages) {
    const tableProps = props.filter((c) => c.column);
    pages.forEach((pg) => {
      const buf = [];
      tableProps.forEach((col) => {
        let tv;
        if (col.prop === "file.link") {
          const aliasPart = pg.__fmTitle || "";
          tv = aliasPart;
        } else if (col.prop === "table") {
          tv = pg.__fmTable || "";
        } else {
          const rawVal = this.getVal(pg, col.prop);
          tv = rawVal == null ? "" : String(rawVal);
        }
        buf.push(tv.toLowerCase());
      });
      pg.__searchText = buf.join(" ");
    });
  }
  async filterProps(props, pages, notePath, viewId) {
    for (const p of props.filter((x) => x.filter)) {
      pages = await this.filterByProp(p, pages, notePath, viewId);
    }
    pages = await this.applyTagFilter(pages, notePath, viewId);
    const sr = this._getState(notePath, viewId, `search_ready_${viewId}`);
    if (sr) {
      let sVal = (this._getState(notePath, viewId, `search_${viewId}`) || "").trim();
      if (sVal.length > 0) {
        const ws = sVal.split(" ");
        this.buildSearchTextMap(props, pages);
        for (let w of ws) {
          w = w.trim().toLowerCase();
          if (w.length > 0) {
            pages = pages.filter((pg) => {
              const txt = pg.__searchText || "";
              return txt.includes(w);
            });
          }
        }
      }
    }
    return pages;
  }
  async searchInput(container, notePath, viewId) {
    const wrap = document.createElement("div");
    wrap.className = "dvit-search-wrapper";
    wrap.style.display = "flex";
    wrap.style.alignItems = "center";
    const sKey = `search_${viewId}`;
    const sVal = this._getState(notePath, viewId, sKey) || "";
    const wasFocused = this._getState(notePath, viewId, `search_focus_${viewId}`) === true;
    const input = document.createElement("input");
    input.className = "dvit-search-input";
    input.value = sVal;
    input.placeholder = "\uAC80\uC0C9...";
    input.style.marginRight = "8px";
    if (wasFocused) {
      setTimeout(() => input.focus(), 0);
    }
    input.addEventListener("focus", () => {
      this._setState(notePath, viewId, `search_focus_${viewId}`, true);
    });
    input.addEventListener("blur", () => {
      this._setState(notePath, viewId, `search_focus_${viewId}`, false);
    });
    input.addEventListener("keydown", (e) => {
      if (e.key === "Enter") {
        this._setState(notePath, viewId, sKey, input.value);
        this._setState(notePath, viewId, `search_ready_${viewId}`, true);
        this.refreshCommand(80);
      }
    });
    wrap.appendChild(input);
    const btn = document.createElement("button");
    btn.className = "dvit-button dvit-search-button";
    btn.innerText = "\u2315";
    btn.onclick = async () => {
      this._setState(notePath, viewId, sKey, input.value);
      this._setState(notePath, viewId, `search_ready_${viewId}`, true);
      this.refreshCommand(80);
      setTimeout(() => input.focus(), 80);
    };
    wrap.appendChild(btn);
    container.appendChild(wrap);
  }
  /* --------------------------------------------------------------------
     [H] 페이지네이션
  -------------------------------------------------------------------- */
  paginate(arr, per, notePath, viewId) {
    const key = `pagination_${viewId}`;
    const totalPages = per > 0 ? Math.ceil(arr.length / per) : 1;
    let pageIdx = this._getState(notePath, viewId, key) || 0;
    if (pageIdx >= totalPages) {
      pageIdx = totalPages - 1;
      this._setState(notePath, viewId, key, pageIdx);
    }
    return per > 0 ? arr.slice(pageIdx * per, (pageIdx + 1) * per) : [...arr];
  }
  async paginationBlock(data, per, container, notePath, viewId) {
    const key = `pagination_${viewId}`;
    const totalPages = Math.ceil(data.length / per);
    const wrap = document.createElement("div");
    wrap.className = "pagination-block";
    const prv = await this.prevPageButton(totalPages, key, notePath, viewId);
    wrap.appendChild(prv);
    const curS = document.createElement("span");
    const cv = (this._getState(notePath, viewId, key) || 0) + 1;
    curS.textContent = `${cv} / ${totalPages}`;
    wrap.appendChild(curS);
    const nxt = await this.nextPageButton(totalPages, key, notePath, viewId);
    wrap.appendChild(nxt);
    container.appendChild(wrap);
  }
  async nextPageButton(totalPages, storeKey, notePath, viewId) {
    const cv = this._getState(notePath, viewId, storeKey) || 0;
    const canNext = cv + 1 < totalPages;
    const bClass = canNext ? "dvit-button" : "dvit-button button-gray";
    const btn = document.createElement("button");
    btn.className = bClass;
    btn.append(">>");
    btn.onclick = async () => {
      if (!canNext)
        return;
      this._setState(notePath, viewId, storeKey, cv + 1);
      this.refreshCommand(60);
    };
    return btn;
  }
  async prevPageButton(totalPages, storeKey, notePath, viewId) {
    const cv = this._getState(notePath, viewId, storeKey) || 0;
    const canPrev = cv > 0;
    const bClass = canPrev ? "dvit-button" : "dvit-button button-gray";
    const btn = document.createElement("button");
    btn.className = bClass;
    btn.append("<<");
    btn.onclick = async () => {
      if (!canPrev)
        return;
      this._setState(notePath, viewId, storeKey, cv - 1);
      this.refreshCommand(60);
    };
    return btn;
  }
  /* --------------------------------------------------------------------
     [I] 테이블 생성 (필터/정렬/페이지네이션 적용)
  -------------------------------------------------------------------- */
  async createTable(props, pages, container, notePath, viewId, entriesPerPage, settings) {
    pages.forEach((pg) => {
      var _a, _b, _c, _d;
      try {
        const dvPage = (_a = this.dv) == null ? void 0 : _a.page(pg.file.path);
        if (dvPage) {
          pg.__fmTitle = ((_b = dvPage == null ? void 0 : dvPage.frontmatter) == null ? void 0 : _b.title) || (dvPage == null ? void 0 : dvPage.title) || "";
        } else {
          pg.__fmTitle = ((_c = pg.frontmatter) == null ? void 0 : _c.title) || "";
        }
      } catch (e) {
        pg.__fmTitle = ((_d = pg.frontmatter) == null ? void 0 : _d.title) || "";
      }
    });
    let filtered = await this.filterProps(props, pages, notePath, viewId);
    const sKey = `sort_${viewId}`;
    const dKey = `sort_direction_${viewId}`;
    let curSort = this._getState(notePath, viewId, sKey);
    let curDir = this._getState(notePath, viewId, dKey) || "asc";
    if (!curSort) {
      filtered.sort((a, b) => a.__fmTitle.localeCompare(b.__fmTitle));
    } else {
      filtered = this.sortByProp(filtered, curSort, curDir);
    }
    const disp = entriesPerPage ? this.paginate(filtered, entriesPerPage, notePath, viewId) : [...filtered];
    const headers = [];
    props.forEach((col) => {
      const hd = document.createElement("div");
      if (col.prop === "file.link") {
        hd.classList.add("header-no-sort");
      } else {
        hd.classList.add("header-sorting-button");
        hd.setAttribute("data-prop", col.prop);
        hd.setAttribute("data-view-id", viewId);
      }
      hd.innerText = col.name || col.prop;
      headers.push(hd.outerHTML);
    });
    const rows = disp.map((pg) => {
      var _a, _b, _c, _d;
      const rowCells = [];
      for (const col of props) {
        let val = this.getVal(pg, col.prop);
        if (col.prop === "file.link") {
          const alias = pg.__fmTitle || "";
          if (typeof val === "object" && (val == null ? void 0 : val.path)) {
            const linkMarkup = alias.trim() === "" ? `[[${val.path}]]` : `[[${val.path}|${alias}]]`;
            rowCells.push(`<div class="edit-button" data-path="${((_a = pg.file) == null ? void 0 : _a.path) || ""}" data-prop="file.link">${linkMarkup}</div>`);
          } else {
            if (alias.trim() === "") {
              rowCells.push(`<div class="edit-button" data-path="${((_b = pg.file) == null ? void 0 : _b.path) || ""}" data-prop="file.link">[[${val && typeof val === "object" && (val == null ? void 0 : val.path) ? val.path : ""}]]</div>`);
            } else {
              rowCells.push(`<div class="edit-button" data-path="${((_c = pg.file) == null ? void 0 : _c.path) || ""}" data-prop="file.link">${alias}</div>`);
            }
          }
        } else {
          if (Array.isArray(val)) {
            if (col.prop === "tags") {
              const updated = [];
              for (const item of val) {
                item.split(/\s+/).forEach((tk) => {
                  if (tk && !tk.startsWith("#")) {
                    tk = "#" + tk;
                  }
                  updated.push(tk);
                });
              }
              val = updated.join(" ");
            } else {
              val = val.join(" ");
            }
          }
          if (col.prop === "published") {
            const dt = this.parseDateYMD(val);
            val = dt ? dt.getFullYear().toString() : val || "-";
          } else {
            val = this.formatAsYYYYMMDDIfDate(val);
            if (!val)
              val = "-";
          }
          rowCells.push(`<div class="edit-button" data-path="${((_d = pg.file) == null ? void 0 : _d.path) || ""}" data-prop="${col.prop}">${val}</div>`);
        }
      }
      return rowCells;
    });
    const mdTable = this.dv.markdownTable(headers, rows);
    const wrapP = this.dv.paragraph(mdTable);
    wrapP.classList.add("dv-table-wrapper", "table", "full-width");
    container.appendChild(wrapP);
    wrapP.querySelectorAll(".edit-button").forEach((btn) => {
      btn.addEventListener("click", async (e) => {
        if (e.target.localName === "a")
          return;
        const path = btn.getAttribute("data-path");
        const prop = btn.getAttribute("data-prop");
        if (path && prop)
          await this.editProp("text", path, prop);
      });
    });
    const hdrBtns = wrapP.querySelectorAll(".header-sorting-button");
    const applySortVisual = (sortProp, sortDir) => {
      hdrBtns.forEach((hb) => {
        hb.classList.remove("sorted-asc", "sorted-desc", "sorted-none");
      });
      hdrBtns.forEach((hb) => {
        const p = hb.getAttribute("data-prop") || "";
        if (!sortProp || sortProp !== p) {
          hb.classList.add("sorted-none");
        } else {
          hb.classList.add(sortDir === "asc" ? "sorted-asc" : "sorted-desc");
        }
      });
    };
    hdrBtns.forEach((hb) => {
      hb.addEventListener("click", async () => {
        let p = hb.getAttribute("data-prop") || "";
        const vId = hb.getAttribute("data-view-id") || "";
        const sKey2 = `sort_${vId}`;
        const dKey2 = `sort_direction_${vId}`;
        let curSort2 = this._getState(notePath, vId, sKey2);
        let curDir2 = this._getState(notePath, vId, dKey2) || "asc";
        if (curSort2 !== p) {
          curSort2 = p;
          curDir2 = "asc";
        } else {
          if (curDir2 === "asc")
            curDir2 = "desc";
          else if (curDir2 === "desc") {
            curSort2 = null;
            curDir2 = "asc";
          }
        }
        this._setState(notePath, vId, sKey2, curSort2);
        this._setState(notePath, vId, dKey2, curDir2);
        applySortVisual(curSort2, curDir2);
        this.refreshCommand(50);
      });
    });
    applySortVisual(curSort, curDir);
    return filtered;
  }
  /* --------------------------------------------------------------------
     [J] 편집 (데모)
  -------------------------------------------------------------------- */
  async editProp(type, path, prop) {
    var _a;
    const file = app.vault.getAbstractFileByPath(path);
    if (!file)
      return;
    if (type === "file name" && file instanceof import_obsidian.TFile) {
      const oldName = file.basename;
      const newName = await this.textInput(oldName);
      if (!newName)
        return;
      const folder = ((_a = file.parent) == null ? void 0 : _a.path) || "";
      const ext = file.extension;
      const newPath = folder ? `${folder}/${newName}.${ext}` : `${newName}.${ext}`;
      await app.vault.rename(file, newPath);
      this.refreshCommand(50);
      return;
    }
    this.refreshCommand(50);
  }
  /* --------------------------------------------------------------------
     [K] 텍스트 입력 모달 (데모)
  -------------------------------------------------------------------- */
  async textInput(defaultVal) {
    return new Promise((resolve) => {
      const { Modal: Modal2 } = globalThis.miniTableGlobal.obsidian;
      class MyModal extends Modal2 {
        constructor(app2) {
          super(app2);
          this.result = defaultVal;
        }
        onOpen() {
          const { contentEl } = this;
          contentEl.createEl("h1", { text: "Input" });
          const inp = contentEl.createEl("input");
          inp.value = this.result;
          inp.style.width = "100%";
          inp.addEventListener("keydown", (ev) => {
            if (ev.key === "Enter") {
              this.result = inp.value.trim();
              this.close();
              resolve(this.result);
            }
          });
          const okBtn = contentEl.createEl("button", { text: "OK" });
          okBtn.onclick = () => {
            this.result = inp.value.trim();
            this.close();
            resolve(this.result);
          };
        }
        onClose() {
          this.contentEl.empty();
        }
      }
      new MyModal(app).open();
    });
  }
  /* --------------------------------------------------------------------
     [L] Suggester
  -------------------------------------------------------------------- */
  async suggester(vals) {
    const { SuggestModal: SuggestModal2 } = globalThis.miniTableGlobal.obsidian;
    return new Promise((resolve) => {
      class MySugg extends SuggestModal2 {
        getSuggestions(q) {
          return vals.filter((x) => x.toLowerCase().includes(q.toLowerCase()));
        }
        renderSuggestion(val, el) {
          el.createEl("div", { text: val });
        }
        onChooseSuggestion(val) {
          resolve(val);
        }
      }
      new MySugg(app).open();
    }).catch(() => null);
  }
  /* --------------------------------------------------------------------
     [M] 정렬 (file.link은 별도 정렬하지 않음)
  -------------------------------------------------------------------- */
  sortByProp(pages, prop, dir) {
    if (!prop || prop === "file.link")
      return pages;
    dir = dir || "asc";
    return pages.sort((a, b) => {
      const A = this.getVal(a, prop);
      const B = this.getVal(b, prop);
      const sA = this.getSortValue(A, prop);
      const sB = this.getSortValue(B, prop);
      if (typeof sA === "number" && typeof sB === "number") {
        return dir === "asc" ? sA - sB : sB - sA;
      }
      const strA = String(sA);
      const strB = String(sB);
      return dir === "asc" ? strA.localeCompare(strB) : strB.localeCompare(strA);
    });
  }
  /* --------------------------------------------------------------------
     [N] DataviewJS 엔트리 포인트: renderView
  -------------------------------------------------------------------- */
  async renderView(settings, props, pages, dv) {
    var _a;
    const originalConsoleError = console.error;
    console.error = (...args) => {
      const msg = args[0] instanceof Error ? args[0].message : String(args[0]);
      if (msg.includes("Cannot read properties of undefined (reading 'file')")) {
        return;
      }
      originalConsoleError(...args);
    };
    try {
      if (!dv || !pages || !Array.isArray(pages))
        return;
      const curr = (_a = dv.current) == null ? void 0 : _a.call(dv);
      if (!curr || !curr.file || !curr.file.path)
        return;
      const notePath = curr.file.path;
      pages = pages.filter((pg) => {
        var _a2;
        return (_a2 = pg == null ? void 0 : pg.file) == null ? void 0 : _a2.path;
      });
      this.dv = dv;
      const id = this.resolveViewId(settings);
      const oldContainer = dv.container;
      if (settings.folding === true) {
        const detailsParent = dv.container.createEl("details");
        const summaryEl = detailsParent.createEl("summary");
        summaryEl.setText(settings.foldingTitle || "Dataview");
        const foldedDiv = detailsParent.createEl("div");
        dv.container = foldedDiv;
      }
      const containerDiv = document.createElement("div");
      containerDiv.classList.add(`dvit-view-id-${id}`);
      dv.container.append(containerDiv);
      const topRow = document.createElement("div");
      topRow.classList.add("dvit-top-row");
      topRow.style.display = "flex";
      topRow.style.justifyContent = "space-between";
      topRow.style.alignItems = "center";
      containerDiv.appendChild(topRow);
      const leftArea = document.createElement("div");
      leftArea.className = "dvit-left-area";
      const centerArea = document.createElement("div");
      centerArea.className = "dvit-center-area";
      const rightArea = document.createElement("div");
      rightArea.className = "dvit-right-area";
      topRow.append(leftArea, centerArea, rightArea);
      if (settings.path) {
        await this.viewFolderButton(settings.path, leftArea);
      }
      if (settings["add new folder button"]) {
        await this.newFolderButton(dv, { folderName: settings["new folder name"] || "NewFolder" }, leftArea);
      }
      await this.renderTagFilterButton(pages, leftArea, notePath, id);
      await this.refreshButton(rightArea, notePath, id);
      await this.searchInput(rightArea, notePath, id);
      const fmRow = document.createElement("div");
      fmRow.className = "frontmatter-filter-area";
      containerDiv.appendChild(fmRow);
      await this.filterButtonProps(props, pages, fmRow, notePath, id);
      const epp = settings["entries on page"] || 10;
      const finalFiltered = await this.createTable(props, pages, containerDiv, notePath, id, epp, settings);
      if (epp) {
        await this.paginationBlock(finalFiltered, epp, containerDiv, notePath, id);
      }
      dv.container = oldContainer;
    } catch (err) {
      console.warn("InteractiveTable renderView suppressed error:", err);
    } finally {
      setTimeout(() => {
        const allErrBlocks = document.querySelectorAll(".dataview-error, .dataview .error, .dv-render-error");
        allErrBlocks.forEach((elem) => {
          if (elem.textContent && elem.textContent.includes("Evaluation Error")) {
            elem.remove();
          }
        });
      }, 100);
      console.error = originalConsoleError;
    }
  }
  async filterButtonProps(props, pages, container, notePath, viewId) {
    const flt = props.filter((pp) => pp.filter);
    if (flt.length === 0)
      return;
    const wrap = document.createElement("div");
    wrap.className = "frontmatter-filter-area";
    for (const p of flt) {
      const b = await this.makeFilterButton(p, pages, notePath, viewId);
      wrap.appendChild(b);
    }
    container.appendChild(wrap);
  }
  async makeFilterButton(p, pages, notePath, viewId) {
    const btn = document.createElement("button");
    btn.className = "dvit-button";
    const nm = p.name || p.prop;
    btn.append(nm);
    btn.onclick = async () => {
      await this.changePropFilter(p, pages, notePath, viewId);
    };
    return btn;
  }
  /* --------------------------------------------------------------------
     renderAutoView (현재 노트 폴더의 md 문서 및 .canvas 파일 자동 수집)
  -------------------------------------------------------------------- */
  async renderAutoView(dv, settings = {}) {
    var _a;
    const currFile = (_a = dv.current()) == null ? void 0 : _a.file;
    if (!currFile) {
      console.warn("renderAutoView: No current file found.");
      return;
    }
    const mdPages = dv.pages().where((p) => p.file.folder === currFile.folder).where((p) => p.file.path !== currFile.path).array();
    const currentFolder = currFile.folder;
    const canvasFiles = app.vault.getFiles().filter((f) => f.extension === "canvas").filter((f) => {
      const parentFolder = f.path.substring(0, f.path.lastIndexOf("/")) || "";
      return parentFolder === currentFolder;
    });
    const canvasPages = canvasFiles.map((cf) => {
      return {
        file: {
          path: cf.path,
          link: dv.fileLink(cf.path),
          folder: currentFolder
        },
        frontmatter: {
          title: cf.basename
        },
        created: "",
        status: "",
        tags: "#\uCE94\uBC84\uC2A4"
      };
    });
    const pages = mdPages.concat(canvasPages);
    const defaultProps = [
      { prop: "file.link", name: "Title", filter: false, column: true },
      { prop: "created", name: "Created", filter: true, column: true },
      { prop: "status", name: "Status", filter: true, column: true }
    ];
    const finalProps = settings.props || defaultProps;
    await this.renderView(settings, finalProps, pages, dv);
  }
};

// src/gantt_table.ts
var GanttTable = class {
  constructor() {
    /**
     * (B) 다크/라이트 모드용 기본 팔레트
     */
    this.defaultDarkPalettes = [
      "#ff6363",
      "#ffa600",
      "#ffcf00",
      "#8aff80",
      "#2effd3",
      "#00ffff",
      "#25c6fc",
      "#3399ff",
      "#9975e2",
      "#cc66cc",
      "#ff66ff",
      "#ff66cc",
      "#ff6699",
      "#ff6666",
      "#f06b60",
      "#ed7732",
      "#de9f00",
      "#afff68",
      "#53ffb4",
      "#2f9eff"
    ];
    this.defaultLightPalettes = [
      "#ff9999",
      "#ffc04d",
      "#ffe680",
      "#b3ffb3",
      "#80fff2",
      "#80ffff",
      "#99daff",
      "#99c2ff",
      "#c2a3e8",
      "#df9edf",
      "#ff99ff",
      "#ff99e6",
      "#ff99c2",
      "#ff9999",
      "#f4a38c",
      "#f1b066",
      "#eec900",
      "#c5ff8a",
      "#84ffc9",
      "#74baff"
    ];
    this.noteColorMap = {};
    this.colorIndex = 0;
    this.legendData = {};
    this.isDarkMode = document.body.classList.contains("theme-dark");
    this.interactiveTable = null;
  }
  /**
   * (A) createResponsiveHR
   *    - Gantt 아래에 InteractiveTable을 붙일 때 시각적 구분선 사용
   *    - parentEl: 실제 DOM 컨테이너(예: dv.container)
   */
  createResponsiveHR(parentEl) {
    let hr = parentEl.createEl("hr");
    if (document.body.classList.contains("theme-dark")) {
      hr.style.border = "1px solid #fff";
    } else {
      hr.style.border = "1px solid #000";
    }
    hr.style.margin = "10px 0";
    return hr;
  }
  /**
   * (C) 노트 → 색상 인덱스 할당
   */
  assignColorToNote(noteTitle, colorPalette) {
    if (!this.noteColorMap[noteTitle]) {
      if (!Array.isArray(colorPalette) || colorPalette.length === 0) {
        this.noteColorMap[noteTitle] = { colorIndex: null };
      } else {
        const idx = this.colorIndex % colorPalette.length;
        this.noteColorMap[noteTitle] = { colorIndex: idx };
        this.colorIndex++;
      }
    }
  }
  getNoteColor(noteTitle, colorPalette) {
    const entry = this.noteColorMap[noteTitle];
    if (!entry || entry.colorIndex === null)
      return "#999";
    return colorPalette[entry.colorIndex];
  }
  /**
   * (D) 데이터 수집: 다크/라이트 모드별 팔레트 확정 + 페이지 필터링
   */
  gatherData(dv, settings) {
    var _a;
    this.isDarkMode = document.body.classList.contains("theme-dark");
    let finalColorPalette;
    if (this.isDarkMode) {
      if (Array.isArray(settings.colorPaletteDark) && settings.colorPaletteDark.length > 0) {
        finalColorPalette = settings.colorPaletteDark;
      } else if (Array.isArray(settings.colorPalette) && settings.colorPalette.length > 0) {
        finalColorPalette = settings.colorPalette;
      } else {
        finalColorPalette = this.defaultDarkPalettes;
      }
    } else {
      if (Array.isArray(settings.colorPaletteLight) && settings.colorPaletteLight.length > 0) {
        finalColorPalette = settings.colorPaletteLight;
      } else if (Array.isArray(settings.colorPalette) && settings.colorPalette.length > 0) {
        finalColorPalette = settings.colorPalette;
      } else {
        finalColorPalette = this.defaultLightPalettes;
      }
    }
    const curr = (_a = dv.current) == null ? void 0 : _a.call(dv);
    if (!(curr == null ? void 0 : curr.file)) {
      return {
        dv,
        allPages: [],
        year: 0,
        month: 0,
        totalDays: 0,
        finalColorPalette
      };
    }
    const currentFile = curr.file;
    let basePages = [];
    if (settings.customPages && Array.isArray(settings.customPages)) {
      basePages = settings.customPages;
    } else if (settings.path && typeof settings.path === "string") {
      basePages = dv.pages(`"${settings.path}"`).where((p) => p.file.path !== currentFile.path).array();
    } else {
      basePages = dv.pages().where((p) => p.file.folder === currentFile.folder).where((p) => p.file.path !== currentFile.path).array();
    }
    let allPages = basePages.filter((p) => {
      let s = p.situation;
      if (s === "\uC791\uC5C5\uC644\uB8CC")
        return false;
      if (!p.created || !p.end)
        return false;
      return true;
    });
    let now = /* @__PURE__ */ new Date();
    let year = now.getFullYear();
    let month = now.getMonth();
    let totalDays = new Date(year, month + 1, 0).getDate();
    return { dv, allPages, year, month, totalDays, finalColorPalette };
  }
  /**
   * (E) 간트 테이블 생성
   */
  buildGanttTable(settings, data) {
    const { allPages, totalDays } = data;
    let theadHTML = `
      <thead>
        <tr>
          <th class="gantt-corner-col"></th>
          ${Array.from({ length: totalDays }, (_, i) => {
      let d = i + 1;
      let dayStr = String(d).padStart(2, "0");
      return `<th class="gantt-day-col">${dayStr}</th>`;
    }).join("")}
        </tr>
      </thead>`;
    let tbodyHTML = "<tbody>";
    for (let page of allPages) {
      let fmTitle = page.title || page.file.name || "Untitled";
      let situation = page.situation || "";
      if (situation === "\uC77C\uC2DC\uC911\uC9C0") {
        this.noteColorMap[fmTitle] = { colorIndex: null };
      } else {
        this.assignColorToNote(fmTitle, data.finalColorPalette);
      }
      tbodyHTML += `<tr>`;
      tbodyHTML += `<td class="gantt-note-col">${fmTitle}</td>`;
      for (let d = 1; d <= totalDays; d++) {
        tbodyHTML += `
          <td class="gantt-cell"
              data-note-title="${fmTitle}"
              data-day="${d}"
              data-situation="${situation}"></td>`;
      }
      tbodyHTML += `</tr>`;
    }
    tbodyHTML += "</tbody>";
    return `<table class="gantt-table">${theadHTML}${tbodyHTML}</table>`;
  }
  /**
   * (F) 범례
   */
  getLegendColor(title, palette) {
    const entry = this.noteColorMap[title];
    if (!entry)
      return "#999";
    if (entry.colorIndex === null)
      return "#888";
    return palette[entry.colorIndex] || "#999";
  }
  buildLegendHTML(settings, data) {
    const palette = data.finalColorPalette;
    let noteTitles = Object.keys(this.noteColorMap);
    if (noteTitles.length === 0)
      return "";
    noteTitles.sort();
    let legendItems = noteTitles.map((title) => {
      let c = this.getLegendColor(title, palette);
      return `
        <div class="gantt-legend-item">
          <span class="gantt-legend-color" style="background-color:${c};"></span>
          <span class="gantt-legend-text">${title}</span>
        </div>`;
    }).join("");
    return `<div class="gantt-legend">${legendItems}</div>`;
  }
  buildLegendData(data) {
    const palette = data.finalColorPalette;
    let result = {};
    for (const title in this.noteColorMap) {
      const entry = this.noteColorMap[title];
      if (!entry) {
        result[title] = "#999";
        continue;
      }
      if (entry.colorIndex === null) {
        result[title] = "#888";
      } else {
        result[title] = palette[entry.colorIndex] || "#999";
      }
    }
    return result;
  }
  getLegendDataFromData(data) {
    return this.buildLegendData(data);
  }
  /**
   * (G) 렌더 함수
   */
  async renderView(dv, settings = {}) {
    var _a, _b, _c;
    if (!((_a = dv.current) == null ? void 0 : _a.call(dv)) || !((_b = dv.current()) == null ? void 0 : _b.file)) {
      console.warn("GanttTable: No current file - returning quietly.");
      return;
    }
    if (!settings["id"] || typeof settings["id"] !== "string") {
      settings["id"] = "gantt-auto-" + Date.now() + "-" + Math.random().toString(16).slice(2, 6);
    }
    this.isDarkMode = document.body.classList.contains("theme-dark");
    let now = /* @__PURE__ */ new Date();
    let monthName = new Intl.DateTimeFormat("en", { month: "long" }).format(now);
    dv.paragraph(`\u{1F5D3}\uFE0F **${monthName}**`);
    this.noteColorMap = {};
    this.colorIndex = 0;
    this.legendData = {};
    let data = this.gatherData(dv, settings);
    if (!data || data.year === 0 || data.totalDays === 0) {
      dv.paragraph("*(No Gantt data)*");
      return;
    }
    let tableHTML = this.buildGanttTable(settings, data);
    let legendHTML = settings.showLegend === false ? "" : this.buildLegendHTML(settings, data);
    const container = document.createElement("div");
    container.classList.add("gantt-container");
    container.innerHTML = tableHTML + legendHTML;
    dv.container.appendChild(container);
    this.applyNoteColors(container, data);
    this.highlightToday(container, data);
    this.legendData = this.buildLegendData(data);
    if (settings.debugLegend === true) {
      dv.paragraph("**[Legend Data]**");
      dv.paragraph(JSON.stringify(this.legendData, null, 2));
    }
    if (settings.renderInteractiveBelow === true) {
      this.createResponsiveHR(dv.container);
      const engine = (_c = globalThis.miniTableGlobal) == null ? void 0 : _c.engine;
      if (engine && typeof engine.renderAutoView === "function") {
        let itSettings = settings.interactiveOptions || {};
        await engine.renderAutoView(dv, itSettings);
      }
    }
  }
  /**
   * (H) applyNoteColors
   */
  applyNoteColors(container, data) {
    const { dv, allPages, year, month, finalColorPalette } = data;
    allPages.forEach((page) => {
      let fmTitle = page.title || page.file.name || "Untitled";
      let situation = page.situation || "";
      let noteColor = "#999";
      if (situation === "\uC77C\uC2DC\uC911\uC9C0")
        noteColor = "#888";
      else
        noteColor = this.getNoteColor(fmTitle, finalColorPalette);
      let startDV = dv.date(page.created);
      let endDV = dv.date(page.end);
      if (!startDV || !endDV)
        return;
      let startJS = startDV.toJSDate();
      let endJS = endDV.toJSDate();
      let tds = container.querySelectorAll(`td[data-note-title="${fmTitle}"]`);
      tds.forEach((td) => {
        let d = parseInt(td.getAttribute("data-day"), 10);
        let thisDay = new Date(year, month, d);
        if (thisDay >= startJS && thisDay <= endJS) {
          td.style.setProperty("background-color", noteColor, "important");
        }
      });
    });
  }
  /**
   * (I) highlightToday
   */
  highlightToday(container, data) {
    let now = /* @__PURE__ */ new Date();
    let todayDay = now.getDate();
    let dayCells = container.querySelectorAll(`td[data-day="${todayDay}"]`);
    dayCells.forEach((td) => td.classList.add("gantt-today-col"));
  }
};

// src/main.ts
var DEFAULT_SETTINGS = {
  design: {
    dark: {
      buttonColor: "#3c3c3c",
      buttonHoverColor: "#555555",
      tableHeaderBgColor: "#444444",
      tableBorderColor: "#000000"
    },
    light: {
      buttonColor: "#cccccc",
      buttonHoverColor: "#dddddd",
      tableHeaderBgColor: "#bbbbbb",
      tableBorderColor: "#666666"
    }
  }
};
var MiniTablePlugin = class extends import_obsidian2.Plugin {
  constructor(app2, manifest) {
    super(app2, manifest);
  }
  async onload() {
    console.log("Mini Table Plugin onload()");
    if (!globalThis.miniTableGlobal) {
      globalThis.miniTableGlobal = {};
    }
    const originalConsoleError = console.error;
    console.error = (...args) => {
      try {
        if (args && args[0]) {
          let msg = args[0] instanceof Error ? args[0].message : String(args[0]);
          if (msg.includes("miniTableGlobal is not defined")) {
            return;
          }
        }
      } catch (e) {
      }
      originalConsoleError(...args);
    };
    await this.loadSettings();
    this.app.workspace.onLayoutReady(async () => {
      console.log("Mini Table Plugin onLayoutReady() - now applying settings & events.");
      this.applyDesignSettings();
      this.registerEvent(
        this.app.workspace.on("css-change", () => {
          this.applyDesignSettings();
        })
      );
      globalThis.miniTableGlobal.obsidian = {
        Notice: import_obsidian2.Notice,
        Modal: import_obsidian2.Modal,
        SuggestModal: import_obsidian2.SuggestModal
      };
      globalThis.miniTableGlobal.engine = new InteractiveTable();
      globalThis.miniTableGlobal.gantt = new GanttTable();
    });
    this.addSettingTab(new MiniTableSettingTab(this.app, this));
  }
  onunload() {
    console.log("Mini Table Plugin onunload()");
  }
  /**
   * 플러그인 설정 로드
   */
  async loadSettings() {
    const data = await this.loadData();
    this.settings = Object.assign({}, DEFAULT_SETTINGS, data);
  }
  /**
   * 플러그인 설정 저장
   */
  async saveSettings() {
    await this.saveData(this.settings);
    this.applyDesignSettings();
  }
  /**
   * 디자인 설정(테마) 적용
   */
  applyDesignSettings() {
    const rootStyle = document.documentElement.style;
    const d = this.settings.design;
    const isDark = document.body.classList.contains("theme-dark");
    const c = isDark ? d.dark : d.light;
    rootStyle.setProperty("--mini-table-button-color", c.buttonColor);
    rootStyle.setProperty("--mini-table-button-hover-color", c.buttonHoverColor);
    rootStyle.setProperty("--mini-table-header-bg-color", c.tableHeaderBgColor);
    rootStyle.setProperty("--mini-table-border-color", c.tableBorderColor);
  }
};
var MiniTableSettingTab = class extends import_obsidian2.PluginSettingTab {
  constructor(app2, plugin) {
    super(app2, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("h2", { text: "Mini Table Plugin Settings" });
    containerEl.createEl("h3", { text: "Dark Mode Colors" });
    new import_obsidian2.Setting(containerEl).setName("Dark Button Color").addColorPicker(
      (cp) => cp.setValue(this.plugin.settings.design.dark.buttonColor).onChange(async (val) => {
        this.plugin.settings.design.dark.buttonColor = val;
        await this.plugin.saveSettings();
      })
    );
    new import_obsidian2.Setting(containerEl).setName("Dark Button Hover Color").addColorPicker(
      (cp) => cp.setValue(this.plugin.settings.design.dark.buttonHoverColor).onChange(async (val) => {
        this.plugin.settings.design.dark.buttonHoverColor = val;
        await this.plugin.saveSettings();
      })
    );
    new import_obsidian2.Setting(containerEl).setName("Dark Table Header BG").addColorPicker(
      (cp) => cp.setValue(this.plugin.settings.design.dark.tableHeaderBgColor).onChange(async (val) => {
        this.plugin.settings.design.dark.tableHeaderBgColor = val;
        await this.plugin.saveSettings();
      })
    );
    new import_obsidian2.Setting(containerEl).setName("Dark Table Border Color").addColorPicker(
      (cp) => cp.setValue(this.plugin.settings.design.dark.tableBorderColor).onChange(async (val) => {
        this.plugin.settings.design.dark.tableBorderColor = val;
        await this.plugin.saveSettings();
      })
    );
    containerEl.createEl("h3", { text: "Light Mode Colors" });
    new import_obsidian2.Setting(containerEl).setName("Light Button Color").addColorPicker(
      (cp) => cp.setValue(this.plugin.settings.design.light.buttonColor).onChange(async (val) => {
        this.plugin.settings.design.light.buttonColor = val;
        await this.plugin.saveSettings();
      })
    );
    new import_obsidian2.Setting(containerEl).setName("Light Button Hover Color").addColorPicker(
      (cp) => cp.setValue(this.plugin.settings.design.light.buttonHoverColor).onChange(async (val) => {
        this.plugin.settings.design.light.buttonHoverColor = val;
        await this.plugin.saveSettings();
      })
    );
    new import_obsidian2.Setting(containerEl).setName("Light Table Header BG").addColorPicker(
      (cp) => cp.setValue(this.plugin.settings.design.light.tableHeaderBgColor).onChange(async (val) => {
        this.plugin.settings.design.light.tableHeaderBgColor = val;
        await this.plugin.saveSettings();
      })
    );
    new import_obsidian2.Setting(containerEl).setName("Light Table Border Color").addColorPicker(
      (cp) => cp.setValue(this.plugin.settings.design.light.tableBorderColor).onChange(async (val) => {
        this.plugin.settings.design.light.tableBorderColor = val;
        await this.plugin.saveSettings();
      })
    );
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vc3JjL21haW4udHMiLCAiLi4vc3JjL2ludGVyYWN0aXZlX3RhYmxlLnRzIiwgIi4uL3NyYy9nYW50dF90YWJsZS50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IHtcclxuXHRBcHAsXHJcblx0TW9kYWwsXHJcblx0Tm90aWNlLFxyXG5cdFBsdWdpbixcclxuXHRQbHVnaW5NYW5pZmVzdCxcclxuXHRQbHVnaW5TZXR0aW5nVGFiLFxyXG5cdFNldHRpbmcsXHJcblx0U3VnZ2VzdE1vZGFsLFxyXG5cdE1hcmtkb3duUG9zdFByb2Nlc3NvckNvbnRleHQsXHJcbn0gZnJvbSBcIm9ic2lkaWFuXCI7XHJcbmltcG9ydCB7IEludGVyYWN0aXZlVGFibGUgfSBmcm9tIFwiLi9pbnRlcmFjdGl2ZV90YWJsZVwiO1xyXG5pbXBvcnQgeyBHYW50dFRhYmxlIH0gZnJvbSBcIi4vZ2FudHRfdGFibGVcIjtcclxuXHJcbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG4gKiAxLiBbXHVDMTI0XHVDODE1IFx1Qzc3OFx1RDEzMFx1RDM5OFx1Qzc3NFx1QzJBNF0gRGFyayAvIExpZ2h0XHJcbiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cclxuaW50ZXJmYWNlIE1vZGVDb2xvckNvbmZpZyB7XHJcblx0YnV0dG9uQ29sb3I6IHN0cmluZztcclxuXHRidXR0b25Ib3ZlckNvbG9yOiBzdHJpbmc7XHJcblx0dGFibGVIZWFkZXJCZ0NvbG9yOiBzdHJpbmc7XHJcblx0dGFibGVCb3JkZXJDb2xvcjogc3RyaW5nO1xyXG59XHJcbmludGVyZmFjZSBEZXNpZ25PcHRpb25zIHtcclxuXHRkYXJrOiBNb2RlQ29sb3JDb25maWc7XHJcblx0bGlnaHQ6IE1vZGVDb2xvckNvbmZpZztcclxufVxyXG5cclxuLyoqXHJcbiAqIFx1RDUwQ1x1QjdFQ1x1QURGOFx1Qzc3OCBcdUM4MDRcdUNDQjQgXHVDMTI0XHVDODE1XHJcbiAqL1xyXG5pbnRlcmZhY2UgTWluaVRhYmxlUGx1Z2luU2V0dGluZ3Mge1xyXG5cdGRlc2lnbjogRGVzaWduT3B0aW9ucztcclxufVxyXG5cclxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbiAqIDIuIFx1QUUzMFx1QkNGOCBcdUMxMjRcdUM4MTVcclxuICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xyXG5jb25zdCBERUZBVUxUX1NFVFRJTkdTOiBNaW5pVGFibGVQbHVnaW5TZXR0aW5ncyA9IHtcclxuXHRkZXNpZ246IHtcclxuXHRcdGRhcms6IHtcclxuXHRcdFx0YnV0dG9uQ29sb3I6IFwiIzNjM2MzY1wiLFxyXG5cdFx0XHRidXR0b25Ib3ZlckNvbG9yOiBcIiM1NTU1NTVcIixcclxuXHRcdFx0dGFibGVIZWFkZXJCZ0NvbG9yOiBcIiM0NDQ0NDRcIixcclxuXHRcdFx0dGFibGVCb3JkZXJDb2xvcjogXCIjMDAwMDAwXCIsXHJcblx0XHR9LFxyXG5cdFx0bGlnaHQ6IHtcclxuXHRcdFx0YnV0dG9uQ29sb3I6IFwiI2NjY2NjY1wiLFxyXG5cdFx0XHRidXR0b25Ib3ZlckNvbG9yOiBcIiNkZGRkZGRcIixcclxuXHRcdFx0dGFibGVIZWFkZXJCZ0NvbG9yOiBcIiNiYmJiYmJcIixcclxuXHRcdFx0dGFibGVCb3JkZXJDb2xvcjogXCIjNjY2NjY2XCIsXHJcblx0XHR9LFxyXG5cdH0sXHJcbn07XHJcblxyXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuICogMy4gXHVCQTU0XHVDNzc4IFx1RDUwQ1x1QjdFQ1x1QURGOFx1Qzc3OCBcdUQwNzRcdUI3OThcdUMyQTRcclxuICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNaW5pVGFibGVQbHVnaW4gZXh0ZW5kcyBQbHVnaW4ge1xyXG5cdHNldHRpbmdzOiBNaW5pVGFibGVQbHVnaW5TZXR0aW5ncztcclxuXHJcblx0Y29uc3RydWN0b3IoYXBwOiBBcHAsIG1hbmlmZXN0OiBQbHVnaW5NYW5pZmVzdCkge1xyXG5cdFx0c3VwZXIoYXBwLCBtYW5pZmVzdCk7XHJcblx0fVxyXG5cclxuXHRhc3luYyBvbmxvYWQoKSB7XHJcblx0XHRjb25zb2xlLmxvZyhcIk1pbmkgVGFibGUgUGx1Z2luIG9ubG9hZCgpXCIpO1xyXG5cclxuXHRcdGlmICghKGdsb2JhbFRoaXMgYXMgYW55KS5taW5pVGFibGVHbG9iYWwpIHtcclxuXHRcdFx0KGdsb2JhbFRoaXMgYXMgYW55KS5taW5pVGFibGVHbG9iYWwgPSB7fTtcclxuXHRcdH1cclxuXHJcblx0XHRjb25zdCBvcmlnaW5hbENvbnNvbGVFcnJvciA9IGNvbnNvbGUuZXJyb3I7XHJcblx0XHRjb25zb2xlLmVycm9yID0gKC4uLmFyZ3M6IGFueVtdKSA9PiB7XHJcblx0XHRcdHRyeSB7XHJcblx0XHRcdFx0aWYgKGFyZ3MgJiYgYXJnc1swXSkge1xyXG5cdFx0XHRcdFx0bGV0IG1zZyA9IGFyZ3NbMF0gaW5zdGFuY2VvZiBFcnJvciA/IGFyZ3NbMF0ubWVzc2FnZSA6IFN0cmluZyhhcmdzWzBdKTtcclxuXHRcdFx0XHRcdGlmIChtc2cuaW5jbHVkZXMoXCJtaW5pVGFibGVHbG9iYWwgaXMgbm90IGRlZmluZWRcIikpIHtcclxuXHRcdFx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSBjYXRjaCB7fVxyXG5cdFx0XHRvcmlnaW5hbENvbnNvbGVFcnJvciguLi5hcmdzKTtcclxuXHRcdH07XHJcblxyXG5cdFx0YXdhaXQgdGhpcy5sb2FkU2V0dGluZ3MoKTtcclxuXHJcblx0XHR0aGlzLmFwcC53b3Jrc3BhY2Uub25MYXlvdXRSZWFkeShhc3luYyAoKSA9PiB7XHJcblx0XHRcdGNvbnNvbGUubG9nKFwiTWluaSBUYWJsZSBQbHVnaW4gb25MYXlvdXRSZWFkeSgpIC0gbm93IGFwcGx5aW5nIHNldHRpbmdzICYgZXZlbnRzLlwiKTtcclxuXHJcblx0XHRcdHRoaXMuYXBwbHlEZXNpZ25TZXR0aW5ncygpO1xyXG5cdFx0XHR0aGlzLnJlZ2lzdGVyRXZlbnQoXHJcblx0XHRcdFx0dGhpcy5hcHAud29ya3NwYWNlLm9uKFwiY3NzLWNoYW5nZVwiLCAoKSA9PiB7XHJcblx0XHRcdFx0XHR0aGlzLmFwcGx5RGVzaWduU2V0dGluZ3MoKTtcclxuXHRcdFx0XHR9KVxyXG5cdFx0XHQpO1xyXG5cclxuXHRcdFx0KGdsb2JhbFRoaXMgYXMgYW55KS5taW5pVGFibGVHbG9iYWwub2JzaWRpYW4gPSB7XHJcblx0XHRcdFx0Tm90aWNlLFxyXG5cdFx0XHRcdE1vZGFsLFxyXG5cdFx0XHRcdFN1Z2dlc3RNb2RhbCxcclxuXHRcdFx0fTtcclxuXHRcdFx0KGdsb2JhbFRoaXMgYXMgYW55KS5taW5pVGFibGVHbG9iYWwuZW5naW5lID0gbmV3IEludGVyYWN0aXZlVGFibGUoKTtcclxuXHRcdFx0KGdsb2JhbFRoaXMgYXMgYW55KS5taW5pVGFibGVHbG9iYWwuZ2FudHQgPSBuZXcgR2FudHRUYWJsZSgpO1xyXG5cclxuXHRcdFx0Ly8gXHVBRTMwXHVDODc0IGludmVyc2UgZm9sZCBiZWhhdmlvciBcdUFFMzBcdUIyQTUgXHVDODFDXHVBQzcwOiBcdUFEMDBcdUI4MjggTWFya2Rvd24gUG9zdFByb2Nlc3NvciBcdUNGNTRcdUI0RENcdUIyOTQgXHVDMEFEXHVDODFDXHVCNDI4LlxyXG5cdFx0fSk7XHJcblxyXG5cdFx0dGhpcy5hZGRTZXR0aW5nVGFiKG5ldyBNaW5pVGFibGVTZXR0aW5nVGFiKHRoaXMuYXBwLCB0aGlzKSk7XHJcblx0fVxyXG5cclxuXHRvbnVubG9hZCgpIHtcclxuXHRcdGNvbnNvbGUubG9nKFwiTWluaSBUYWJsZSBQbHVnaW4gb251bmxvYWQoKVwiKTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFx1RDUwQ1x1QjdFQ1x1QURGOFx1Qzc3OCBcdUMxMjRcdUM4MTUgXHVCODVDXHVCNERDXHJcblx0ICovXHJcblx0YXN5bmMgbG9hZFNldHRpbmdzKCkge1xyXG5cdFx0Y29uc3QgZGF0YSA9IGF3YWl0IHRoaXMubG9hZERhdGEoKTtcclxuXHRcdHRoaXMuc2V0dGluZ3MgPSBPYmplY3QuYXNzaWduKHt9LCBERUZBVUxUX1NFVFRJTkdTLCBkYXRhKTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFx1RDUwQ1x1QjdFQ1x1QURGOFx1Qzc3OCBcdUMxMjRcdUM4MTUgXHVDODAwXHVDN0E1XHJcblx0ICovXHJcblx0YXN5bmMgc2F2ZVNldHRpbmdzKCkge1xyXG5cdFx0YXdhaXQgdGhpcy5zYXZlRGF0YSh0aGlzLnNldHRpbmdzKTtcclxuXHRcdHRoaXMuYXBwbHlEZXNpZ25TZXR0aW5ncygpO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogXHVCNTE0XHVDNzkwXHVDNzc4IFx1QzEyNFx1QzgxNShcdUQxNENcdUI5QzgpIFx1QzgwMVx1QzZBOVxyXG5cdCAqL1xyXG5cdHByaXZhdGUgYXBwbHlEZXNpZ25TZXR0aW5ncygpIHtcclxuXHRcdGNvbnN0IHJvb3RTdHlsZSA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZTtcclxuXHRcdGNvbnN0IGQgPSB0aGlzLnNldHRpbmdzLmRlc2lnbjtcclxuXHRcdGNvbnN0IGlzRGFyayA9IGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmNvbnRhaW5zKFwidGhlbWUtZGFya1wiKTtcclxuXHRcdGNvbnN0IGMgPSBpc0RhcmsgPyBkLmRhcmsgOiBkLmxpZ2h0O1xyXG5cclxuXHRcdHJvb3RTdHlsZS5zZXRQcm9wZXJ0eShcIi0tbWluaS10YWJsZS1idXR0b24tY29sb3JcIiwgYy5idXR0b25Db2xvcik7XHJcblx0XHRyb290U3R5bGUuc2V0UHJvcGVydHkoXCItLW1pbmktdGFibGUtYnV0dG9uLWhvdmVyLWNvbG9yXCIsIGMuYnV0dG9uSG92ZXJDb2xvcik7XHJcblx0XHRyb290U3R5bGUuc2V0UHJvcGVydHkoXCItLW1pbmktdGFibGUtaGVhZGVyLWJnLWNvbG9yXCIsIGMudGFibGVIZWFkZXJCZ0NvbG9yKTtcclxuXHRcdHJvb3RTdHlsZS5zZXRQcm9wZXJ0eShcIi0tbWluaS10YWJsZS1ib3JkZXItY29sb3JcIiwgYy50YWJsZUJvcmRlckNvbG9yKTtcclxuXHR9XHJcbn1cclxuXHJcbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG4gKiA0LiBbXHVDMTI0XHVDODE1IFx1RDBFRCBcdUQwNzRcdUI3OThcdUMyQTRdXHJcbiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cclxuY2xhc3MgTWluaVRhYmxlU2V0dGluZ1RhYiBleHRlbmRzIFBsdWdpblNldHRpbmdUYWIge1xyXG5cdHBsdWdpbjogTWluaVRhYmxlUGx1Z2luO1xyXG5cclxuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBNaW5pVGFibGVQbHVnaW4pIHtcclxuXHRcdHN1cGVyKGFwcCwgcGx1Z2luKTtcclxuXHRcdHRoaXMucGx1Z2luID0gcGx1Z2luO1xyXG5cdH1cclxuXHJcblx0ZGlzcGxheSgpOiB2b2lkIHtcclxuXHRcdGNvbnN0IHsgY29udGFpbmVyRWwgfSA9IHRoaXM7XHJcblx0XHRjb250YWluZXJFbC5lbXB0eSgpO1xyXG5cclxuXHRcdGNvbnRhaW5lckVsLmNyZWF0ZUVsKFwiaDJcIiwgeyB0ZXh0OiBcIk1pbmkgVGFibGUgUGx1Z2luIFNldHRpbmdzXCIgfSk7XHJcblxyXG5cdFx0Ly8gRGFyayBNb2RlXHJcblx0XHRjb250YWluZXJFbC5jcmVhdGVFbChcImgzXCIsIHsgdGV4dDogXCJEYXJrIE1vZGUgQ29sb3JzXCIgfSk7XHJcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuXHRcdFx0LnNldE5hbWUoXCJEYXJrIEJ1dHRvbiBDb2xvclwiKVxyXG5cdFx0XHQuYWRkQ29sb3JQaWNrZXIoKGNwKSA9PlxyXG5cdFx0XHRcdGNwXHJcblx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZGVzaWduLmRhcmsuYnV0dG9uQ29sb3IpXHJcblx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbCkgPT4ge1xyXG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5kZXNpZ24uZGFyay5idXR0b25Db2xvciA9IHZhbDtcclxuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHR9KVxyXG5cdFx0XHQpO1xyXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcblx0XHRcdC5zZXROYW1lKFwiRGFyayBCdXR0b24gSG92ZXIgQ29sb3JcIilcclxuXHRcdFx0LmFkZENvbG9yUGlja2VyKChjcCkgPT5cclxuXHRcdFx0XHRjcFxyXG5cdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmRlc2lnbi5kYXJrLmJ1dHRvbkhvdmVyQ29sb3IpXHJcblx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbCkgPT4ge1xyXG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5kZXNpZ24uZGFyay5idXR0b25Ib3ZlckNvbG9yID0gdmFsO1xyXG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdH0pXHJcblx0XHRcdCk7XHJcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuXHRcdFx0LnNldE5hbWUoXCJEYXJrIFRhYmxlIEhlYWRlciBCR1wiKVxyXG5cdFx0XHQuYWRkQ29sb3JQaWNrZXIoKGNwKSA9PlxyXG5cdFx0XHRcdGNwXHJcblx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZGVzaWduLmRhcmsudGFibGVIZWFkZXJCZ0NvbG9yKVxyXG5cdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWwpID0+IHtcclxuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuZGVzaWduLmRhcmsudGFibGVIZWFkZXJCZ0NvbG9yID0gdmFsO1xyXG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdH0pXHJcblx0XHRcdCk7XHJcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuXHRcdFx0LnNldE5hbWUoXCJEYXJrIFRhYmxlIEJvcmRlciBDb2xvclwiKVxyXG5cdFx0XHQuYWRkQ29sb3JQaWNrZXIoKGNwKSA9PlxyXG5cdFx0XHRcdGNwXHJcblx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZGVzaWduLmRhcmsudGFibGVCb3JkZXJDb2xvcilcclxuXHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsKSA9PiB7XHJcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmRlc2lnbi5kYXJrLnRhYmxlQm9yZGVyQ29sb3IgPSB2YWw7XHJcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0fSlcclxuXHRcdFx0KTtcclxuXHJcblx0XHQvLyBMaWdodCBNb2RlXHJcblx0XHRjb250YWluZXJFbC5jcmVhdGVFbChcImgzXCIsIHsgdGV4dDogXCJMaWdodCBNb2RlIENvbG9yc1wiIH0pO1xyXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcblx0XHRcdC5zZXROYW1lKFwiTGlnaHQgQnV0dG9uIENvbG9yXCIpXHJcblx0XHRcdC5hZGRDb2xvclBpY2tlcigoY3ApID0+XHJcblx0XHRcdFx0Y3BcclxuXHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5kZXNpZ24ubGlnaHQuYnV0dG9uQ29sb3IpXHJcblx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbCkgPT4ge1xyXG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5kZXNpZ24ubGlnaHQuYnV0dG9uQ29sb3IgPSB2YWw7XHJcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0fSlcclxuXHRcdFx0KTtcclxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG5cdFx0XHQuc2V0TmFtZShcIkxpZ2h0IEJ1dHRvbiBIb3ZlciBDb2xvclwiKVxyXG5cdFx0XHQuYWRkQ29sb3JQaWNrZXIoKGNwKSA9PlxyXG5cdFx0XHRcdGNwXHJcblx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZGVzaWduLmxpZ2h0LmJ1dHRvbkhvdmVyQ29sb3IpXHJcblx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbCkgPT4ge1xyXG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5kZXNpZ24ubGlnaHQuYnV0dG9uSG92ZXJDb2xvciA9IHZhbDtcclxuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHR9KVxyXG5cdFx0XHQpO1xyXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcblx0XHRcdC5zZXROYW1lKFwiTGlnaHQgVGFibGUgSGVhZGVyIEJHXCIpXHJcblx0XHRcdC5hZGRDb2xvclBpY2tlcigoY3ApID0+XHJcblx0XHRcdFx0Y3BcclxuXHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5kZXNpZ24ubGlnaHQudGFibGVIZWFkZXJCZ0NvbG9yKVxyXG5cdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWwpID0+IHtcclxuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuZGVzaWduLmxpZ2h0LnRhYmxlSGVhZGVyQmdDb2xvciA9IHZhbDtcclxuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHR9KVxyXG5cdFx0XHQpO1xyXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcblx0XHRcdC5zZXROYW1lKFwiTGlnaHQgVGFibGUgQm9yZGVyIENvbG9yXCIpXHJcblx0XHRcdC5hZGRDb2xvclBpY2tlcigoY3ApID0+XHJcblx0XHRcdFx0Y3BcclxuXHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5kZXNpZ24ubGlnaHQudGFibGVCb3JkZXJDb2xvcilcclxuXHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsKSA9PiB7XHJcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmRlc2lnbi5saWdodC50YWJsZUJvcmRlckNvbG9yID0gdmFsO1xyXG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdH0pXHJcblx0XHRcdCk7XHJcblx0fVxyXG59XHJcbiIsICJpbXBvcnQgeyBBcHAsIFRGaWxlIH0gZnJvbSBcIm9ic2lkaWFuXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgSW50ZXJhY3RpdmVUYWJsZSB7XHJcblx0cHJpdmF0ZSBkdjogYW55O1xyXG5cclxuXHQvLyBcdUM4MTVcdUFERENcdUQ0NUNcdUQ2MDRcdUMyREQgXHVDRTkwXHVDMkYxIChcdUIwQTBcdUM5REMsIFx1QzJEQ1x1QUMwNCBcdUQzMENcdUMyRjEpXHJcblx0cHJpdmF0ZSByZWFkb25seSBkYXRlWU1EUmVnZXggPSAvXihcXGR7NH0pLShcXGR7MSwyfSktKFxcZHsxLDJ9KSQvO1xyXG5cdHByaXZhdGUgcmVhZG9ubHkgdGltZUhNUmVnZXggPSAvXihcXGR7MSwyfSk6KFxcZHsxLDJ9KSQvO1xyXG5cclxuXHQvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cdCAgIFtBXSBcdUJERjAgSUQgXHVDMEREXHVDMTMxXHJcblx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuXHRwcml2YXRlIHJlc29sdmVWaWV3SWQoc2V0dGluZ3M6IGFueSk6IHN0cmluZyB7XHJcblx0XHRsZXQgaWQgPSBzZXR0aW5nc1tcImlkXCJdO1xyXG5cdFx0aWYgKCFpZCB8fCB0eXBlb2YgaWQgIT09IFwic3RyaW5nXCIpIHtcclxuXHRcdFx0aWQgPSBcImF1dG8tXCIgKyBEYXRlLm5vdygpICsgXCItXCIgKyBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDE2KS5zbGljZSgyLCA2KTtcclxuXHRcdH1cclxuXHRcdHJldHVybiBpZDtcclxuXHR9XHJcblxyXG5cdC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblx0ICAgW0JdIFx1Qjg1Q1x1Q0VFQyBcdUMyQTRcdUQxQTBcdUI5QUNcdUM5QzAgXHVBRDAwXHVCODI4IChcdUQwQTQgXHVDMEREXHVDMTMxIFx1RDVFQ1x1RDM3QyBcdUQzRUNcdUQ1NjgpXHJcblx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuXHRwcml2YXRlIGdldFN0b3JhZ2VLZXkobm90ZVBhdGg6IHN0cmluZywgdmlld0lkOiBzdHJpbmcpOiBzdHJpbmcge1xyXG5cdFx0cmV0dXJuIGBtaW5pVGFibGVFbmdpbmU6OiR7bm90ZVBhdGh9Ojoke3ZpZXdJZH1gO1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSBfZ2V0TG9jYWxTdGF0ZShub3RlUGF0aDogc3RyaW5nLCB2aWV3SWQ6IHN0cmluZykge1xyXG5cdFx0Y29uc3Qga2V5ID0gdGhpcy5nZXRTdG9yYWdlS2V5KG5vdGVQYXRoLCB2aWV3SWQpO1xyXG5cdFx0Y29uc3QgZGF0YVN0cmluZyA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKGtleSk7XHJcblx0XHRpZiAoIWRhdGFTdHJpbmcpIHJldHVybiB7fTtcclxuXHRcdHRyeSB7XHJcblx0XHRcdHJldHVybiBKU09OLnBhcnNlKGRhdGFTdHJpbmcpO1xyXG5cdFx0fSBjYXRjaCB7XHJcblx0XHRcdHJldHVybiB7fTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdHByaXZhdGUgX3NldExvY2FsU3RhdGUobm90ZVBhdGg6IHN0cmluZywgdmlld0lkOiBzdHJpbmcsIG9iajogYW55KSB7XHJcblx0XHRjb25zdCBrZXkgPSB0aGlzLmdldFN0b3JhZ2VLZXkobm90ZVBhdGgsIHZpZXdJZCk7XHJcblx0XHRsb2NhbFN0b3JhZ2Uuc2V0SXRlbShrZXksIEpTT04uc3RyaW5naWZ5KG9iaikpO1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSBfZ2V0U3RhdGUobm90ZVBhdGg6IHN0cmluZywgdmlld0lkOiBzdHJpbmcsIHByb3BOYW1lOiBzdHJpbmcpIHtcclxuXHRcdGNvbnN0IGxvY2FsRGF0YSA9IHRoaXMuX2dldExvY2FsU3RhdGUobm90ZVBhdGgsIHZpZXdJZCk7XHJcblx0XHRyZXR1cm4gbG9jYWxEYXRhLmhhc093blByb3BlcnR5KHByb3BOYW1lKSA/IGxvY2FsRGF0YVtwcm9wTmFtZV0gOiBudWxsO1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSBfc2V0U3RhdGUobm90ZVBhdGg6IHN0cmluZywgdmlld0lkOiBzdHJpbmcsIHByb3BOYW1lOiBzdHJpbmcsIHZhbDogYW55KSB7XHJcblx0XHRjb25zdCBsb2NhbERhdGEgPSB0aGlzLl9nZXRMb2NhbFN0YXRlKG5vdGVQYXRoLCB2aWV3SWQpO1xyXG5cdFx0bG9jYWxEYXRhW3Byb3BOYW1lXSA9IHZhbDtcclxuXHRcdHRoaXMuX3NldExvY2FsU3RhdGUobm90ZVBhdGgsIHZpZXdJZCwgbG9jYWxEYXRhKTtcclxuXHR9XHJcblxyXG5cdC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblx0ICAgcmVmcmVzaCAoXHVCMkU0XHVDOTExIFx1RDYzOFx1Q0Q5QyBcdUNGNTRcdUI0REMgXHVEMUI1XHVENTY5KVxyXG5cdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcblx0cHJpdmF0ZSByZWZyZXNoQ29tbWFuZChkZWxheTogbnVtYmVyID0gNTApIHtcclxuXHRcdHNldFRpbWVvdXQoKCkgPT4ge1xyXG5cdFx0XHRhcHAuY29tbWFuZHMuZXhlY3V0ZUNvbW1hbmRCeUlkKFwiZGF0YXZpZXc6ZGF0YXZpZXctZm9yY2UtcmVmcmVzaC12aWV3c1wiKTtcclxuXHRcdH0sIGRlbGF5KTtcclxuXHR9XHJcblxyXG5cdC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblx0ICAgW0NdIFx1QkM4NFx1RDJCQ1x1QjRFNFxyXG5cdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcblx0YXN5bmMgdmlld0ZvbGRlckJ1dHRvbihyZWxQYXRoOiBzdHJpbmcsIGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpIHtcclxuXHRcdGNvbnN0IGJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XHJcblx0XHRidG4uY2xhc3NOYW1lID0gXCJkdml0LWJ1dHRvbiBmb2xkZXItYnV0dG9uXCI7XHJcblx0XHRidG4uYXBwZW5kKFwiXHUyMUFBIE9wZW4gRm9sZGVyXCIpO1xyXG5cdFx0YnRuLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XHJcblx0XHRcdHRyeSB7XHJcblx0XHRcdFx0Y29uc3QgeyBzaGVsbCB9ID0gKHdpbmRvdyBhcyBhbnkpLnJlcXVpcmUoXCJlbGVjdHJvblwiKTtcclxuXHRcdFx0XHRjb25zdCBwYXRoTW9kID0gKHdpbmRvdyBhcyBhbnkpLnJlcXVpcmUoXCJwYXRoXCIpO1xyXG5cdFx0XHRcdGlmICghc2hlbGwpIHtcclxuXHRcdFx0XHRcdG5ldyAoZ2xvYmFsVGhpcyBhcyBhbnkpLm1pbmlUYWJsZUdsb2JhbC5vYnNpZGlhbi5Ob3RpY2UoXCJFbGVjdHJvbiBzaGVsbCBpcyB1bmRlZmluZWQhXCIpO1xyXG5cdFx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRjb25zdCB2YXVsdEJhc2UgPSAoYXBwLnZhdWx0LmFkYXB0ZXIgYXMgYW55KS5iYXNlUGF0aDtcclxuXHRcdFx0XHRjb25zdCBhYnNvbHV0ZVBhdGggPSBwYXRoTW9kLnJlc29sdmUodmF1bHRCYXNlLCByZWxQYXRoKTtcclxuXHRcdFx0XHRjb25zdCBpc0ZpbGUgPSBwYXRoTW9kLmV4dG5hbWUoYWJzb2x1dGVQYXRoKSAhPT0gXCJcIjtcclxuXHRcdFx0XHRpZiAoaXNGaWxlKSB7XHJcblx0XHRcdFx0XHRzaGVsbC5zaG93SXRlbUluRm9sZGVyKGFic29sdXRlUGF0aCk7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdHNoZWxsLm9wZW5QYXRoKGFic29sdXRlUGF0aCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9IGNhdGNoIChlOiBhbnkpIHtcclxuXHRcdFx0XHRuZXcgKGdsb2JhbFRoaXMgYXMgYW55KS5taW5pVGFibGVHbG9iYWwub2JzaWRpYW4uTm90aWNlKGBFcnJvcjpcXG4ke2UubWVzc2FnZX1gKTtcclxuXHRcdFx0fVxyXG5cdFx0fTtcclxuXHRcdGNvbnRhaW5lci5hcHBlbmQoYnRuKTtcclxuXHR9XHJcblxyXG5cdGFzeW5jIG5ld0ZvbGRlckJ1dHRvbihkdjogYW55LCBhcmdzOiB7IGZvbGRlck5hbWU/OiBzdHJpbmcgfSwgY29udGFpbmVyOiBIVE1MRWxlbWVudCkge1xyXG5cdFx0bGV0IHsgZm9sZGVyTmFtZSB9ID0gYXJncztcclxuXHRcdGlmICghZm9sZGVyTmFtZSkgZm9sZGVyTmFtZSA9IFwiTmV3IEZvbGRlclwiO1xyXG5cdFx0Y29uc3QgYnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcclxuXHRcdGJ0bi5jbGFzc05hbWUgPSBcImR2aXQtYnV0dG9uIGZvbGRlci1idXR0b25cIjtcclxuXHRcdGJ0bi5hcHBlbmQoXCIrIFx1QzBDOCBcdUQzRjRcdUIzNTRcIik7XHJcblx0XHRidG4ub25jbGljayA9IGFzeW5jICgpID0+IHtcclxuXHRcdFx0Y29uc3QgaW5wdXROYW1lID0gYXdhaXQgdGhpcy50ZXh0SW5wdXQoZm9sZGVyTmFtZSk7XHJcblx0XHRcdGlmICghaW5wdXROYW1lKSByZXR1cm47XHJcblx0XHRcdGNvbnN0IGN1cnJlbnRGb2xkZXIgPSBkdi5jdXJyZW50KCkuZmlsZS5mb2xkZXIgfHwgXCJcIjtcclxuXHRcdFx0Y29uc3QgZmluYWxQYXRoID0gY3VycmVudEZvbGRlciA/IGAke2N1cnJlbnRGb2xkZXJ9LyR7aW5wdXROYW1lfWAgOiBpbnB1dE5hbWU7XHJcblx0XHRcdHRyeSB7XHJcblx0XHRcdFx0YXdhaXQgYXBwLnZhdWx0LmNyZWF0ZUZvbGRlcihmaW5hbFBhdGgpO1xyXG5cdFx0XHRcdG5ldyAoZ2xvYmFsVGhpcyBhcyBhbnkpLm1pbmlUYWJsZUdsb2JhbC5vYnNpZGlhbi5Ob3RpY2UoYEZvbGRlciBjcmVhdGVkOiAke2ZpbmFsUGF0aH1gKTtcclxuXHRcdFx0fSBjYXRjaCAoZXIpIHtcclxuXHRcdFx0XHRuZXcgKGdsb2JhbFRoaXMgYXMgYW55KS5taW5pVGFibGVHbG9iYWwub2JzaWRpYW4uTm90aWNlKGBFcnJvciBjcmVhdGluZyBmb2xkZXI6XFxuJHtmaW5hbFBhdGh9YCk7XHJcblx0XHRcdH1cclxuXHRcdH07XHJcblx0XHRjb250YWluZXIuYXBwZW5kKGJ0bik7XHJcblx0fVxyXG5cclxuXHRhc3luYyByZWZyZXNoQnV0dG9uKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsIG5vdGVQYXRoOiBzdHJpbmcsIHZpZXdJZDogc3RyaW5nKSB7XHJcblx0XHRjb25zdCBidG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xyXG5cdFx0YnRuLmNsYXNzTmFtZSA9IFwiZHZpdC1idXR0b25cIjtcclxuXHRcdGJ0bi5zdHlsZS5tYXJnaW5SaWdodCA9IFwiOHB4XCI7XHJcblx0XHRidG4uYXBwZW5kKFwiXHUyMUJBXCIpO1xyXG5cdFx0YnRuLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XHJcblx0XHRcdHRoaXMuX3NldFN0YXRlKG5vdGVQYXRoLCB2aWV3SWQsIGBzb3J0XyR7dmlld0lkfWAsIG51bGwpO1xyXG5cdFx0XHR0aGlzLl9zZXRTdGF0ZShub3RlUGF0aCwgdmlld0lkLCBgc29ydF9kaXJlY3Rpb25fJHt2aWV3SWR9YCwgXCJhc2NcIik7XHJcblx0XHRcdHRoaXMucmVmcmVzaENvbW1hbmQoNTApO1xyXG5cdFx0fTtcclxuXHRcdGNvbnRhaW5lci5hcHBlbmQoYnRuKTtcclxuXHR9XHJcblxyXG5cdC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblx0ICAgW0RdIGdldFZhbDogXHVDOTExXHVDQ0E5IFx1RDUwNFx1Qjg1Q1x1RDM3Q1x1RDJGMCBcdUM4MTFcdUFERkMgXHVDRDVDXHVDODAxXHVENjU0IChmb3IgXHVCOEU4XHVENTA0IFx1QzBBQ1x1QzZBOSlcclxuXHQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG5cdHByaXZhdGUgZ2V0VmFsKHBhZ2U6IGFueSwgcHJvcDogc3RyaW5nKSB7XHJcblx0XHRpZiAoIXBhZ2UpIHJldHVybiBudWxsO1xyXG5cdFx0aWYgKHByb3Auc3RhcnRzV2l0aChcImZpbGUuXCIpKSB7XHJcblx0XHRcdGNvbnN0IHBhcnRzID0gcHJvcC5zcGxpdChcIi5cIik7XHJcblx0XHRcdGxldCB2OiBhbnkgPSBwYWdlO1xyXG5cdFx0XHRmb3IgKGxldCBpID0gMDsgaSA8IHBhcnRzLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRcdFx0aWYgKHYgJiYgdltwYXJ0c1tpXV0gIT09IHVuZGVmaW5lZCkge1xyXG5cdFx0XHRcdFx0diA9IHZbcGFydHNbaV1dO1xyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRyZXR1cm4gbnVsbDtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdFx0cmV0dXJuIHY7XHJcblx0XHR9XHJcblx0XHRyZXR1cm4gcGFnZVtwcm9wXTtcclxuXHR9XHJcblxyXG5cdC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblx0ICAgW0VdIFx1QjBBMFx1QzlEQy9cdUMyRENcdUFDMDQvXHVDMjJCXHVDNzkwIFx1QzgxNVx1QjgyQyAmIFx1RDNFQ1x1QjlGN1xyXG5cdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcblx0cHJpdmF0ZSBwYXJzZURhdGVZTUQoc3RyOiBzdHJpbmcpIHtcclxuXHRcdGlmICh0eXBlb2Ygc3RyICE9PSBcInN0cmluZ1wiKSByZXR1cm4gbnVsbDtcclxuXHRcdGNvbnN0IG0gPSBzdHIubWF0Y2godGhpcy5kYXRlWU1EUmVnZXgpO1xyXG5cdFx0aWYgKG0pIHtcclxuXHRcdFx0Y29uc3QgeSA9IHBhcnNlSW50KG1bMV0sIDEwKTtcclxuXHRcdFx0Y29uc3QgbW8gPSBwYXJzZUludChtWzJdLCAxMCk7XHJcblx0XHRcdGNvbnN0IGQgPSBwYXJzZUludChtWzNdLCAxMCk7XHJcblx0XHRcdGlmICh5IDwgMTAwMCB8fCB5ID4gOTk5OSB8fCBtbyA8IDEgfHwgbW8gPiAxMiB8fCBkIDwgMSB8fCBkID4gMzEpIHJldHVybiBudWxsO1xyXG5cdFx0XHRyZXR1cm4gbmV3IERhdGUoeSwgbW8gLSAxLCBkKTtcclxuXHRcdH1cclxuXHRcdGNvbnN0IGR0ID0gbmV3IERhdGUoc3RyKTtcclxuXHRcdHJldHVybiBpc05hTihkdC5nZXRUaW1lKCkpID8gbnVsbCA6IGR0O1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSBwYXJzZVRpbWVITShzdHI6IHN0cmluZykge1xyXG5cdFx0aWYgKHR5cGVvZiBzdHIgIT09IFwic3RyaW5nXCIpIHJldHVybiBudWxsO1xyXG5cdFx0Y29uc3QgbSA9IHN0ci5tYXRjaCh0aGlzLnRpbWVITVJlZ2V4KTtcclxuXHRcdGlmICghbSkgcmV0dXJuIG51bGw7XHJcblx0XHRjb25zdCBoaCA9IHBhcnNlSW50KG1bMV0sIDEwKTtcclxuXHRcdGNvbnN0IG1tID0gcGFyc2VJbnQobVsyXSwgMTApO1xyXG5cdFx0aWYgKGhoID4gMjMgfHwgbW0gPiA1OSkgcmV0dXJuIG51bGw7XHJcblx0XHRjb25zdCBkdCA9IG5ldyBEYXRlKCk7XHJcblx0XHRkdC5zZXRIb3VycyhoaCk7XHJcblx0XHRkdC5zZXRNaW51dGVzKG1tKTtcclxuXHRcdHJldHVybiBkdDtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgZ2V0U29ydFZhbHVlKHZhbHVlOiBhbnksIF9wcm9wOiBzdHJpbmcpIHtcclxuXHRcdGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkIHx8IHZhbHVlID09PSBudWxsKSByZXR1cm4gXCJcIjtcclxuXHRcdGNvbnN0IHMgPSB0eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIgPyB2YWx1ZSA6IFN0cmluZyh2YWx1ZSk7XHJcblx0XHRsZXQgZHQgPSB0aGlzLnBhcnNlRGF0ZVlNRChzKTtcclxuXHRcdGlmICghZHQpIHtcclxuXHRcdFx0Y29uc3QgZHQyID0gdGhpcy5wYXJzZVRpbWVITShzKTtcclxuXHRcdFx0aWYgKGR0MikgZHQgPSBkdDI7XHJcblx0XHR9XHJcblx0XHRpZiAoZHQpIHJldHVybiBkdC5nZXRUaW1lKCk7XHJcblx0XHRjb25zdCBudW0gPSBwYXJzZUZsb2F0KHMpO1xyXG5cdFx0cmV0dXJuICFpc05hTihudW0pID8gbnVtIDogcy50b0xvd2VyQ2FzZSgpO1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSBmb3JtYXRBc1lZWVlNTURESWZEYXRlKHZhbHVlOiBhbnkpOiBzdHJpbmcge1xyXG5cdFx0aWYgKHZhbHVlID09PSB1bmRlZmluZWQgfHwgdmFsdWUgPT09IG51bGwpIHJldHVybiBcIlwiO1xyXG5cdFx0Y29uc3QgcyA9IHR5cGVvZiB2YWx1ZSA9PT0gXCJzdHJpbmdcIiA/IHZhbHVlIDogU3RyaW5nKHZhbHVlKTtcclxuXHRcdGNvbnN0IGR0ID0gdGhpcy5wYXJzZURhdGVZTUQocyk7XHJcblx0XHRpZiAoIWR0KSByZXR1cm4gcztcclxuXHRcdGNvbnN0IHl5ID0gZHQuZ2V0RnVsbFllYXIoKTtcclxuXHRcdGNvbnN0IG1tID0gZHQuZ2V0TW9udGgoKSArIDE7XHJcblx0XHRjb25zdCBkZCA9IGR0LmdldERhdGUoKTtcclxuXHRcdGNvbnN0IG1tU3RyID0gbW0gPCAxMCA/IFwiMFwiICsgbW0gOiBcIlwiICsgbW07XHJcblx0XHRjb25zdCBkZFN0ciA9IGRkIDwgMTAgPyBcIjBcIiArIGRkIDogXCJcIiArIGRkO1xyXG5cdFx0cmV0dXJuIGAke3l5fS0ke21tU3RyfS0ke2RkU3RyfWA7XHJcblx0fVxyXG5cclxuXHQvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cdCAgIFtGXSBcdUQwRENcdUFERjggXHVENTQ0XHVEMTMwXHJcblx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuXHRwcml2YXRlIGFzeW5jIHJlbmRlclRhZ0ZpbHRlckJ1dHRvbihwYWdlczogYW55W10sIGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsIG5vdGVQYXRoOiBzdHJpbmcsIHZpZXdJZDogc3RyaW5nKSB7XHJcblx0XHR0cnkge1xyXG5cdFx0XHRjb25zdCBjdXJyZW50VGFnID0gdGhpcy5fZ2V0U3RhdGUobm90ZVBhdGgsIHZpZXdJZCwgXCJ0YWdGaWx0ZXJcIikgfHwgXCJBTExcIjtcclxuXHRcdFx0Y29uc3QgYnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcclxuXHRcdFx0YnRuLmNsYXNzTmFtZSA9IFwiZHZpdC1idXR0b24gdGFnLWZpbHRlci1idXR0b25cIjtcclxuXHRcdFx0YnRuLnRleHRDb250ZW50ID0gY3VycmVudFRhZztcclxuXHRcdFx0YnRuLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XHJcblx0XHRcdFx0dHJ5IHtcclxuXHRcdFx0XHRcdGNvbnN0IGFsbFRhZ3MgPSBuZXcgU2V0PHN0cmluZz4oKTtcclxuXHRcdFx0XHRcdHBhZ2VzLmZvckVhY2goKHBnKSA9PiB7XHJcblx0XHRcdFx0XHRcdGNvbnN0IHRnID0gcGc/LmZpbGU/LnRhZ3MgfHwgcGc/LnRhZ3M7XHJcblx0XHRcdFx0XHRcdGlmICghdGcpIHJldHVybjtcclxuXHRcdFx0XHRcdFx0aWYgKEFycmF5LmlzQXJyYXkodGcpKSB0Zy5mb3JFYWNoKCh4eCkgPT4gYWxsVGFncy5hZGQoeHgpKTtcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0Y29uc3QgYXJyID0gW1wiQUxMXCIsIC4uLkFycmF5LmZyb20oYWxsVGFncykuc29ydCgpXTtcclxuXHRcdFx0XHRcdGNvbnN0IGNob3NlbiA9IGF3YWl0IHRoaXMuc3VnZ2VzdGVyKGFycik7XHJcblx0XHRcdFx0XHRpZiAoIWNob3NlbikgcmV0dXJuO1xyXG5cdFx0XHRcdFx0dGhpcy5fc2V0U3RhdGUobm90ZVBhdGgsIHZpZXdJZCwgXCJ0YWdGaWx0ZXJcIiwgY2hvc2VuKTtcclxuXHRcdFx0XHRcdHRoaXMucmVmcmVzaENvbW1hbmQoNTApO1xyXG5cdFx0XHRcdH0gY2F0Y2gge31cclxuXHRcdFx0fTtcclxuXHRcdFx0Y29udGFpbmVyLmFwcGVuZENoaWxkKGJ0bik7XHJcblx0XHR9IGNhdGNoIHt9XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIGFzeW5jIGFwcGx5VGFnRmlsdGVyKHBhZ2VzOiBhbnlbXSwgbm90ZVBhdGg6IHN0cmluZywgdmlld0lkOiBzdHJpbmcpIHtcclxuXHRcdGNvbnN0IHRnID0gdGhpcy5fZ2V0U3RhdGUobm90ZVBhdGgsIHZpZXdJZCwgXCJ0YWdGaWx0ZXJcIikgfHwgXCJBTExcIjtcclxuXHRcdGlmICh0ZyA9PT0gXCJBTExcIikgcmV0dXJuIHBhZ2VzO1xyXG5cdFx0cmV0dXJuIHBhZ2VzLmZpbHRlcigocGcpID0+IHtcclxuXHRcdFx0Y29uc3QgYXJyID0gcGc/LmZpbGU/LnRhZ3MgfHwgcGc/LnRhZ3M7XHJcblx0XHRcdHJldHVybiBBcnJheS5pc0FycmF5KGFycikgJiYgYXJyLmluY2x1ZGVzKHRnKTtcclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblx0LyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHQgICBbR10gZnJvbnRtYXR0ZXIgXHVENTQ0XHVEMTMwICsgXHVBQzgwXHVDMEM5XHJcblx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuXHRwcml2YXRlIGFzeW5jIGNoYW5nZVByb3BGaWx0ZXIocDogYW55LCBwYWdlczogYW55W10sIG5vdGVQYXRoOiBzdHJpbmcsIHZpZXdJZDogc3RyaW5nKSB7XHJcblx0XHRjb25zdCBzZXRPZlZhbHMgPSBuZXcgU2V0PHN0cmluZz4oKTtcclxuXHRcdGZvciAoY29uc3QgcGcgb2YgcGFnZXMpIHtcclxuXHRcdFx0bGV0IHJhd1ZhbCA9IHRoaXMuZ2V0VmFsKHBnLCBwLnByb3ApO1xyXG5cdFx0XHRsZXQgdmFsID0gdGhpcy5mb3JtYXRBc1lZWVlNTURESWZEYXRlKHJhd1ZhbCk7XHJcblx0XHRcdGlmICghdmFsKSB2YWwgPSBcIi1cIjtcclxuXHRcdFx0c2V0T2ZWYWxzLmFkZCh2YWwpO1xyXG5cdFx0fVxyXG5cdFx0bGV0IGFyck9mVmFscyA9IEFycmF5LmZyb20oc2V0T2ZWYWxzKTtcclxuXHRcdGNvbnN0IGhhc0Rhc2ggPSBhcnJPZlZhbHMuaW5jbHVkZXMoXCItXCIpO1xyXG5cdFx0aWYgKGhhc0Rhc2gpIHtcclxuXHRcdFx0YXJyT2ZWYWxzID0gYXJyT2ZWYWxzLmZpbHRlcih2ID0+IHYgIT09IFwiLVwiKTtcclxuXHRcdH1cclxuXHRcdGFyck9mVmFscy5zb3J0KChhLCBiKSA9PiBhLmxvY2FsZUNvbXBhcmUoYikpO1xyXG5cdFx0Y29uc3QgdXYgPSBoYXNEYXNoID8gW1wiQUxMXCIsIFwiLVwiXS5jb25jYXQoYXJyT2ZWYWxzKSA6IFtcIkFMTFwiLCAuLi5hcnJPZlZhbHNdO1xyXG5cdFx0Y29uc3QgY2hvc2VuID0gYXdhaXQgdGhpcy5zdWdnZXN0ZXIodXYpO1xyXG5cdFx0aWYgKCFjaG9zZW4pIHJldHVybjtcclxuXHRcdGNvbnN0IGZLZXkgPSBgZmlsdGVyXyR7dmlld0lkfV8ke3AucHJvcH1gO1xyXG5cdFx0dGhpcy5fc2V0U3RhdGUobm90ZVBhdGgsIHZpZXdJZCwgZktleSwgY2hvc2VuKTtcclxuXHRcdHRoaXMucmVmcmVzaENvbW1hbmQoNTApO1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSBhc3luYyBmaWx0ZXJCeVByb3AocDogYW55LCBwYWdlczogYW55W10sIG5vdGVQYXRoOiBzdHJpbmcsIHZpZXdJZDogc3RyaW5nKSB7XHJcblx0XHRjb25zdCBmS2V5ID0gYGZpbHRlcl8ke3ZpZXdJZH1fJHtwLnByb3B9YDtcclxuXHRcdGNvbnN0IHZhbCA9IHRoaXMuX2dldFN0YXRlKG5vdGVQYXRoLCB2aWV3SWQsIGZLZXkpO1xyXG5cdFx0aWYgKCF2YWwgfHwgdmFsID09PSBcIkFMTFwiKSByZXR1cm4gcGFnZXM7XHJcblx0XHRyZXR1cm4gcGFnZXMuZmlsdGVyKChwZykgPT4ge1xyXG5cdFx0XHRsZXQgcmF3ViA9IHRoaXMuZ2V0VmFsKHBnLCBwLnByb3ApO1xyXG5cdFx0XHRsZXQgY21wViA9IHRoaXMuZm9ybWF0QXNZWVlZTU1ERElmRGF0ZShyYXdWKTtcclxuXHRcdFx0aWYgKCFjbXBWKSBjbXBWID0gXCItXCI7XHJcblx0XHRcdHJldHVybiBjbXBWID09PSB2YWw7XHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIGZpbGUubGluayBcdUFDODBcdUMwQzkgXHVDMkRDIFwiZnJvbnRtYXR0ZXIudGl0bGVcIlx1QjlDQyBcdUFDODBcdUMwQzkgXHVCMzAwXHVDMEMxXHVDNzNDXHVCODVDIFx1QzBBQ1x1QzZBOVxyXG5cdCAqL1xyXG5cdHByaXZhdGUgYnVpbGRTZWFyY2hUZXh0TWFwKHByb3BzOiBhbnlbXSwgcGFnZXM6IGFueVtdKSB7XHJcblx0XHRjb25zdCB0YWJsZVByb3BzID0gcHJvcHMuZmlsdGVyKChjKSA9PiBjLmNvbHVtbik7XHJcblx0XHRwYWdlcy5mb3JFYWNoKChwZykgPT4ge1xyXG5cdFx0XHRjb25zdCBidWY6IHN0cmluZ1tdID0gW107XHJcblx0XHRcdHRhYmxlUHJvcHMuZm9yRWFjaCgoY29sKSA9PiB7XHJcblx0XHRcdFx0bGV0IHR2OiBzdHJpbmc7XHJcblx0XHRcdFx0aWYgKGNvbC5wcm9wID09PSBcImZpbGUubGlua1wiKSB7XHJcblx0XHRcdFx0XHRjb25zdCBhbGlhc1BhcnQgPSBwZy5fX2ZtVGl0bGUgfHwgXCJcIjtcclxuXHRcdFx0XHRcdHR2ID0gYWxpYXNQYXJ0O1xyXG5cdFx0XHRcdH0gZWxzZSBpZiAoY29sLnByb3AgPT09IFwidGFibGVcIikge1xyXG5cdFx0XHRcdFx0dHYgPSBwZy5fX2ZtVGFibGUgfHwgXCJcIjtcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0Y29uc3QgcmF3VmFsID0gdGhpcy5nZXRWYWwocGcsIGNvbC5wcm9wKTtcclxuXHRcdFx0XHRcdHR2ID0gcmF3VmFsID09IG51bGwgPyBcIlwiIDogU3RyaW5nKHJhd1ZhbCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGJ1Zi5wdXNoKHR2LnRvTG93ZXJDYXNlKCkpO1xyXG5cdFx0XHR9KTtcclxuXHRcdFx0cGcuX19zZWFyY2hUZXh0ID0gYnVmLmpvaW4oXCIgXCIpO1xyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIGFzeW5jIGZpbHRlclByb3BzKHByb3BzOiBhbnlbXSwgcGFnZXM6IGFueVtdLCBub3RlUGF0aDogc3RyaW5nLCB2aWV3SWQ6IHN0cmluZykge1xyXG5cdFx0Zm9yIChjb25zdCBwIG9mIHByb3BzLmZpbHRlcigoeCkgPT4geC5maWx0ZXIpKSB7XHJcblx0XHRcdHBhZ2VzID0gYXdhaXQgdGhpcy5maWx0ZXJCeVByb3AocCwgcGFnZXMsIG5vdGVQYXRoLCB2aWV3SWQpO1xyXG5cdFx0fVxyXG5cdFx0cGFnZXMgPSBhd2FpdCB0aGlzLmFwcGx5VGFnRmlsdGVyKHBhZ2VzLCBub3RlUGF0aCwgdmlld0lkKTtcclxuXHRcdGNvbnN0IHNyID0gdGhpcy5fZ2V0U3RhdGUobm90ZVBhdGgsIHZpZXdJZCwgYHNlYXJjaF9yZWFkeV8ke3ZpZXdJZH1gKTtcclxuXHRcdGlmIChzcikge1xyXG5cdFx0XHRsZXQgc1ZhbCA9ICh0aGlzLl9nZXRTdGF0ZShub3RlUGF0aCwgdmlld0lkLCBgc2VhcmNoXyR7dmlld0lkfWApIHx8IFwiXCIpLnRyaW0oKTtcclxuXHRcdFx0aWYgKHNWYWwubGVuZ3RoID4gMCkge1xyXG5cdFx0XHRcdGNvbnN0IHdzID0gc1ZhbC5zcGxpdChcIiBcIik7XHJcblx0XHRcdFx0dGhpcy5idWlsZFNlYXJjaFRleHRNYXAocHJvcHMsIHBhZ2VzKTtcclxuXHRcdFx0XHRmb3IgKGxldCB3IG9mIHdzKSB7XHJcblx0XHRcdFx0XHR3ID0gdy50cmltKCkudG9Mb3dlckNhc2UoKTtcclxuXHRcdFx0XHRcdGlmICh3Lmxlbmd0aCA+IDApIHtcclxuXHRcdFx0XHRcdFx0cGFnZXMgPSBwYWdlcy5maWx0ZXIoKHBnKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0Y29uc3QgdHh0ID0gcGcuX19zZWFyY2hUZXh0IHx8IFwiXCI7XHJcblx0XHRcdFx0XHRcdFx0cmV0dXJuIHR4dC5pbmNsdWRlcyh3KTtcclxuXHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRyZXR1cm4gcGFnZXM7XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIGFzeW5jIHNlYXJjaElucHV0KGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsIG5vdGVQYXRoOiBzdHJpbmcsIHZpZXdJZDogc3RyaW5nKSB7XHJcblx0XHRjb25zdCB3cmFwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuXHRcdHdyYXAuY2xhc3NOYW1lID0gXCJkdml0LXNlYXJjaC13cmFwcGVyXCI7XHJcblx0XHR3cmFwLnN0eWxlLmRpc3BsYXkgPSBcImZsZXhcIjtcclxuXHRcdHdyYXAuc3R5bGUuYWxpZ25JdGVtcyA9IFwiY2VudGVyXCI7XHJcblxyXG5cdFx0Y29uc3Qgc0tleSA9IGBzZWFyY2hfJHt2aWV3SWR9YDtcclxuXHRcdGNvbnN0IHNWYWwgPSB0aGlzLl9nZXRTdGF0ZShub3RlUGF0aCwgdmlld0lkLCBzS2V5KSB8fCBcIlwiO1xyXG5cdFx0Y29uc3Qgd2FzRm9jdXNlZCA9IHRoaXMuX2dldFN0YXRlKG5vdGVQYXRoLCB2aWV3SWQsIGBzZWFyY2hfZm9jdXNfJHt2aWV3SWR9YCkgPT09IHRydWU7XHJcblxyXG5cdFx0Y29uc3QgaW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XHJcblx0XHRpbnB1dC5jbGFzc05hbWUgPSBcImR2aXQtc2VhcmNoLWlucHV0XCI7XHJcblx0XHRpbnB1dC52YWx1ZSA9IHNWYWw7XHJcblx0XHRpbnB1dC5wbGFjZWhvbGRlciA9IFwiXHVBQzgwXHVDMEM5Li4uXCI7XHJcblx0XHRpbnB1dC5zdHlsZS5tYXJnaW5SaWdodCA9IFwiOHB4XCI7XHJcblxyXG5cdFx0aWYgKHdhc0ZvY3VzZWQpIHtcclxuXHRcdFx0c2V0VGltZW91dCgoKSA9PiBpbnB1dC5mb2N1cygpLCAwKTtcclxuXHRcdH1cclxuXHRcdGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoXCJmb2N1c1wiLCAoKSA9PiB7XHJcblx0XHRcdHRoaXMuX3NldFN0YXRlKG5vdGVQYXRoLCB2aWV3SWQsIGBzZWFyY2hfZm9jdXNfJHt2aWV3SWR9YCwgdHJ1ZSk7XHJcblx0XHR9KTtcclxuXHRcdGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoXCJibHVyXCIsICgpID0+IHtcclxuXHRcdFx0dGhpcy5fc2V0U3RhdGUobm90ZVBhdGgsIHZpZXdJZCwgYHNlYXJjaF9mb2N1c18ke3ZpZXdJZH1gLCBmYWxzZSk7XHJcblx0XHR9KTtcclxuXHRcdGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIChlKSA9PiB7XHJcblx0XHRcdGlmIChlLmtleSA9PT0gXCJFbnRlclwiKSB7XHJcblx0XHRcdFx0dGhpcy5fc2V0U3RhdGUobm90ZVBhdGgsIHZpZXdJZCwgc0tleSwgaW5wdXQudmFsdWUpO1xyXG5cdFx0XHRcdHRoaXMuX3NldFN0YXRlKG5vdGVQYXRoLCB2aWV3SWQsIGBzZWFyY2hfcmVhZHlfJHt2aWV3SWR9YCwgdHJ1ZSk7XHJcblx0XHRcdFx0dGhpcy5yZWZyZXNoQ29tbWFuZCg4MCk7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdFx0d3JhcC5hcHBlbmRDaGlsZChpbnB1dCk7XHJcblxyXG5cdFx0Y29uc3QgYnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcclxuXHRcdGJ0bi5jbGFzc05hbWUgPSBcImR2aXQtYnV0dG9uIGR2aXQtc2VhcmNoLWJ1dHRvblwiO1xyXG5cdFx0YnRuLmlubmVyVGV4dCA9IFwiXHUyMzE1XCI7XHJcblx0XHRidG4ub25jbGljayA9IGFzeW5jICgpID0+IHtcclxuXHRcdFx0dGhpcy5fc2V0U3RhdGUobm90ZVBhdGgsIHZpZXdJZCwgc0tleSwgaW5wdXQudmFsdWUpO1xyXG5cdFx0XHR0aGlzLl9zZXRTdGF0ZShub3RlUGF0aCwgdmlld0lkLCBgc2VhcmNoX3JlYWR5XyR7dmlld0lkfWAsIHRydWUpO1xyXG5cdFx0XHR0aGlzLnJlZnJlc2hDb21tYW5kKDgwKTtcclxuXHRcdFx0c2V0VGltZW91dCgoKSA9PiBpbnB1dC5mb2N1cygpLCA4MCk7XHJcblx0XHR9O1xyXG5cdFx0d3JhcC5hcHBlbmRDaGlsZChidG4pO1xyXG5cclxuXHRcdGNvbnRhaW5lci5hcHBlbmRDaGlsZCh3cmFwKTtcclxuXHR9XHJcblxyXG5cdC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblx0ICAgW0hdIFx1RDM5OFx1Qzc3NFx1QzlDMFx1QjEyNFx1Qzc3NFx1QzE1OFxyXG5cdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcblx0cHJpdmF0ZSBwYWdpbmF0ZShhcnI6IGFueVtdLCBwZXI6IG51bWJlciwgbm90ZVBhdGg6IHN0cmluZywgdmlld0lkOiBzdHJpbmcpIHtcclxuXHRcdGNvbnN0IGtleSA9IGBwYWdpbmF0aW9uXyR7dmlld0lkfWA7XHJcblx0XHQvLyBcdUMwQzhcdUI4NUMgXHVBQ0M0XHVDMEIwXHVCNDFDIFx1Q0QxRCBcdUQzOThcdUM3NzRcdUM5QzAgXHVDMjE4XHJcblx0XHRjb25zdCB0b3RhbFBhZ2VzID0gcGVyID4gMCA/IE1hdGguY2VpbChhcnIubGVuZ3RoIC8gcGVyKSA6IDE7XHJcblx0XHQvLyBcdUM4MDBcdUM3QTVcdUI0MUMgXHVENjA0XHVDN0FDIFx1RDM5OFx1Qzc3NFx1QzlDMCBcdUM3NzhcdUIzNzFcdUMyQTRcclxuXHRcdGxldCBwYWdlSWR4ID0gdGhpcy5fZ2V0U3RhdGUobm90ZVBhdGgsIHZpZXdJZCwga2V5KSB8fCAwO1xyXG5cdFxyXG5cdFx0Ly8gXHUyNUI2IFx1RDU0NFx1RDEzMC9cdUFDODBcdUMwQzkgXHVENkM0IHRvdGFsUGFnZXNcdUFDMDAgXHVDOTA0XHVDNUI0XHVCNEU0XHVDNUM4XHVDNzNDXHVCQTc0LCBcdUI5QzhcdUM5QzBcdUI5QzkgXHVEMzk4XHVDNzc0XHVDOUMwKFx1Qzc3OFx1QjM3MVx1QzJBNClcdUI4NUMgXHVEMDc0XHVCN0E4XHVENTA0XHJcblx0XHRpZiAocGFnZUlkeCA+PSB0b3RhbFBhZ2VzKSB7XHJcblx0XHQgIHBhZ2VJZHggPSB0b3RhbFBhZ2VzIC0gMTtcclxuXHRcdCAgdGhpcy5fc2V0U3RhdGUobm90ZVBhdGgsIHZpZXdJZCwga2V5LCBwYWdlSWR4KTtcclxuXHRcdH1cclxuXHRcclxuXHRcdC8vIFx1QzJFNFx1QzgxQyBcdUMyQUNcdUI3N0NcdUM3NzRcdUMyQTRcclxuXHRcdHJldHVybiBwZXIgPiAwXHJcblx0XHQgID8gYXJyLnNsaWNlKHBhZ2VJZHggKiBwZXIsIChwYWdlSWR4ICsgMSkgKiBwZXIpXHJcblx0XHQgIDogWy4uLmFycl07XHJcblx0ICB9XHJcblxyXG5cdCAgcHJpdmF0ZSBhc3luYyBwYWdpbmF0aW9uQmxvY2soXHJcblx0XHRkYXRhOiBhbnlbXSxcclxuXHRcdHBlcjogbnVtYmVyLFxyXG5cdFx0Y29udGFpbmVyOiBIVE1MRWxlbWVudCxcclxuXHRcdG5vdGVQYXRoOiBzdHJpbmcsXHJcblx0XHR2aWV3SWQ6IHN0cmluZ1xyXG5cdCAgKSB7XHJcblx0XHRjb25zdCBrZXkgPSBgcGFnaW5hdGlvbl8ke3ZpZXdJZH1gO1xyXG5cdFx0Y29uc3QgdG90YWxQYWdlcyA9IE1hdGguY2VpbChkYXRhLmxlbmd0aCAvIHBlcik7XHJcblx0XHRjb25zdCB3cmFwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuXHRcdHdyYXAuY2xhc3NOYW1lID0gXCJwYWdpbmF0aW9uLWJsb2NrXCI7XHJcblx0XHJcblx0XHRjb25zdCBwcnYgPSBhd2FpdCB0aGlzLnByZXZQYWdlQnV0dG9uKHRvdGFsUGFnZXMsIGtleSwgbm90ZVBhdGgsIHZpZXdJZCk7XHJcblx0XHR3cmFwLmFwcGVuZENoaWxkKHBydik7XHJcblx0XHJcblx0XHRjb25zdCBjdXJTID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XHJcblx0XHRjb25zdCBjdiA9ICh0aGlzLl9nZXRTdGF0ZShub3RlUGF0aCwgdmlld0lkLCBrZXkpIHx8IDApICsgMTtcclxuXHRcdGN1clMudGV4dENvbnRlbnQgPSBgJHtjdn0gLyAke3RvdGFsUGFnZXN9YDtcclxuXHRcdHdyYXAuYXBwZW5kQ2hpbGQoY3VyUyk7XHJcblx0XHJcblx0XHRjb25zdCBueHQgPSBhd2FpdCB0aGlzLm5leHRQYWdlQnV0dG9uKHRvdGFsUGFnZXMsIGtleSwgbm90ZVBhdGgsIHZpZXdJZCk7XHJcblx0XHR3cmFwLmFwcGVuZENoaWxkKG54dCk7XHJcblx0XHJcblx0XHRjb250YWluZXIuYXBwZW5kQ2hpbGQod3JhcCk7XHJcblx0ICB9XHJcblxyXG5cdHByaXZhdGUgYXN5bmMgbmV4dFBhZ2VCdXR0b24odG90YWxQYWdlczogbnVtYmVyLCBzdG9yZUtleTogc3RyaW5nLCBub3RlUGF0aDogc3RyaW5nLCB2aWV3SWQ6IHN0cmluZykge1xyXG5cdFx0Y29uc3QgY3YgPSB0aGlzLl9nZXRTdGF0ZShub3RlUGF0aCwgdmlld0lkLCBzdG9yZUtleSkgfHwgMDtcclxuXHRcdGNvbnN0IGNhbk5leHQgPSBjdiArIDEgPCB0b3RhbFBhZ2VzO1xyXG5cdFx0Y29uc3QgYkNsYXNzID0gY2FuTmV4dCA/IFwiZHZpdC1idXR0b25cIiA6IFwiZHZpdC1idXR0b24gYnV0dG9uLWdyYXlcIjtcclxuXHJcblx0XHRjb25zdCBidG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xyXG5cdFx0YnRuLmNsYXNzTmFtZSA9IGJDbGFzcztcclxuXHRcdGJ0bi5hcHBlbmQoXCI+PlwiKTtcclxuXHRcdGJ0bi5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRpZiAoIWNhbk5leHQpIHJldHVybjtcclxuXHRcdFx0dGhpcy5fc2V0U3RhdGUobm90ZVBhdGgsIHZpZXdJZCwgc3RvcmVLZXksIGN2ICsgMSk7XHJcblx0XHRcdHRoaXMucmVmcmVzaENvbW1hbmQoNjApO1xyXG5cdFx0fTtcclxuXHRcdHJldHVybiBidG47XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIGFzeW5jIHByZXZQYWdlQnV0dG9uKHRvdGFsUGFnZXM6IG51bWJlciwgc3RvcmVLZXk6IHN0cmluZywgbm90ZVBhdGg6IHN0cmluZywgdmlld0lkOiBzdHJpbmcpIHtcclxuXHRcdGNvbnN0IGN2ID0gdGhpcy5fZ2V0U3RhdGUobm90ZVBhdGgsIHZpZXdJZCwgc3RvcmVLZXkpIHx8IDA7XHJcblx0XHRjb25zdCBjYW5QcmV2ID0gY3YgPiAwO1xyXG5cdFx0Y29uc3QgYkNsYXNzID0gY2FuUHJldiA/IFwiZHZpdC1idXR0b25cIiA6IFwiZHZpdC1idXR0b24gYnV0dG9uLWdyYXlcIjtcclxuXHJcblx0XHRjb25zdCBidG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xyXG5cdFx0YnRuLmNsYXNzTmFtZSA9IGJDbGFzcztcclxuXHRcdGJ0bi5hcHBlbmQoXCI8PFwiKTtcclxuXHRcdGJ0bi5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRpZiAoIWNhblByZXYpIHJldHVybjtcclxuXHRcdFx0dGhpcy5fc2V0U3RhdGUobm90ZVBhdGgsIHZpZXdJZCwgc3RvcmVLZXksIGN2IC0gMSk7XHJcblx0XHRcdHRoaXMucmVmcmVzaENvbW1hbmQoNjApO1xyXG5cdFx0fTtcclxuXHRcdHJldHVybiBidG47XHJcblx0fVxyXG5cclxuXHQvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cdCAgIFtJXSBcdUQxNENcdUM3NzRcdUJFMTQgXHVDMEREXHVDMTMxIChcdUQ1NDRcdUQxMzAvXHVDODE1XHVCODJDL1x1RDM5OFx1Qzc3NFx1QzlDMFx1QjEyNFx1Qzc3NFx1QzE1OCBcdUM4MDFcdUM2QTkpXHJcblx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuXHRwcml2YXRlIGFzeW5jIGNyZWF0ZVRhYmxlKFxyXG5cdFx0cHJvcHM6IGFueVtdLFxyXG5cdFx0cGFnZXM6IGFueVtdLFxyXG5cdFx0Y29udGFpbmVyOiBIVE1MRWxlbWVudCxcclxuXHRcdG5vdGVQYXRoOiBzdHJpbmcsXHJcblx0XHR2aWV3SWQ6IHN0cmluZyxcclxuXHRcdGVudHJpZXNQZXJQYWdlOiBudW1iZXIsXHJcblx0XHRzZXR0aW5nczogYW55XHJcblx0KSB7XHJcblx0XHQvLyAxKSBcdUFDMDEgcGFnZVx1QzVEMCBcdUIzMDBcdUQ1NzQgX19mbVRpdGxlIFx1QzEzOFx1RDMwNVxyXG5cdFx0cGFnZXMuZm9yRWFjaCgocGcpID0+IHtcclxuXHRcdFx0dHJ5IHtcclxuXHRcdFx0XHRjb25zdCBkdlBhZ2UgPSB0aGlzLmR2Py5wYWdlKHBnLmZpbGUucGF0aCk7XHJcblx0XHRcdFx0aWYgKGR2UGFnZSkge1xyXG5cdFx0XHRcdFx0cGcuX19mbVRpdGxlID0gZHZQYWdlPy5mcm9udG1hdHRlcj8udGl0bGUgfHwgZHZQYWdlPy50aXRsZSB8fCBcIlwiO1xyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRwZy5fX2ZtVGl0bGUgPSBwZy5mcm9udG1hdHRlcj8udGl0bGUgfHwgXCJcIjtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0gY2F0Y2gge1xyXG5cdFx0XHRcdHBnLl9fZm1UaXRsZSA9IHBnLmZyb250bWF0dGVyPy50aXRsZSB8fCBcIlwiO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyAyKSBcdUQ1NDRcdUQxMzAgXHVCQzBGIFx1QUM4MFx1QzBDOVxyXG5cdFx0bGV0IGZpbHRlcmVkID0gYXdhaXQgdGhpcy5maWx0ZXJQcm9wcyhwcm9wcywgcGFnZXMsIG5vdGVQYXRoLCB2aWV3SWQpO1xyXG5cclxuXHRcdC8vIDMpIFx1QzgxNVx1QjgyQyBcdUNDOThcdUI5QUNcclxuXHRcdGNvbnN0IHNLZXkgPSBgc29ydF8ke3ZpZXdJZH1gO1xyXG5cdFx0Y29uc3QgZEtleSA9IGBzb3J0X2RpcmVjdGlvbl8ke3ZpZXdJZH1gO1xyXG5cdFx0bGV0IGN1clNvcnQgPSB0aGlzLl9nZXRTdGF0ZShub3RlUGF0aCwgdmlld0lkLCBzS2V5KTtcclxuXHRcdGxldCBjdXJEaXIgPSB0aGlzLl9nZXRTdGF0ZShub3RlUGF0aCwgdmlld0lkLCBkS2V5KSB8fCBcImFzY1wiO1xyXG5cdFx0aWYgKCFjdXJTb3J0KSB7XHJcblx0XHRcdGZpbHRlcmVkLnNvcnQoKGEsIGIpID0+IGEuX19mbVRpdGxlLmxvY2FsZUNvbXBhcmUoYi5fX2ZtVGl0bGUpKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdGZpbHRlcmVkID0gdGhpcy5zb3J0QnlQcm9wKGZpbHRlcmVkLCBjdXJTb3J0LCBjdXJEaXIpO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIDQpIFx1RDM5OFx1Qzc3NFx1QzlDMFx1QjEyNFx1Qzc3NFx1QzE1OCBcdUM4MDFcdUM2QTlcclxuXHRcdGNvbnN0IGRpc3AgPSBlbnRyaWVzUGVyUGFnZSA/IHRoaXMucGFnaW5hdGUoZmlsdGVyZWQsIGVudHJpZXNQZXJQYWdlLCBub3RlUGF0aCwgdmlld0lkKSA6IFsuLi5maWx0ZXJlZF07XHJcblxyXG5cdFx0Ly8gNSkgXHVEMTRDXHVDNzc0XHVCRTE0IFx1RDVFNFx1QjM1NCBcdUFENkNcdUMxMzFcclxuXHRcdGNvbnN0IGhlYWRlcnM6IHN0cmluZ1tdID0gW107XHJcblx0XHRwcm9wcy5mb3JFYWNoKChjb2wpID0+IHtcclxuXHRcdFx0Y29uc3QgaGQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG5cdFx0XHRpZiAoY29sLnByb3AgPT09IFwiZmlsZS5saW5rXCIpIHtcclxuXHRcdFx0XHRoZC5jbGFzc0xpc3QuYWRkKFwiaGVhZGVyLW5vLXNvcnRcIik7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0aGQuY2xhc3NMaXN0LmFkZChcImhlYWRlci1zb3J0aW5nLWJ1dHRvblwiKTtcclxuXHRcdFx0XHRoZC5zZXRBdHRyaWJ1dGUoXCJkYXRhLXByb3BcIiwgY29sLnByb3ApO1xyXG5cdFx0XHRcdGhkLnNldEF0dHJpYnV0ZShcImRhdGEtdmlldy1pZFwiLCB2aWV3SWQpO1xyXG5cdFx0XHR9XHJcblx0XHRcdGhkLmlubmVyVGV4dCA9IGNvbC5uYW1lIHx8IGNvbC5wcm9wO1xyXG5cdFx0XHRoZWFkZXJzLnB1c2goaGQub3V0ZXJIVE1MKTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vIDYpIFx1RDE0Q1x1Qzc3NFx1QkUxNCBcdUIwQjRcdUM2QTkgXHVBRDZDXHVDMTMxXHJcblx0XHRjb25zdCByb3dzID0gZGlzcC5tYXAoKHBnKSA9PiB7XHJcblx0XHRcdGNvbnN0IHJvd0NlbGxzOiBzdHJpbmdbXSA9IFtdO1xyXG5cdFx0XHRmb3IgKGNvbnN0IGNvbCBvZiBwcm9wcykge1xyXG5cdFx0XHRcdGxldCB2YWwgPSB0aGlzLmdldFZhbChwZywgY29sLnByb3ApO1xyXG5cdFx0XHRcdGlmIChjb2wucHJvcCA9PT0gXCJmaWxlLmxpbmtcIikge1xyXG5cdFx0XHRcdFx0Y29uc3QgYWxpYXMgPSBwZy5fX2ZtVGl0bGUgfHwgXCJcIjtcclxuXHRcdFx0XHRcdGlmICh0eXBlb2YgdmFsID09PSBcIm9iamVjdFwiICYmIHZhbD8ucGF0aCkge1xyXG5cdFx0XHRcdFx0XHRjb25zdCBsaW5rTWFya3VwID0gYWxpYXMudHJpbSgpID09PSBcIlwiXHJcblx0XHRcdFx0XHRcdFx0PyBgW1ske3ZhbC5wYXRofV1dYFxyXG5cdFx0XHRcdFx0XHRcdDogYFtbJHt2YWwucGF0aH18JHthbGlhc31dXWA7XHJcblx0XHRcdFx0XHRcdHJvd0NlbGxzLnB1c2goYDxkaXYgY2xhc3M9XCJlZGl0LWJ1dHRvblwiIGRhdGEtcGF0aD1cIiR7cGcuZmlsZT8ucGF0aCB8fCBcIlwifVwiIGRhdGEtcHJvcD1cImZpbGUubGlua1wiPiR7bGlua01hcmt1cH08L2Rpdj5gKTtcclxuXHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdGlmIChhbGlhcy50cmltKCkgPT09IFwiXCIpIHtcclxuXHRcdFx0XHRcdFx0XHRyb3dDZWxscy5wdXNoKGA8ZGl2IGNsYXNzPVwiZWRpdC1idXR0b25cIiBkYXRhLXBhdGg9XCIke3BnLmZpbGU/LnBhdGggfHwgXCJcIn1cIiBkYXRhLXByb3A9XCJmaWxlLmxpbmtcIj5bWyR7KHZhbCAmJiB0eXBlb2YgdmFsID09PSBcIm9iamVjdFwiICYmIHZhbD8ucGF0aCkgPyB2YWwucGF0aCA6IFwiXCJ9XV08L2Rpdj5gKTtcclxuXHRcdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0XHRyb3dDZWxscy5wdXNoKGA8ZGl2IGNsYXNzPVwiZWRpdC1idXR0b25cIiBkYXRhLXBhdGg9XCIke3BnLmZpbGU/LnBhdGggfHwgXCJcIn1cIiBkYXRhLXByb3A9XCJmaWxlLmxpbmtcIj4ke2FsaWFzfTwvZGl2PmApO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdGlmIChBcnJheS5pc0FycmF5KHZhbCkpIHtcclxuXHRcdFx0XHRcdFx0aWYgKGNvbC5wcm9wID09PSBcInRhZ3NcIikge1xyXG5cdFx0XHRcdFx0XHRcdGNvbnN0IHVwZGF0ZWQ6IHN0cmluZ1tdID0gW107XHJcblx0XHRcdFx0XHRcdFx0Zm9yIChjb25zdCBpdGVtIG9mIHZhbCkge1xyXG5cdFx0XHRcdFx0XHRcdFx0aXRlbS5zcGxpdCgvXFxzKy8pLmZvckVhY2goKHRrKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdGlmICh0ayAmJiAhdGsuc3RhcnRzV2l0aChcIiNcIikpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHR0ayA9IFwiI1wiICsgdGs7XHJcblx0XHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRcdFx0dXBkYXRlZC5wdXNoKHRrKTtcclxuXHRcdFx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHR2YWwgPSB1cGRhdGVkLmpvaW4oXCIgXCIpO1xyXG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRcdHZhbCA9IHZhbC5qb2luKFwiIFwiKTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0aWYgKGNvbC5wcm9wID09PSBcInB1Ymxpc2hlZFwiKSB7XHJcblx0XHRcdFx0XHRcdGNvbnN0IGR0ID0gdGhpcy5wYXJzZURhdGVZTUQodmFsKTtcclxuXHRcdFx0XHRcdFx0dmFsID0gZHQgPyBkdC5nZXRGdWxsWWVhcigpLnRvU3RyaW5nKCkgOiAodmFsIHx8IFwiLVwiKTtcclxuXHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdHZhbCA9IHRoaXMuZm9ybWF0QXNZWVlZTU1ERElmRGF0ZSh2YWwpO1xyXG5cdFx0XHRcdFx0XHRpZiAoIXZhbCkgdmFsID0gXCItXCI7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRyb3dDZWxscy5wdXNoKGA8ZGl2IGNsYXNzPVwiZWRpdC1idXR0b25cIiBkYXRhLXBhdGg9XCIke3BnLmZpbGU/LnBhdGggfHwgXCJcIn1cIiBkYXRhLXByb3A9XCIke2NvbC5wcm9wfVwiPiR7dmFsfTwvZGl2PmApO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0XHRyZXR1cm4gcm93Q2VsbHM7XHJcblx0XHR9KTtcclxuXHJcblx0XHRjb25zdCBtZFRhYmxlID0gdGhpcy5kdi5tYXJrZG93blRhYmxlKGhlYWRlcnMsIHJvd3MpO1xyXG5cdFx0Y29uc3Qgd3JhcFAgPSB0aGlzLmR2LnBhcmFncmFwaChtZFRhYmxlKTtcclxuXHRcdHdyYXBQLmNsYXNzTGlzdC5hZGQoXCJkdi10YWJsZS13cmFwcGVyXCIsIFwidGFibGVcIiwgXCJmdWxsLXdpZHRoXCIpO1xyXG5cdFx0Y29udGFpbmVyLmFwcGVuZENoaWxkKHdyYXBQKTtcclxuXHJcblx0XHQvLyA3KSBcdUMxNDAgXHVEM0I4XHVDOUQxIFx1Qzc3NFx1QkNBNFx1RDJCOCAoXHVCMzcwXHVCQUE4KVxyXG5cdFx0d3JhcFAucXVlcnlTZWxlY3RvckFsbChcIi5lZGl0LWJ1dHRvblwiKS5mb3JFYWNoKChidG4pID0+IHtcclxuXHRcdFx0YnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBhc3luYyAoZTogYW55KSA9PiB7XHJcblx0XHRcdFx0aWYgKGUudGFyZ2V0LmxvY2FsTmFtZSA9PT0gXCJhXCIpIHJldHVybjtcclxuXHRcdFx0XHRjb25zdCBwYXRoID0gYnRuLmdldEF0dHJpYnV0ZShcImRhdGEtcGF0aFwiKTtcclxuXHRcdFx0XHRjb25zdCBwcm9wID0gYnRuLmdldEF0dHJpYnV0ZShcImRhdGEtcHJvcFwiKTtcclxuXHRcdFx0XHRpZiAocGF0aCAmJiBwcm9wKSBhd2FpdCB0aGlzLmVkaXRQcm9wKFwidGV4dFwiLCBwYXRoLCBwcm9wKTtcclxuXHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyA4KSBcdUQ1RTRcdUIzNTQgXHVDODE1XHVCODJDIFx1Qzc3NFx1QkNBNFx1RDJCOFxyXG5cdFx0Y29uc3QgaGRyQnRucyA9IHdyYXBQLnF1ZXJ5U2VsZWN0b3JBbGwoXCIuaGVhZGVyLXNvcnRpbmctYnV0dG9uXCIpO1xyXG5cdFx0Y29uc3QgYXBwbHlTb3J0VmlzdWFsID0gKHNvcnRQcm9wOiBzdHJpbmcgfCBudWxsLCBzb3J0RGlyOiBzdHJpbmcpID0+IHtcclxuXHRcdFx0aGRyQnRucy5mb3JFYWNoKChoYjogYW55KSA9PiB7XHJcblx0XHRcdFx0aGIuY2xhc3NMaXN0LnJlbW92ZShcInNvcnRlZC1hc2NcIiwgXCJzb3J0ZWQtZGVzY1wiLCBcInNvcnRlZC1ub25lXCIpO1xyXG5cdFx0XHR9KTtcclxuXHRcdFx0aGRyQnRucy5mb3JFYWNoKChoYjogYW55KSA9PiB7XHJcblx0XHRcdFx0Y29uc3QgcCA9IGhiLmdldEF0dHJpYnV0ZShcImRhdGEtcHJvcFwiKSB8fCBcIlwiO1xyXG5cdFx0XHRcdGlmICghc29ydFByb3AgfHwgc29ydFByb3AgIT09IHApIHtcclxuXHRcdFx0XHRcdGhiLmNsYXNzTGlzdC5hZGQoXCJzb3J0ZWQtbm9uZVwiKTtcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0aGIuY2xhc3NMaXN0LmFkZChzb3J0RGlyID09PSBcImFzY1wiID8gXCJzb3J0ZWQtYXNjXCIgOiBcInNvcnRlZC1kZXNjXCIpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblx0XHR9O1xyXG5cclxuXHRcdGhkckJ0bnMuZm9yRWFjaCgoaGIpID0+IHtcclxuXHRcdFx0aGIuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGFzeW5jICgpID0+IHtcclxuXHRcdFx0XHRsZXQgcCA9IGhiLmdldEF0dHJpYnV0ZShcImRhdGEtcHJvcFwiKSB8fCBcIlwiO1xyXG5cdFx0XHRcdGNvbnN0IHZJZCA9IGhiLmdldEF0dHJpYnV0ZShcImRhdGEtdmlldy1pZFwiKSB8fCBcIlwiO1xyXG5cdFx0XHRcdGNvbnN0IHNLZXkgPSBgc29ydF8ke3ZJZH1gO1xyXG5cdFx0XHRcdGNvbnN0IGRLZXkgPSBgc29ydF9kaXJlY3Rpb25fJHt2SWR9YDtcclxuXHRcdFx0XHRsZXQgY3VyU29ydCA9IHRoaXMuX2dldFN0YXRlKG5vdGVQYXRoLCB2SWQsIHNLZXkpO1xyXG5cdFx0XHRcdGxldCBjdXJEaXIgPSB0aGlzLl9nZXRTdGF0ZShub3RlUGF0aCwgdklkLCBkS2V5KSB8fCBcImFzY1wiO1xyXG5cclxuXHRcdFx0XHRpZiAoY3VyU29ydCAhPT0gcCkge1xyXG5cdFx0XHRcdFx0Y3VyU29ydCA9IHA7XHJcblx0XHRcdFx0XHRjdXJEaXIgPSBcImFzY1wiO1xyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRpZiAoY3VyRGlyID09PSBcImFzY1wiKSBjdXJEaXIgPSBcImRlc2NcIjtcclxuXHRcdFx0XHRcdGVsc2UgaWYgKGN1ckRpciA9PT0gXCJkZXNjXCIpIHtcclxuXHRcdFx0XHRcdFx0Y3VyU29ydCA9IG51bGw7XHJcblx0XHRcdFx0XHRcdGN1ckRpciA9IFwiYXNjXCI7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdHRoaXMuX3NldFN0YXRlKG5vdGVQYXRoLCB2SWQsIHNLZXksIGN1clNvcnQpO1xyXG5cdFx0XHRcdHRoaXMuX3NldFN0YXRlKG5vdGVQYXRoLCB2SWQsIGRLZXksIGN1ckRpcik7XHJcblx0XHRcdFx0YXBwbHlTb3J0VmlzdWFsKGN1clNvcnQsIGN1ckRpcik7XHJcblx0XHRcdFx0dGhpcy5yZWZyZXNoQ29tbWFuZCg1MCk7XHJcblx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcblx0XHRhcHBseVNvcnRWaXN1YWwoY3VyU29ydCwgY3VyRGlyKTtcclxuXHJcblx0XHRyZXR1cm4gZmlsdGVyZWQ7XHJcblx0fVxyXG5cclxuXHQvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cdCAgIFtKXSBcdUQzQjhcdUM5RDEgKFx1QjM3MFx1QkFBOClcclxuXHQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG5cdHByaXZhdGUgYXN5bmMgZWRpdFByb3AodHlwZTogc3RyaW5nLCBwYXRoOiBzdHJpbmcsIHByb3A6IHN0cmluZykge1xyXG5cdFx0Y29uc3QgZmlsZSA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgocGF0aCk7XHJcblx0XHRpZiAoIWZpbGUpIHJldHVybjtcclxuXHRcdGlmICh0eXBlID09PSBcImZpbGUgbmFtZVwiICYmIGZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xyXG5cdFx0XHRjb25zdCBvbGROYW1lID0gZmlsZS5iYXNlbmFtZTtcclxuXHRcdFx0Y29uc3QgbmV3TmFtZSA9IGF3YWl0IHRoaXMudGV4dElucHV0KG9sZE5hbWUpO1xyXG5cdFx0XHRpZiAoIW5ld05hbWUpIHJldHVybjtcclxuXHRcdFx0Y29uc3QgZm9sZGVyID0gZmlsZS5wYXJlbnQ/LnBhdGggfHwgXCJcIjtcclxuXHRcdFx0Y29uc3QgZXh0ID0gZmlsZS5leHRlbnNpb247XHJcblx0XHRcdGNvbnN0IG5ld1BhdGggPSBmb2xkZXIgPyBgJHtmb2xkZXJ9LyR7bmV3TmFtZX0uJHtleHR9YCA6IGAke25ld05hbWV9LiR7ZXh0fWA7XHJcblx0XHRcdGF3YWl0IGFwcC52YXVsdC5yZW5hbWUoZmlsZSwgbmV3UGF0aCk7XHJcblx0XHRcdHRoaXMucmVmcmVzaENvbW1hbmQoNTApO1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblx0XHR0aGlzLnJlZnJlc2hDb21tYW5kKDUwKTtcclxuXHR9XHJcblxyXG5cdC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblx0ICAgW0tdIFx1RDE0RFx1QzJBNFx1RDJCOCBcdUM3ODVcdUI4MjUgXHVCQUE4XHVCMkVDIChcdUIzNzBcdUJBQTgpXHJcblx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuXHRwcml2YXRlIGFzeW5jIHRleHRJbnB1dChkZWZhdWx0VmFsOiBzdHJpbmcpIHtcclxuXHRcdHJldHVybiBuZXcgUHJvbWlzZTxzdHJpbmcgfCBudWxsPigocmVzb2x2ZSkgPT4ge1xyXG5cdFx0XHRjb25zdCB7IE1vZGFsIH0gPSAoZ2xvYmFsVGhpcyBhcyBhbnkpLm1pbmlUYWJsZUdsb2JhbC5vYnNpZGlhbjtcclxuXHRcdFx0Y2xhc3MgTXlNb2RhbCBleHRlbmRzIE1vZGFsIHtcclxuXHRcdFx0XHRyZXN1bHQ6IHN0cmluZztcclxuXHRcdFx0XHRjb25zdHJ1Y3RvcihhcHA6IEFwcCkge1xyXG5cdFx0XHRcdFx0c3VwZXIoYXBwKTtcclxuXHRcdFx0XHRcdHRoaXMucmVzdWx0ID0gZGVmYXVsdFZhbDtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0b25PcGVuKCkge1xyXG5cdFx0XHRcdFx0Y29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XHJcblx0XHRcdFx0XHRjb250ZW50RWwuY3JlYXRlRWwoXCJoMVwiLCB7IHRleHQ6IFwiSW5wdXRcIiB9KTtcclxuXHRcdFx0XHRcdGNvbnN0IGlucCA9IGNvbnRlbnRFbC5jcmVhdGVFbChcImlucHV0XCIpO1xyXG5cdFx0XHRcdFx0aW5wLnZhbHVlID0gdGhpcy5yZXN1bHQ7XHJcblx0XHRcdFx0XHRpbnAuc3R5bGUud2lkdGggPSBcIjEwMCVcIjtcclxuXHRcdFx0XHRcdGlucC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCAoZXYpID0+IHtcclxuXHRcdFx0XHRcdFx0aWYgKGV2LmtleSA9PT0gXCJFbnRlclwiKSB7XHJcblx0XHRcdFx0XHRcdFx0dGhpcy5yZXN1bHQgPSBpbnAudmFsdWUudHJpbSgpO1xyXG5cdFx0XHRcdFx0XHRcdHRoaXMuY2xvc2UoKTtcclxuXHRcdFx0XHRcdFx0XHRyZXNvbHZlKHRoaXMucmVzdWx0KTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRjb25zdCBva0J0biA9IGNvbnRlbnRFbC5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiT0tcIiB9KTtcclxuXHRcdFx0XHRcdG9rQnRuLm9uY2xpY2sgPSAoKSA9PiB7XHJcblx0XHRcdFx0XHRcdHRoaXMucmVzdWx0ID0gaW5wLnZhbHVlLnRyaW0oKTtcclxuXHRcdFx0XHRcdFx0dGhpcy5jbG9zZSgpO1xyXG5cdFx0XHRcdFx0XHRyZXNvbHZlKHRoaXMucmVzdWx0KTtcclxuXHRcdFx0XHRcdH07XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdG9uQ2xvc2UoKSB7XHJcblx0XHRcdFx0XHR0aGlzLmNvbnRlbnRFbC5lbXB0eSgpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0XHRuZXcgTXlNb2RhbChhcHApLm9wZW4oKTtcclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblx0LyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHQgICBbTF0gU3VnZ2VzdGVyXHJcblx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuXHRwcml2YXRlIGFzeW5jIHN1Z2dlc3Rlcih2YWxzOiBzdHJpbmdbXSkge1xyXG5cdFx0Y29uc3QgeyBTdWdnZXN0TW9kYWwgfSA9IChnbG9iYWxUaGlzIGFzIGFueSkubWluaVRhYmxlR2xvYmFsLm9ic2lkaWFuO1xyXG5cdFx0cmV0dXJuIG5ldyBQcm9taXNlPHN0cmluZyB8IG51bGw+KChyZXNvbHZlKSA9PiB7XHJcblx0XHRcdGNsYXNzIE15U3VnZyBleHRlbmRzIFN1Z2dlc3RNb2RhbDxzdHJpbmc+IHtcclxuXHRcdFx0XHRnZXRTdWdnZXN0aW9ucyhxOiBzdHJpbmcpOiBzdHJpbmdbXSB7XHJcblx0XHRcdFx0XHRyZXR1cm4gdmFscy5maWx0ZXIoKHgpID0+IHgudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhxLnRvTG93ZXJDYXNlKCkpKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0cmVuZGVyU3VnZ2VzdGlvbih2YWw6IHN0cmluZywgZWw6IEhUTUxFbGVtZW50KSB7XHJcblx0XHRcdFx0XHRlbC5jcmVhdGVFbChcImRpdlwiLCB7IHRleHQ6IHZhbCB9KTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0b25DaG9vc2VTdWdnZXN0aW9uKHZhbDogc3RyaW5nKSB7XHJcblx0XHRcdFx0XHRyZXNvbHZlKHZhbCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHRcdG5ldyBNeVN1Z2coYXBwKS5vcGVuKCk7XHJcblx0XHR9KS5jYXRjaCgoKSA9PiBudWxsKTtcclxuXHR9XHJcblxyXG5cdC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblx0ICAgW01dIFx1QzgxNVx1QjgyQyAoZmlsZS5saW5rXHVDNzQwIFx1QkNDNFx1QjNDNCBcdUM4MTVcdUI4MkNcdUQ1NThcdUM5QzAgXHVDNTRBXHVDNzRDKVxyXG5cdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcblx0cHJpdmF0ZSBzb3J0QnlQcm9wKHBhZ2VzOiBhbnlbXSwgcHJvcDogc3RyaW5nIHwgbnVsbCwgZGlyOiBzdHJpbmcpIHtcclxuXHRcdGlmICghcHJvcCB8fCBwcm9wID09PSBcImZpbGUubGlua1wiKSByZXR1cm4gcGFnZXM7XHJcblx0XHRkaXIgPSBkaXIgfHwgXCJhc2NcIjtcclxuXHRcdHJldHVybiBwYWdlcy5zb3J0KChhLCBiKSA9PiB7XHJcblx0XHRcdGNvbnN0IEEgPSB0aGlzLmdldFZhbChhLCBwcm9wKTtcclxuXHRcdFx0Y29uc3QgQiA9IHRoaXMuZ2V0VmFsKGIsIHByb3ApO1xyXG5cdFx0XHRjb25zdCBzQSA9IHRoaXMuZ2V0U29ydFZhbHVlKEEsIHByb3ApO1xyXG5cdFx0XHRjb25zdCBzQiA9IHRoaXMuZ2V0U29ydFZhbHVlKEIsIHByb3ApO1xyXG5cdFx0XHRpZiAodHlwZW9mIHNBID09PSBcIm51bWJlclwiICYmIHR5cGVvZiBzQiA9PT0gXCJudW1iZXJcIikge1xyXG5cdFx0XHRcdHJldHVybiBkaXIgPT09IFwiYXNjXCIgPyBzQSAtIHNCIDogc0IgLSBzQTtcclxuXHRcdFx0fVxyXG5cdFx0XHRjb25zdCBzdHJBID0gU3RyaW5nKHNBKTtcclxuXHRcdFx0Y29uc3Qgc3RyQiA9IFN0cmluZyhzQik7XHJcblx0XHRcdHJldHVybiBkaXIgPT09IFwiYXNjXCIgPyBzdHJBLmxvY2FsZUNvbXBhcmUoc3RyQikgOiBzdHJCLmxvY2FsZUNvbXBhcmUoc3RyQSk7XHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblx0ICAgW05dIERhdGF2aWV3SlMgXHVDNUQ0XHVEMkI4XHVCOUFDIFx1RDNFQ1x1Qzc3OFx1RDJCODogcmVuZGVyVmlld1xyXG5cdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcblx0cHVibGljIGFzeW5jIHJlbmRlclZpZXcoc2V0dGluZ3M6IGFueSwgcHJvcHM6IGFueVtdLCBwYWdlczogYW55W10sIGR2OiBhbnkpIHtcclxuXHRcdGNvbnN0IG9yaWdpbmFsQ29uc29sZUVycm9yID0gY29uc29sZS5lcnJvcjtcclxuXHRcdGNvbnNvbGUuZXJyb3IgPSAoLi4uYXJnczogYW55W10pID0+IHtcclxuXHRcdFx0Y29uc3QgbXNnID0gYXJnc1swXSBpbnN0YW5jZW9mIEVycm9yID8gYXJnc1swXS5tZXNzYWdlIDogU3RyaW5nKGFyZ3NbMF0pO1xyXG5cdFx0XHRpZiAobXNnLmluY2x1ZGVzKFwiQ2Fubm90IHJlYWQgcHJvcGVydGllcyBvZiB1bmRlZmluZWQgKHJlYWRpbmcgJ2ZpbGUnKVwiKSkge1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cdFx0XHRvcmlnaW5hbENvbnNvbGVFcnJvciguLi5hcmdzKTtcclxuXHRcdH07XHJcblxyXG5cdFx0dHJ5IHtcclxuXHRcdFx0aWYgKCFkdiB8fCAhcGFnZXMgfHwgIUFycmF5LmlzQXJyYXkocGFnZXMpKSByZXR1cm47XHJcblx0XHRcdGNvbnN0IGN1cnIgPSBkdi5jdXJyZW50Py4oKTtcclxuXHRcdFx0aWYgKCFjdXJyIHx8ICFjdXJyLmZpbGUgfHwgIWN1cnIuZmlsZS5wYXRoKSByZXR1cm47XHJcblx0XHRcdGNvbnN0IG5vdGVQYXRoID0gY3Vyci5maWxlLnBhdGg7XHJcblx0XHRcdHBhZ2VzID0gcGFnZXMuZmlsdGVyKChwZzogYW55KSA9PiBwZz8uZmlsZT8ucGF0aCk7XHJcblxyXG5cdFx0XHR0aGlzLmR2ID0gZHY7XHJcblx0XHRcdGNvbnN0IGlkID0gdGhpcy5yZXNvbHZlVmlld0lkKHNldHRpbmdzKTtcclxuXHJcblx0XHRcdC8vIGZvbGRpbmcgXHVDNjM1XHVDMTU4IFx1Q0M5OFx1QjlBQ1xyXG5cdFx0XHRjb25zdCBvbGRDb250YWluZXIgPSBkdi5jb250YWluZXI7XHJcblx0XHRcdGlmIChzZXR0aW5ncy5mb2xkaW5nID09PSB0cnVlKSB7XHJcblx0XHRcdFx0Y29uc3QgZGV0YWlsc1BhcmVudCA9IGR2LmNvbnRhaW5lci5jcmVhdGVFbChcImRldGFpbHNcIik7XHJcblx0XHRcdFx0Y29uc3Qgc3VtbWFyeUVsID0gZGV0YWlsc1BhcmVudC5jcmVhdGVFbChcInN1bW1hcnlcIik7XHJcblx0XHRcdFx0c3VtbWFyeUVsLnNldFRleHQoc2V0dGluZ3MuZm9sZGluZ1RpdGxlIHx8IFwiRGF0YXZpZXdcIik7XHJcblx0XHRcdFx0Y29uc3QgZm9sZGVkRGl2ID0gZGV0YWlsc1BhcmVudC5jcmVhdGVFbChcImRpdlwiKTtcclxuXHRcdFx0XHRkdi5jb250YWluZXIgPSBmb2xkZWREaXY7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGNvbnN0IGNvbnRhaW5lckRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcblx0XHRcdGNvbnRhaW5lckRpdi5jbGFzc0xpc3QuYWRkKGBkdml0LXZpZXctaWQtJHtpZH1gKTtcclxuXHRcdFx0ZHYuY29udGFpbmVyLmFwcGVuZChjb250YWluZXJEaXYpO1xyXG5cclxuXHRcdFx0Ly8gXHVDMEMxXHVCMkU4IFx1QzYwMVx1QzVFRCBcdUFENkNcdUMxMzFcclxuXHRcdFx0Y29uc3QgdG9wUm93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuXHRcdFx0dG9wUm93LmNsYXNzTGlzdC5hZGQoXCJkdml0LXRvcC1yb3dcIik7XHJcblx0XHRcdHRvcFJvdy5zdHlsZS5kaXNwbGF5ID0gXCJmbGV4XCI7XHJcblx0XHRcdHRvcFJvdy5zdHlsZS5qdXN0aWZ5Q29udGVudCA9IFwic3BhY2UtYmV0d2VlblwiO1xyXG5cdFx0XHR0b3BSb3cuc3R5bGUuYWxpZ25JdGVtcyA9IFwiY2VudGVyXCI7XHJcblx0XHRcdGNvbnRhaW5lckRpdi5hcHBlbmRDaGlsZCh0b3BSb3cpO1xyXG5cclxuXHRcdFx0Y29uc3QgbGVmdEFyZWEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG5cdFx0XHRsZWZ0QXJlYS5jbGFzc05hbWUgPSBcImR2aXQtbGVmdC1hcmVhXCI7XHJcblx0XHRcdGNvbnN0IGNlbnRlckFyZWEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG5cdFx0XHRjZW50ZXJBcmVhLmNsYXNzTmFtZSA9IFwiZHZpdC1jZW50ZXItYXJlYVwiO1xyXG5cdFx0XHRjb25zdCByaWdodEFyZWEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG5cdFx0XHRyaWdodEFyZWEuY2xhc3NOYW1lID0gXCJkdml0LXJpZ2h0LWFyZWFcIjtcclxuXHRcdFx0dG9wUm93LmFwcGVuZChsZWZ0QXJlYSwgY2VudGVyQXJlYSwgcmlnaHRBcmVhKTtcclxuXHJcblx0XHRcdGlmIChzZXR0aW5ncy5wYXRoKSB7XHJcblx0XHRcdFx0YXdhaXQgdGhpcy52aWV3Rm9sZGVyQnV0dG9uKHNldHRpbmdzLnBhdGgsIGxlZnRBcmVhKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRpZiAoc2V0dGluZ3NbXCJhZGQgbmV3IGZvbGRlciBidXR0b25cIl0pIHtcclxuXHRcdFx0XHRhd2FpdCB0aGlzLm5ld0ZvbGRlckJ1dHRvbihkdiwgeyBmb2xkZXJOYW1lOiBzZXR0aW5nc1tcIm5ldyBmb2xkZXIgbmFtZVwiXSB8fCBcIk5ld0ZvbGRlclwiIH0sIGxlZnRBcmVhKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRhd2FpdCB0aGlzLnJlbmRlclRhZ0ZpbHRlckJ1dHRvbihwYWdlcywgbGVmdEFyZWEsIG5vdGVQYXRoLCBpZCk7XHJcblx0XHRcdGF3YWl0IHRoaXMucmVmcmVzaEJ1dHRvbihyaWdodEFyZWEsIG5vdGVQYXRoLCBpZCk7XHJcblx0XHRcdGF3YWl0IHRoaXMuc2VhcmNoSW5wdXQocmlnaHRBcmVhLCBub3RlUGF0aCwgaWQpO1xyXG5cclxuXHRcdFx0Y29uc3QgZm1Sb3cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG5cdFx0XHRmbVJvdy5jbGFzc05hbWUgPSBcImZyb250bWF0dGVyLWZpbHRlci1hcmVhXCI7XHJcblx0XHRcdGNvbnRhaW5lckRpdi5hcHBlbmRDaGlsZChmbVJvdyk7XHJcblx0XHRcdGF3YWl0IHRoaXMuZmlsdGVyQnV0dG9uUHJvcHMocHJvcHMsIHBhZ2VzLCBmbVJvdywgbm90ZVBhdGgsIGlkKTtcclxuXHJcblx0XHRcdGNvbnN0IGVwcCA9IHNldHRpbmdzW1wiZW50cmllcyBvbiBwYWdlXCJdIHx8IDEwO1xyXG5cdFx0XHRjb25zdCBmaW5hbEZpbHRlcmVkID0gYXdhaXQgdGhpcy5jcmVhdGVUYWJsZShwcm9wcywgcGFnZXMsIGNvbnRhaW5lckRpdiwgbm90ZVBhdGgsIGlkLCBlcHAsIHNldHRpbmdzKTtcclxuXHRcdFx0aWYgKGVwcCkge1xyXG5cdFx0XHRcdGF3YWl0IHRoaXMucGFnaW5hdGlvbkJsb2NrKGZpbmFsRmlsdGVyZWQsIGVwcCwgY29udGFpbmVyRGl2LCBub3RlUGF0aCwgaWQpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRkdi5jb250YWluZXIgPSBvbGRDb250YWluZXI7XHJcblx0XHR9IGNhdGNoIChlcnIpIHtcclxuXHRcdFx0Y29uc29sZS53YXJuKFwiSW50ZXJhY3RpdmVUYWJsZSByZW5kZXJWaWV3IHN1cHByZXNzZWQgZXJyb3I6XCIsIGVycik7XHJcblx0XHR9IGZpbmFsbHkge1xyXG5cdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdFx0XHRjb25zdCBhbGxFcnJCbG9ja3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmRhdGF2aWV3LWVycm9yLCAuZGF0YXZpZXcgLmVycm9yLCAuZHYtcmVuZGVyLWVycm9yXCIpO1xyXG5cdFx0XHRcdGFsbEVyckJsb2Nrcy5mb3JFYWNoKChlbGVtKSA9PiB7XHJcblx0XHRcdFx0XHRpZiAoZWxlbS50ZXh0Q29udGVudCAmJiBlbGVtLnRleHRDb250ZW50LmluY2x1ZGVzKFwiRXZhbHVhdGlvbiBFcnJvclwiKSkge1xyXG5cdFx0XHRcdFx0XHRlbGVtLnJlbW92ZSgpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9LCAxMDApO1xyXG5cdFx0XHRjb25zb2xlLmVycm9yID0gb3JpZ2luYWxDb25zb2xlRXJyb3I7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIGFzeW5jIGZpbHRlckJ1dHRvblByb3BzKHByb3BzOiBhbnlbXSwgcGFnZXM6IGFueVtdLCBjb250YWluZXI6IEhUTUxFbGVtZW50LCBub3RlUGF0aDogc3RyaW5nLCB2aWV3SWQ6IHN0cmluZykge1xyXG5cdFx0Y29uc3QgZmx0ID0gcHJvcHMuZmlsdGVyKChwcCkgPT4gcHAuZmlsdGVyKTtcclxuXHRcdGlmIChmbHQubGVuZ3RoID09PSAwKSByZXR1cm47XHJcblx0XHRjb25zdCB3cmFwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuXHRcdHdyYXAuY2xhc3NOYW1lID0gXCJmcm9udG1hdHRlci1maWx0ZXItYXJlYVwiO1xyXG5cdFx0Zm9yIChjb25zdCBwIG9mIGZsdCkge1xyXG5cdFx0XHRjb25zdCBiID0gYXdhaXQgdGhpcy5tYWtlRmlsdGVyQnV0dG9uKHAsIHBhZ2VzLCBub3RlUGF0aCwgdmlld0lkKTtcclxuXHRcdFx0d3JhcC5hcHBlbmRDaGlsZChiKTtcclxuXHRcdH1cclxuXHRcdGNvbnRhaW5lci5hcHBlbmRDaGlsZCh3cmFwKTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgYXN5bmMgbWFrZUZpbHRlckJ1dHRvbihwOiBhbnksIHBhZ2VzOiBhbnlbXSwgbm90ZVBhdGg6IHN0cmluZywgdmlld0lkOiBzdHJpbmcpIHtcclxuXHRcdGNvbnN0IGJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XHJcblx0XHRidG4uY2xhc3NOYW1lID0gXCJkdml0LWJ1dHRvblwiO1xyXG5cdFx0Y29uc3Qgbm0gPSBwLm5hbWUgfHwgcC5wcm9wO1xyXG5cdFx0YnRuLmFwcGVuZChubSk7XHJcblx0XHRidG4ub25jbGljayA9IGFzeW5jICgpID0+IHtcclxuXHRcdFx0YXdhaXQgdGhpcy5jaGFuZ2VQcm9wRmlsdGVyKHAsIHBhZ2VzLCBub3RlUGF0aCwgdmlld0lkKTtcclxuXHRcdH07XHJcblx0XHRyZXR1cm4gYnRuO1xyXG5cdH1cclxuXHJcblx0LyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHQgICByZW5kZXJBdXRvVmlldyAoXHVENjA0XHVDN0FDIFx1QjE3OFx1RDJCOCBcdUQzRjRcdUIzNTRcdUM3NTggbWQgXHVCQjM4XHVDMTFDIFx1QkMwRiAuY2FudmFzIFx1RDMwQ1x1Qzc3QyBcdUM3OTBcdUIzRDkgXHVDMjE4XHVDOUQxKVxyXG5cdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcblx0cHVibGljIGFzeW5jIHJlbmRlckF1dG9WaWV3KGR2OiBhbnksIHNldHRpbmdzOiBhbnkgPSB7fSkge1xyXG5cdFx0Y29uc3QgY3VyckZpbGUgPSBkdi5jdXJyZW50KCk/LmZpbGU7XHJcblx0XHRpZiAoIWN1cnJGaWxlKSB7XHJcblx0XHRcdGNvbnNvbGUud2FybihcInJlbmRlckF1dG9WaWV3OiBObyBjdXJyZW50IGZpbGUgZm91bmQuXCIpO1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gKDEpIFx1RDYwNFx1QzdBQyBcdUIxNzhcdUQyQjhcdUM2NDAgXHVCM0Q5XHVDNzdDIFx1RDNGNFx1QjM1NFx1Qzc1OCBtZCBcdUJCMzhcdUMxMUNcdUI0RTRcclxuXHRcdGNvbnN0IG1kUGFnZXMgPSBkdi5wYWdlcygpXHJcblx0XHRcdC53aGVyZSgocDogYW55KSA9PiBwLmZpbGUuZm9sZGVyID09PSBjdXJyRmlsZS5mb2xkZXIpXHJcblx0XHRcdC53aGVyZSgocDogYW55KSA9PiBwLmZpbGUucGF0aCAhPT0gY3VyckZpbGUucGF0aClcclxuXHRcdFx0LmFycmF5KCk7XHJcblxyXG5cdFx0Ly8gKDIpIFx1QjNEOVx1Qzc3QyBcdUQzRjRcdUIzNTQgXHVCMEI0IC5jYW52YXMgXHVEMzBDXHVDNzdDIFx1QzIxOFx1QzlEMVxyXG5cdFx0Y29uc3QgY3VycmVudEZvbGRlciA9IGN1cnJGaWxlLmZvbGRlcjtcclxuXHRcdGNvbnN0IGNhbnZhc0ZpbGVzID0gYXBwLnZhdWx0LmdldEZpbGVzKClcclxuXHRcdFx0LmZpbHRlcihmID0+IGYuZXh0ZW5zaW9uID09PSBcImNhbnZhc1wiKVxyXG5cdFx0XHQuZmlsdGVyKGYgPT4ge1xyXG5cdFx0XHRcdGNvbnN0IHBhcmVudEZvbGRlciA9IGYucGF0aC5zdWJzdHJpbmcoMCwgZi5wYXRoLmxhc3RJbmRleE9mKFwiL1wiKSkgfHwgXCJcIjtcclxuXHRcdFx0XHRyZXR1cm4gcGFyZW50Rm9sZGVyID09PSBjdXJyZW50Rm9sZGVyO1xyXG5cdFx0XHR9KTtcclxuXHJcblx0XHQvLyAoMykgLmNhbnZhcyBcdUQzMENcdUM3N0NcdUM3NDQgZGF0YXZpZXcgXHVEMzk4XHVDNzc0XHVDOUMwIFx1RDYxNVx1QzJERFx1QzczQ1x1Qjg1QyBcdUJDQzBcdUQ2NTggKGZyb250bWF0dGVyLnRpdGxlLCB0YWdzIFx1QkNGNFx1QUMxNSlcclxuXHRcdGNvbnN0IGNhbnZhc1BhZ2VzID0gY2FudmFzRmlsZXMubWFwKGNmID0+IHtcclxuXHRcdFx0cmV0dXJuIHtcclxuXHRcdFx0XHRmaWxlOiB7XHJcblx0XHRcdFx0XHRwYXRoOiBjZi5wYXRoLFxyXG5cdFx0XHRcdFx0bGluazogZHYuZmlsZUxpbmsoY2YucGF0aCksXHJcblx0XHRcdFx0XHRmb2xkZXI6IGN1cnJlbnRGb2xkZXIsXHJcblx0XHRcdFx0fSxcclxuXHRcdFx0XHRmcm9udG1hdHRlcjoge1xyXG5cdFx0XHRcdFx0dGl0bGU6IGNmLmJhc2VuYW1lLFxyXG5cdFx0XHRcdH0sXHJcblx0XHRcdFx0Y3JlYXRlZDogXCJcIixcclxuXHRcdFx0XHRzdGF0dXM6IFwiXCIsXHJcblx0XHRcdFx0dGFnczogXCIjXHVDRTk0XHVCQzg0XHVDMkE0XCJcclxuXHRcdFx0fTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vICg0KSBtZFBhZ2VzICsgY2FudmFzUGFnZXMgXHVBQ0IwXHVENTY5XHJcblx0XHRjb25zdCBwYWdlcyA9IG1kUGFnZXMuY29uY2F0KGNhbnZhc1BhZ2VzKTtcclxuXHJcblx0XHQvLyAoNSkgXHVBRTMwXHVCQ0Y4IHByb3BzIFx1QzEyNFx1QzgxNSAoXHVDMTI0XHVDODE1XHVBQzEyXHVDNzc0IFx1Qzc4OFx1QzczQ1x1QkE3NCBcdUIzMDBcdUNDQjQpXHJcblx0XHRjb25zdCBkZWZhdWx0UHJvcHMgPSBbXHJcblx0XHRcdHsgcHJvcDogXCJmaWxlLmxpbmtcIiwgbmFtZTogXCJUaXRsZVwiLCBmaWx0ZXI6IGZhbHNlLCBjb2x1bW46IHRydWUgfSxcclxuXHRcdFx0eyBwcm9wOiBcImNyZWF0ZWRcIiwgICBuYW1lOiBcIkNyZWF0ZWRcIiwgZmlsdGVyOiB0cnVlLCBjb2x1bW46IHRydWUgfSxcclxuXHRcdFx0eyBwcm9wOiBcInN0YXR1c1wiLCAgICBuYW1lOiBcIlN0YXR1c1wiLCAgZmlsdGVyOiB0cnVlLCBjb2x1bW46IHRydWUgfSxcclxuXHRcdF07XHJcblx0XHRjb25zdCBmaW5hbFByb3BzID0gc2V0dGluZ3MucHJvcHMgfHwgZGVmYXVsdFByb3BzO1xyXG5cclxuXHRcdC8vICg2KSByZW5kZXJWaWV3IFx1RDYzOFx1Q0Q5Q1xyXG5cdFx0YXdhaXQgdGhpcy5yZW5kZXJWaWV3KHNldHRpbmdzLCBmaW5hbFByb3BzLCBwYWdlcywgZHYpO1xyXG5cdH1cclxufVxyXG4iLCAiaW1wb3J0IHsgQXBwIH0gZnJvbSBcIm9ic2lkaWFuXCI7XHJcbmltcG9ydCB7IEludGVyYWN0aXZlVGFibGUgfSBmcm9tIFwiLi9pbnRlcmFjdGl2ZV90YWJsZVwiO1xyXG5cclxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbiAqIGdhbnR0X3RhYmxlLnRzIChcdUNENUNcdUM4ODUgXHVDMjE4XHVDODE1XHVDNTQ4KVxyXG4gKiBcclxuICogXHVDOEZDXHVDNjk0IFx1QkNDMFx1QUNCRCBcdUMwQUNcdUQ1NkQ6XHJcbiAqIDEpIGdhdGhlckRhdGEoKVx1QzVEMFx1QzExQyBcdUQ2NTVcdUM4MTVcdUI0MUMgY29sb3JQYWxldHRlXHVCOTdDIGRhdGEuZmluYWxDb2xvclBhbGV0dGVcdUM1RDAgXHVDODAwXHVDN0E1LlxyXG4gKiAyKSBidWlsZExlZ2VuZEhUTUwsIGJ1aWxkTGVnZW5kRGF0YVx1QzVEMFx1QzExQyBkYXRhLmZpbmFsQ29sb3JQYWxldHRlXHVCOTdDIFx1QzBBQ1x1QzZBOVx1RDU3NCxcclxuICogICAgXHVCQzk0XHVCODQwIFx1QzBDOVx1QzBDMVx1Qzc3NCBcdUMyRTRcdUM4MUMgXHVENDVDXHVDMkRDIFx1QzBDOVx1QzBDMVx1QUNGQyBcdUIzRDlcdUM3N0NcdUQ1NThcdUFDOEMgXHVCOURFXHVDREE0LlxyXG4gKiAzKSByZW5kZXJJbnRlcmFjdGl2ZUJlbG93PXRydWUgXHVDMkRDLFxyXG4gKiAgICAtIGNyZWF0ZVJlc3BvbnNpdmVIUihkdi5jb250YWluZXIpXHVDNzQ0IFx1RDYzOFx1Q0Q5Q1x1Qjg1QyBcdUFENkNcdUJEODRcdUMxMjAgXHVDRDlDXHVCODI1XHJcbiAqICAgIC0gZW5naW5lLnJlbmRlckF1dG9WaWV3KClcdUI4NUMgSW50ZXJhY3RpdmVUYWJsZSBcdUM4MUNcdUIzMDBcdUI4NUMgXHVENDVDXHVDMkRDLlxyXG4gKiA0KSBjcmVhdGVSZXNwb25zaXZlSFIoKVx1QUMwMCBcdUMyRTRcdUM4MUMgRE9NIFx1QzY5NFx1QzE4Qyhkdi5jb250YWluZXIpXHVCOTdDIFx1QkMxQlx1QzU0NFxyXG4gKiAgICBwYXJlbnRFbC5jcmVhdGVFbChcImhyXCIpXHVBQzAwIFx1QjNEOVx1Qzc5MVx1RDU1OFx1QjNDNFx1Qjg1RCBcdUMyMThcdUM4MTVcclxuICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xyXG5cclxuZXhwb3J0IGNsYXNzIEdhbnR0VGFibGUge1xyXG4gIHByaXZhdGUgbm90ZUNvbG9yTWFwOiBSZWNvcmQ8c3RyaW5nLCB7IGNvbG9ySW5kZXg6IG51bWJlciB8IG51bGwgfT47XHJcbiAgcHJpdmF0ZSBjb2xvckluZGV4OiBudW1iZXI7XHJcbiAgcHJpdmF0ZSBsZWdlbmREYXRhOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+O1xyXG5cclxuICBwcml2YXRlIGlzRGFya01vZGU6IGJvb2xlYW47XHJcbiAgcHJpdmF0ZSBpbnRlcmFjdGl2ZVRhYmxlOiBJbnRlcmFjdGl2ZVRhYmxlIHwgbnVsbDtcclxuXHJcbiAgY29uc3RydWN0b3IoKSB7XHJcbiAgICB0aGlzLm5vdGVDb2xvck1hcCA9IHt9O1xyXG4gICAgdGhpcy5jb2xvckluZGV4ID0gMDtcclxuICAgIHRoaXMubGVnZW5kRGF0YSA9IHt9O1xyXG5cclxuICAgIHRoaXMuaXNEYXJrTW9kZSA9IGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmNvbnRhaW5zKFwidGhlbWUtZGFya1wiKTtcclxuICAgIHRoaXMuaW50ZXJhY3RpdmVUYWJsZSA9IG51bGw7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiAoQSkgY3JlYXRlUmVzcG9uc2l2ZUhSXHJcbiAgICogICAgLSBHYW50dCBcdUM1NDRcdUI3OThcdUM1RDAgSW50ZXJhY3RpdmVUYWJsZVx1Qzc0NCBcdUJEOTlcdUM3N0MgXHVCNTRDIFx1QzJEQ1x1QUMwMVx1QzgwMSBcdUFENkNcdUJEODRcdUMxMjAgXHVDMEFDXHVDNkE5XHJcbiAgICogICAgLSBwYXJlbnRFbDogXHVDMkU0XHVDODFDIERPTSBcdUNFRThcdUQxNENcdUM3NzRcdUIxMDgoXHVDNjA4OiBkdi5jb250YWluZXIpXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBjcmVhdGVSZXNwb25zaXZlSFIocGFyZW50RWw6IEhUTUxFbGVtZW50KSB7XHJcbiAgICBsZXQgaHIgPSBwYXJlbnRFbC5jcmVhdGVFbChcImhyXCIpO1xyXG4gICAgaWYgKGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmNvbnRhaW5zKFwidGhlbWUtZGFya1wiKSkge1xyXG4gICAgICBoci5zdHlsZS5ib3JkZXIgPSBcIjFweCBzb2xpZCAjZmZmXCI7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBoci5zdHlsZS5ib3JkZXIgPSBcIjFweCBzb2xpZCAjMDAwXCI7XHJcbiAgICB9XHJcbiAgICBoci5zdHlsZS5tYXJnaW4gPSBcIjEwcHggMFwiO1xyXG4gICAgcmV0dXJuIGhyO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogKEIpIFx1QjJFNFx1RDA2Qy9cdUI3N0NcdUM3NzRcdUQyQjggXHVCQUE4XHVCNERDXHVDNkE5IFx1QUUzMFx1QkNGOCBcdUQzMTRcdUI4MDhcdUQyQjhcclxuICAgKi9cclxuICBwcml2YXRlIGRlZmF1bHREYXJrUGFsZXR0ZXM6IHN0cmluZ1tdID0gW1xyXG4gICAgXCIjZmY2MzYzXCIsIFwiI2ZmYTYwMFwiLCBcIiNmZmNmMDBcIiwgXCIjOGFmZjgwXCIsIFwiIzJlZmZkM1wiLFxyXG4gICAgXCIjMDBmZmZmXCIsIFwiIzI1YzZmY1wiLCBcIiMzMzk5ZmZcIiwgXCIjOTk3NWUyXCIsIFwiI2NjNjZjY1wiLFxyXG4gICAgXCIjZmY2NmZmXCIsIFwiI2ZmNjZjY1wiLCBcIiNmZjY2OTlcIiwgXCIjZmY2NjY2XCIsIFwiI2YwNmI2MFwiLFxyXG4gICAgXCIjZWQ3NzMyXCIsIFwiI2RlOWYwMFwiLCBcIiNhZmZmNjhcIiwgXCIjNTNmZmI0XCIsIFwiIzJmOWVmZlwiXHJcbiAgXTtcclxuICBwcml2YXRlIGRlZmF1bHRMaWdodFBhbGV0dGVzOiBzdHJpbmdbXSA9IFtcclxuICAgIFwiI2ZmOTk5OVwiLCBcIiNmZmMwNGRcIiwgXCIjZmZlNjgwXCIsIFwiI2IzZmZiM1wiLCBcIiM4MGZmZjJcIixcclxuICAgIFwiIzgwZmZmZlwiLCBcIiM5OWRhZmZcIiwgXCIjOTljMmZmXCIsIFwiI2MyYTNlOFwiLCBcIiNkZjllZGZcIixcclxuICAgIFwiI2ZmOTlmZlwiLCBcIiNmZjk5ZTZcIiwgXCIjZmY5OWMyXCIsIFwiI2ZmOTk5OVwiLCBcIiNmNGEzOGNcIixcclxuICAgIFwiI2YxYjA2NlwiLCBcIiNlZWM5MDBcIiwgXCIjYzVmZjhhXCIsIFwiIzg0ZmZjOVwiLCBcIiM3NGJhZmZcIlxyXG4gIF07XHJcblxyXG4gIC8qKlxyXG4gICAqIChDKSBcdUIxNzhcdUQyQjggXHUyMTkyIFx1QzBDOVx1QzBDMSBcdUM3NzhcdUIzNzFcdUMyQTQgXHVENTYwXHVCMkY5XHJcbiAgICovXHJcbiAgcHJpdmF0ZSBhc3NpZ25Db2xvclRvTm90ZShub3RlVGl0bGU6IHN0cmluZywgY29sb3JQYWxldHRlOiBzdHJpbmdbXSkge1xyXG4gICAgaWYgKCF0aGlzLm5vdGVDb2xvck1hcFtub3RlVGl0bGVdKSB7XHJcbiAgICAgIGlmICghQXJyYXkuaXNBcnJheShjb2xvclBhbGV0dGUpIHx8IGNvbG9yUGFsZXR0ZS5sZW5ndGggPT09IDApIHtcclxuICAgICAgICB0aGlzLm5vdGVDb2xvck1hcFtub3RlVGl0bGVdID0geyBjb2xvckluZGV4OiBudWxsIH07XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgY29uc3QgaWR4ID0gdGhpcy5jb2xvckluZGV4ICUgY29sb3JQYWxldHRlLmxlbmd0aDtcclxuICAgICAgICB0aGlzLm5vdGVDb2xvck1hcFtub3RlVGl0bGVdID0geyBjb2xvckluZGV4OiBpZHggfTtcclxuICAgICAgICB0aGlzLmNvbG9ySW5kZXgrKztcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuICBwcml2YXRlIGdldE5vdGVDb2xvcihub3RlVGl0bGU6IHN0cmluZywgY29sb3JQYWxldHRlOiBzdHJpbmdbXSkge1xyXG4gICAgY29uc3QgZW50cnkgPSB0aGlzLm5vdGVDb2xvck1hcFtub3RlVGl0bGVdO1xyXG4gICAgaWYgKCFlbnRyeSB8fCBlbnRyeS5jb2xvckluZGV4ID09PSBudWxsKSByZXR1cm4gXCIjOTk5XCI7XHJcbiAgICByZXR1cm4gY29sb3JQYWxldHRlW2VudHJ5LmNvbG9ySW5kZXhdO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogKEQpIFx1QjM3MFx1Qzc3NFx1RDEzMCBcdUMyMThcdUM5RDE6IFx1QjJFNFx1RDA2Qy9cdUI3N0NcdUM3NzRcdUQyQjggXHVCQUE4XHVCNERDXHVCQ0M0IFx1RDMxNFx1QjgwOFx1RDJCOCBcdUQ2NTVcdUM4MTUgKyBcdUQzOThcdUM3NzRcdUM5QzAgXHVENTQ0XHVEMTMwXHVCOUMxXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBnYXRoZXJEYXRhKGR2OiBhbnksIHNldHRpbmdzOiBhbnkpIHtcclxuICAgIHRoaXMuaXNEYXJrTW9kZSA9IGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmNvbnRhaW5zKFwidGhlbWUtZGFya1wiKTtcclxuXHJcbiAgICBsZXQgZmluYWxDb2xvclBhbGV0dGU6IHN0cmluZ1tdO1xyXG4gICAgaWYgKHRoaXMuaXNEYXJrTW9kZSkge1xyXG4gICAgICBpZiAoQXJyYXkuaXNBcnJheShzZXR0aW5ncy5jb2xvclBhbGV0dGVEYXJrKSAmJiBzZXR0aW5ncy5jb2xvclBhbGV0dGVEYXJrLmxlbmd0aCA+IDApIHtcclxuICAgICAgICBmaW5hbENvbG9yUGFsZXR0ZSA9IHNldHRpbmdzLmNvbG9yUGFsZXR0ZURhcms7XHJcbiAgICAgIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShzZXR0aW5ncy5jb2xvclBhbGV0dGUpICYmIHNldHRpbmdzLmNvbG9yUGFsZXR0ZS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgZmluYWxDb2xvclBhbGV0dGUgPSBzZXR0aW5ncy5jb2xvclBhbGV0dGU7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgZmluYWxDb2xvclBhbGV0dGUgPSB0aGlzLmRlZmF1bHREYXJrUGFsZXR0ZXM7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIC8vIFx1Qjc3Q1x1Qzc3NFx1RDJCOCBcdUJBQThcdUI0RENcclxuICAgICAgaWYgKEFycmF5LmlzQXJyYXkoc2V0dGluZ3MuY29sb3JQYWxldHRlTGlnaHQpICYmIHNldHRpbmdzLmNvbG9yUGFsZXR0ZUxpZ2h0Lmxlbmd0aCA+IDApIHtcclxuICAgICAgICBmaW5hbENvbG9yUGFsZXR0ZSA9IHNldHRpbmdzLmNvbG9yUGFsZXR0ZUxpZ2h0O1xyXG4gICAgICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoc2V0dGluZ3MuY29sb3JQYWxldHRlKSAmJiBzZXR0aW5ncy5jb2xvclBhbGV0dGUubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIGZpbmFsQ29sb3JQYWxldHRlID0gc2V0dGluZ3MuY29sb3JQYWxldHRlO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGZpbmFsQ29sb3JQYWxldHRlID0gdGhpcy5kZWZhdWx0TGlnaHRQYWxldHRlcztcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGN1cnIgPSBkdi5jdXJyZW50Py4oKTtcclxuICAgIGlmICghY3Vycj8uZmlsZSkge1xyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIGR2LFxyXG4gICAgICAgIGFsbFBhZ2VzOiBbXSxcclxuICAgICAgICB5ZWFyOiAwLFxyXG4gICAgICAgIG1vbnRoOiAwLFxyXG4gICAgICAgIHRvdGFsRGF5czogMCxcclxuICAgICAgICBmaW5hbENvbG9yUGFsZXR0ZVxyXG4gICAgICB9O1xyXG4gICAgfVxyXG4gICAgY29uc3QgY3VycmVudEZpbGUgPSBjdXJyLmZpbGU7XHJcblxyXG4gICAgbGV0IGJhc2VQYWdlczogYW55W10gPSBbXTtcclxuICAgIGlmIChzZXR0aW5ncy5jdXN0b21QYWdlcyAmJiBBcnJheS5pc0FycmF5KHNldHRpbmdzLmN1c3RvbVBhZ2VzKSkge1xyXG4gICAgICBiYXNlUGFnZXMgPSBzZXR0aW5ncy5jdXN0b21QYWdlcztcclxuICAgIH0gZWxzZSBpZiAoc2V0dGluZ3MucGF0aCAmJiB0eXBlb2Ygc2V0dGluZ3MucGF0aCA9PT0gXCJzdHJpbmdcIikge1xyXG4gICAgICBiYXNlUGFnZXMgPSBkdi5wYWdlcyhgXCIke3NldHRpbmdzLnBhdGh9XCJgKVxyXG4gICAgICAgIC53aGVyZSgocDogYW55KSA9PiBwLmZpbGUucGF0aCAhPT0gY3VycmVudEZpbGUucGF0aClcclxuICAgICAgICAuYXJyYXkoKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGJhc2VQYWdlcyA9IGR2LnBhZ2VzKClcclxuICAgICAgICAud2hlcmUoKHA6IGFueSkgPT4gcC5maWxlLmZvbGRlciA9PT0gY3VycmVudEZpbGUuZm9sZGVyKVxyXG4gICAgICAgIC53aGVyZSgocDogYW55KSA9PiBwLmZpbGUucGF0aCAhPT0gY3VycmVudEZpbGUucGF0aClcclxuICAgICAgICAuYXJyYXkoKTtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgYWxsUGFnZXMgPSBiYXNlUGFnZXMuZmlsdGVyKChwOiBhbnkpID0+IHtcclxuICAgICAgbGV0IHMgPSBwLnNpdHVhdGlvbjtcclxuICAgICAgaWYgKHMgPT09IFwiXHVDNzkxXHVDNUM1XHVDNjQ0XHVCOENDXCIpIHJldHVybiBmYWxzZTtcclxuICAgICAgaWYgKCFwLmNyZWF0ZWQgfHwgIXAuZW5kKSByZXR1cm4gZmFsc2U7XHJcbiAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfSk7XHJcblxyXG4gICAgbGV0IG5vdyA9IG5ldyBEYXRlKCk7XHJcbiAgICBsZXQgeWVhciA9IG5vdy5nZXRGdWxsWWVhcigpO1xyXG4gICAgbGV0IG1vbnRoID0gbm93LmdldE1vbnRoKCk7XHJcbiAgICBsZXQgdG90YWxEYXlzID0gbmV3IERhdGUoeWVhciwgbW9udGggKyAxLCAwKS5nZXREYXRlKCk7XHJcblxyXG4gICAgcmV0dXJuIHsgZHYsIGFsbFBhZ2VzLCB5ZWFyLCBtb250aCwgdG90YWxEYXlzLCBmaW5hbENvbG9yUGFsZXR0ZSB9O1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogKEUpIFx1QUMwNFx1RDJCOCBcdUQxNENcdUM3NzRcdUJFMTQgXHVDMEREXHVDMTMxXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBidWlsZEdhbnR0VGFibGUoc2V0dGluZ3M6IGFueSwgZGF0YTogYW55KSB7XHJcbiAgICBjb25zdCB7IGFsbFBhZ2VzLCB0b3RhbERheXMgfSA9IGRhdGE7XHJcblxyXG4gICAgbGV0IHRoZWFkSFRNTCA9IGBcclxuICAgICAgPHRoZWFkPlxyXG4gICAgICAgIDx0cj5cclxuICAgICAgICAgIDx0aCBjbGFzcz1cImdhbnR0LWNvcm5lci1jb2xcIj48L3RoPlxyXG4gICAgICAgICAgJHtcclxuICAgICAgICAgICAgQXJyYXkuZnJvbSh7IGxlbmd0aDogdG90YWxEYXlzIH0sIChfLCBpKSA9PiB7XHJcbiAgICAgICAgICAgICAgbGV0IGQgPSBpICsgMTtcclxuICAgICAgICAgICAgICBsZXQgZGF5U3RyID0gU3RyaW5nKGQpLnBhZFN0YXJ0KDIsIFwiMFwiKTtcclxuICAgICAgICAgICAgICByZXR1cm4gYDx0aCBjbGFzcz1cImdhbnR0LWRheS1jb2xcIj4ke2RheVN0cn08L3RoPmA7XHJcbiAgICAgICAgICAgIH0pLmpvaW4oXCJcIilcclxuICAgICAgICAgIH1cclxuICAgICAgICA8L3RyPlxyXG4gICAgICA8L3RoZWFkPmA7XHJcblxyXG4gICAgbGV0IHRib2R5SFRNTCA9IFwiPHRib2R5PlwiO1xyXG4gICAgZm9yIChsZXQgcGFnZSBvZiBhbGxQYWdlcykge1xyXG4gICAgICBsZXQgZm1UaXRsZSA9IHBhZ2UudGl0bGUgfHwgcGFnZS5maWxlLm5hbWUgfHwgXCJVbnRpdGxlZFwiO1xyXG4gICAgICBsZXQgc2l0dWF0aW9uID0gcGFnZS5zaXR1YXRpb24gfHwgXCJcIjtcclxuXHJcbiAgICAgIGlmIChzaXR1YXRpb24gPT09IFwiXHVDNzdDXHVDMkRDXHVDOTExXHVDOUMwXCIpIHtcclxuICAgICAgICB0aGlzLm5vdGVDb2xvck1hcFtmbVRpdGxlXSA9IHsgY29sb3JJbmRleDogbnVsbCB9O1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMuYXNzaWduQ29sb3JUb05vdGUoZm1UaXRsZSwgZGF0YS5maW5hbENvbG9yUGFsZXR0ZSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHRib2R5SFRNTCArPSBgPHRyPmA7XHJcbiAgICAgIHRib2R5SFRNTCArPSBgPHRkIGNsYXNzPVwiZ2FudHQtbm90ZS1jb2xcIj4ke2ZtVGl0bGV9PC90ZD5gO1xyXG5cclxuICAgICAgZm9yIChsZXQgZCA9IDE7IGQgPD0gdG90YWxEYXlzOyBkKyspIHtcclxuICAgICAgICB0Ym9keUhUTUwgKz0gYFxyXG4gICAgICAgICAgPHRkIGNsYXNzPVwiZ2FudHQtY2VsbFwiXHJcbiAgICAgICAgICAgICAgZGF0YS1ub3RlLXRpdGxlPVwiJHtmbVRpdGxlfVwiXHJcbiAgICAgICAgICAgICAgZGF0YS1kYXk9XCIke2R9XCJcclxuICAgICAgICAgICAgICBkYXRhLXNpdHVhdGlvbj1cIiR7c2l0dWF0aW9ufVwiPjwvdGQ+YDtcclxuICAgICAgfVxyXG4gICAgICB0Ym9keUhUTUwgKz0gYDwvdHI+YDtcclxuICAgIH1cclxuICAgIHRib2R5SFRNTCArPSBcIjwvdGJvZHk+XCI7XHJcblxyXG4gICAgcmV0dXJuIGA8dGFibGUgY2xhc3M9XCJnYW50dC10YWJsZVwiPiR7dGhlYWRIVE1MfSR7dGJvZHlIVE1MfTwvdGFibGU+YDtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIChGKSBcdUJDOTRcdUI4NDBcclxuICAgKi9cclxuICBwcml2YXRlIGdldExlZ2VuZENvbG9yKHRpdGxlOiBzdHJpbmcsIHBhbGV0dGU6IHN0cmluZ1tdKSB7XHJcbiAgICBjb25zdCBlbnRyeSA9IHRoaXMubm90ZUNvbG9yTWFwW3RpdGxlXTtcclxuICAgIGlmICghZW50cnkpIHJldHVybiBcIiM5OTlcIjtcclxuICAgIGlmIChlbnRyeS5jb2xvckluZGV4ID09PSBudWxsKSByZXR1cm4gXCIjODg4XCI7XHJcbiAgICByZXR1cm4gcGFsZXR0ZVtlbnRyeS5jb2xvckluZGV4XSB8fCBcIiM5OTlcIjtcclxuICB9XHJcbiAgcHJpdmF0ZSBidWlsZExlZ2VuZEhUTUwoc2V0dGluZ3M6IGFueSwgZGF0YTogYW55KSB7XHJcbiAgICAvLyBcdUM3NzRcdUM4MUMgZGF0YS5maW5hbENvbG9yUGFsZXR0ZVx1QzVEMCBcdUMyRTRcdUM4MUMgXHVDMEFDXHVDNkE5XHVCNDFDIFx1QzBDOVx1QzBDMSBcdUJDMzBcdUM1RjRcdUM3NzQgXHVDNzg4XHVDNzRDXHJcbiAgICBjb25zdCBwYWxldHRlID0gZGF0YS5maW5hbENvbG9yUGFsZXR0ZTtcclxuICAgIGxldCBub3RlVGl0bGVzID0gT2JqZWN0LmtleXModGhpcy5ub3RlQ29sb3JNYXApO1xyXG4gICAgaWYgKG5vdGVUaXRsZXMubGVuZ3RoID09PSAwKSByZXR1cm4gXCJcIjtcclxuXHJcbiAgICBub3RlVGl0bGVzLnNvcnQoKTtcclxuICAgIGxldCBsZWdlbmRJdGVtcyA9IG5vdGVUaXRsZXMubWFwKHRpdGxlID0+IHtcclxuICAgICAgbGV0IGMgPSB0aGlzLmdldExlZ2VuZENvbG9yKHRpdGxlLCBwYWxldHRlKTtcclxuICAgICAgcmV0dXJuIGBcclxuICAgICAgICA8ZGl2IGNsYXNzPVwiZ2FudHQtbGVnZW5kLWl0ZW1cIj5cclxuICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZ2FudHQtbGVnZW5kLWNvbG9yXCIgc3R5bGU9XCJiYWNrZ3JvdW5kLWNvbG9yOiR7Y307XCI+PC9zcGFuPlxyXG4gICAgICAgICAgPHNwYW4gY2xhc3M9XCJnYW50dC1sZWdlbmQtdGV4dFwiPiR7dGl0bGV9PC9zcGFuPlxyXG4gICAgICAgIDwvZGl2PmA7XHJcbiAgICB9KS5qb2luKFwiXCIpO1xyXG5cclxuICAgIHJldHVybiBgPGRpdiBjbGFzcz1cImdhbnR0LWxlZ2VuZFwiPiR7bGVnZW5kSXRlbXN9PC9kaXY+YDtcclxuICB9XHJcbiAgcHJpdmF0ZSBidWlsZExlZ2VuZERhdGEoZGF0YTogYW55KSB7XHJcbiAgICBjb25zdCBwYWxldHRlID0gZGF0YS5maW5hbENvbG9yUGFsZXR0ZTtcclxuICAgIGxldCByZXN1bHQ6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7fTtcclxuICAgIGZvciAoY29uc3QgdGl0bGUgaW4gdGhpcy5ub3RlQ29sb3JNYXApIHtcclxuICAgICAgY29uc3QgZW50cnkgPSB0aGlzLm5vdGVDb2xvck1hcFt0aXRsZV07XHJcbiAgICAgIGlmICghZW50cnkpIHtcclxuICAgICAgICByZXN1bHRbdGl0bGVdID0gXCIjOTk5XCI7XHJcbiAgICAgICAgY29udGludWU7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKGVudHJ5LmNvbG9ySW5kZXggPT09IG51bGwpIHtcclxuICAgICAgICByZXN1bHRbdGl0bGVdID0gXCIjODg4XCI7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmVzdWx0W3RpdGxlXSA9IHBhbGV0dGVbZW50cnkuY29sb3JJbmRleF0gfHwgXCIjOTk5XCI7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiByZXN1bHQ7XHJcbiAgfVxyXG4gIHB1YmxpYyBnZXRMZWdlbmREYXRhRnJvbURhdGEoZGF0YTogYW55KSB7XHJcbiAgICByZXR1cm4gdGhpcy5idWlsZExlZ2VuZERhdGEoZGF0YSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiAoRykgXHVCODBDXHVCMzU0IFx1RDU2OFx1QzIxOFxyXG4gICAqL1xyXG4gIHB1YmxpYyBhc3luYyByZW5kZXJWaWV3KGR2OiBhbnksIHNldHRpbmdzOiBhbnkgPSB7fSkge1xyXG4gICAgaWYgKCFkdi5jdXJyZW50Py4oKSB8fCAhZHYuY3VycmVudCgpPy5maWxlKSB7XHJcbiAgICAgIGNvbnNvbGUud2FybihcIkdhbnR0VGFibGU6IE5vIGN1cnJlbnQgZmlsZSAtIHJldHVybmluZyBxdWlldGx5LlwiKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgaWYgKCFzZXR0aW5nc1tcImlkXCJdIHx8IHR5cGVvZiBzZXR0aW5nc1tcImlkXCJdICE9PSBcInN0cmluZ1wiKSB7XHJcbiAgICAgIHNldHRpbmdzW1wiaWRcIl0gPSBcImdhbnR0LWF1dG8tXCIgKyBEYXRlLm5vdygpICsgXCItXCIgKyBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDE2KS5zbGljZSgyLCA2KTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmlzRGFya01vZGUgPSBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5jb250YWlucyhcInRoZW1lLWRhcmtcIik7XHJcblxyXG4gICAgbGV0IG5vdyA9IG5ldyBEYXRlKCk7XHJcbiAgICBsZXQgbW9udGhOYW1lID0gbmV3IEludGwuRGF0ZVRpbWVGb3JtYXQoXCJlblwiLCB7IG1vbnRoOiBcImxvbmdcIiB9KS5mb3JtYXQobm93KTtcclxuICAgIGR2LnBhcmFncmFwaChgXHVEODNEXHVEREQzXHVGRTBGICoqJHttb250aE5hbWV9KipgKTtcclxuXHJcbiAgICAvLyBzdGF0ZSBcdUI5QUNcdUMxNEJcclxuICAgIHRoaXMubm90ZUNvbG9yTWFwID0ge307XHJcbiAgICB0aGlzLmNvbG9ySW5kZXggPSAwO1xyXG4gICAgdGhpcy5sZWdlbmREYXRhID0ge307XHJcblxyXG4gICAgLy8gKDEpIFx1QjM3MFx1Qzc3NFx1RDEzMCBcdUMyMThcdUM5RDFcclxuICAgIGxldCBkYXRhID0gdGhpcy5nYXRoZXJEYXRhKGR2LCBzZXR0aW5ncyk7XHJcbiAgICBpZiAoIWRhdGEgfHwgZGF0YS55ZWFyID09PSAwIHx8IGRhdGEudG90YWxEYXlzID09PSAwKSB7XHJcbiAgICAgIGR2LnBhcmFncmFwaChcIiooTm8gR2FudHQgZGF0YSkqXCIpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgLy8gKDIpIFx1RDE0Q1x1Qzc3NFx1QkUxNCArIFx1QkM5NFx1Qjg0MFxyXG4gICAgbGV0IHRhYmxlSFRNTCA9IHRoaXMuYnVpbGRHYW50dFRhYmxlKHNldHRpbmdzLCBkYXRhKTtcclxuICAgIGxldCBsZWdlbmRIVE1MID0gKHNldHRpbmdzLnNob3dMZWdlbmQgPT09IGZhbHNlKVxyXG4gICAgICA/IFwiXCJcclxuICAgICAgOiB0aGlzLmJ1aWxkTGVnZW5kSFRNTChzZXR0aW5ncywgZGF0YSk7XHJcblxyXG4gICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgIGNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFwiZ2FudHQtY29udGFpbmVyXCIpO1xyXG4gICAgY29udGFpbmVyLmlubmVySFRNTCA9IHRhYmxlSFRNTCArIGxlZ2VuZEhUTUw7XHJcbiAgICBkdi5jb250YWluZXIuYXBwZW5kQ2hpbGQoY29udGFpbmVyKTtcclxuXHJcbiAgICAvLyAoMykgXHVDMEM5XHVDMEMxIFx1QzgwMVx1QzZBOSArIFx1QzYyNFx1QjI5OCBcdUFDMTVcdUM4NzBcclxuICAgIHRoaXMuYXBwbHlOb3RlQ29sb3JzKGNvbnRhaW5lciwgZGF0YSk7XHJcbiAgICB0aGlzLmhpZ2hsaWdodFRvZGF5KGNvbnRhaW5lciwgZGF0YSk7XHJcblxyXG4gICAgLy8gKDQpIGxlZ2VuZCBkYXRhXHJcbiAgICB0aGlzLmxlZ2VuZERhdGEgPSB0aGlzLmJ1aWxkTGVnZW5kRGF0YShkYXRhKTtcclxuICAgIGlmIChzZXR0aW5ncy5kZWJ1Z0xlZ2VuZCA9PT0gdHJ1ZSkge1xyXG4gICAgICBkdi5wYXJhZ3JhcGgoXCIqKltMZWdlbmQgRGF0YV0qKlwiKTtcclxuICAgICAgZHYucGFyYWdyYXBoKEpTT04uc3RyaW5naWZ5KHRoaXMubGVnZW5kRGF0YSwgbnVsbCwgMikpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vICg1KSByZW5kZXJJbnRlcmFjdGl2ZUJlbG93XHJcbiAgICBpZiAoc2V0dGluZ3MucmVuZGVySW50ZXJhY3RpdmVCZWxvdyA9PT0gdHJ1ZSkge1xyXG4gICAgICAvLyBcdUFDMDRcdUQyQjggXHVDNTQ0XHVCNzk4IFx1QUQ2Q1x1QkQ4NFx1QzEyMCBcdTIxOTIgZHYuY29udGFpbmVyIChET00gXHVDNjk0XHVDMThDKVx1QzVEMCBociBcdUNEOTRcdUFDMDBcclxuICAgICAgdGhpcy5jcmVhdGVSZXNwb25zaXZlSFIoZHYuY29udGFpbmVyKTtcclxuXHJcbiAgICAgIC8vIFx1QzU0NFx1Qjc5OFx1Q0FCRCBJbnRlcmFjdGl2ZVRhYmxlXHJcbiAgICAgIGNvbnN0IGVuZ2luZSA9IChnbG9iYWxUaGlzIGFzIGFueSkubWluaVRhYmxlR2xvYmFsPy5lbmdpbmU7XHJcbiAgICAgIGlmIChlbmdpbmUgJiYgdHlwZW9mIGVuZ2luZS5yZW5kZXJBdXRvVmlldyA9PT0gXCJmdW5jdGlvblwiKSB7XHJcbiAgICAgICAgbGV0IGl0U2V0dGluZ3MgPSBzZXR0aW5ncy5pbnRlcmFjdGl2ZU9wdGlvbnMgfHwge307XHJcbiAgICAgICAgYXdhaXQgZW5naW5lLnJlbmRlckF1dG9WaWV3KGR2LCBpdFNldHRpbmdzKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogKEgpIGFwcGx5Tm90ZUNvbG9yc1xyXG4gICAqL1xyXG4gIHByaXZhdGUgYXBwbHlOb3RlQ29sb3JzKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsIGRhdGE6IGFueSkge1xyXG4gICAgY29uc3QgeyBkdiwgYWxsUGFnZXMsIHllYXIsIG1vbnRoLCBmaW5hbENvbG9yUGFsZXR0ZSB9ID0gZGF0YTtcclxuXHJcbiAgICBhbGxQYWdlcy5mb3JFYWNoKChwYWdlOiBhbnkpID0+IHtcclxuICAgICAgbGV0IGZtVGl0bGUgPSBwYWdlLnRpdGxlIHx8IHBhZ2UuZmlsZS5uYW1lIHx8IFwiVW50aXRsZWRcIjtcclxuICAgICAgbGV0IHNpdHVhdGlvbiA9IHBhZ2Uuc2l0dWF0aW9uIHx8IFwiXCI7XHJcblxyXG4gICAgICBsZXQgbm90ZUNvbG9yID0gXCIjOTk5XCI7XHJcbiAgICAgIGlmIChzaXR1YXRpb24gPT09IFwiXHVDNzdDXHVDMkRDXHVDOTExXHVDOUMwXCIpIG5vdGVDb2xvciA9IFwiIzg4OFwiO1xyXG4gICAgICBlbHNlIG5vdGVDb2xvciA9IHRoaXMuZ2V0Tm90ZUNvbG9yKGZtVGl0bGUsIGZpbmFsQ29sb3JQYWxldHRlKTtcclxuXHJcbiAgICAgIGxldCBzdGFydERWID0gZHYuZGF0ZShwYWdlLmNyZWF0ZWQpO1xyXG4gICAgICBsZXQgZW5kRFYgICA9IGR2LmRhdGUocGFnZS5lbmQpO1xyXG4gICAgICBpZiAoIXN0YXJ0RFYgfHwgIWVuZERWKSByZXR1cm47XHJcblxyXG4gICAgICBsZXQgc3RhcnRKUyA9IHN0YXJ0RFYudG9KU0RhdGUoKTtcclxuICAgICAgbGV0IGVuZEpTICAgPSBlbmREVi50b0pTRGF0ZSgpO1xyXG5cclxuICAgICAgbGV0IHRkcyA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKGB0ZFtkYXRhLW5vdGUtdGl0bGU9XCIke2ZtVGl0bGV9XCJdYCk7XHJcbiAgICAgIHRkcy5mb3JFYWNoKCh0ZDogYW55KSA9PiB7XHJcbiAgICAgICAgbGV0IGQgPSBwYXJzZUludCh0ZC5nZXRBdHRyaWJ1dGUoXCJkYXRhLWRheVwiKSwgMTApO1xyXG4gICAgICAgIGxldCB0aGlzRGF5ID0gbmV3IERhdGUoeWVhciwgbW9udGgsIGQpO1xyXG4gICAgICAgIGlmICh0aGlzRGF5ID49IHN0YXJ0SlMgJiYgdGhpc0RheSA8PSBlbmRKUykge1xyXG4gICAgICAgICAgdGQuc3R5bGUuc2V0UHJvcGVydHkoXCJiYWNrZ3JvdW5kLWNvbG9yXCIsIG5vdGVDb2xvciwgXCJpbXBvcnRhbnRcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogKEkpIGhpZ2hsaWdodFRvZGF5XHJcbiAgICovXHJcbiAgcHJpdmF0ZSBoaWdobGlnaHRUb2RheShjb250YWluZXI6IEhUTUxFbGVtZW50LCBkYXRhOiBhbnkpIHtcclxuICAgIGxldCBub3cgPSBuZXcgRGF0ZSgpO1xyXG4gICAgbGV0IHRvZGF5RGF5ID0gbm93LmdldERhdGUoKTtcclxuXHJcbiAgICBsZXQgZGF5Q2VsbHMgPSBjb250YWluZXIucXVlcnlTZWxlY3RvckFsbChgdGRbZGF0YS1kYXk9XCIke3RvZGF5RGF5fVwiXWApO1xyXG4gICAgZGF5Q2VsbHMuZm9yRWFjaCh0ZCA9PiB0ZC5jbGFzc0xpc3QuYWRkKFwiZ2FudHQtdG9kYXktY29sXCIpKTtcclxuICB9XHJcbn1cclxuIl0sCiAgIm1hcHBpbmdzIjogIjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsSUFBQUEsbUJBVU87OztBQ1ZQLHNCQUEyQjtBQUVwQixJQUFNLG1CQUFOLE1BQXVCO0FBQUEsRUFBdkI7QUFJTjtBQUFBLFNBQWlCLGVBQWU7QUFDaEMsU0FBaUIsY0FBYztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLdkIsY0FBYyxVQUF1QjtBQUM1QyxRQUFJLEtBQUssU0FBUyxJQUFJO0FBQ3RCLFFBQUksQ0FBQyxNQUFNLE9BQU8sT0FBTyxVQUFVO0FBQ2xDLFdBQUssVUFBVSxLQUFLLElBQUksSUFBSSxNQUFNLEtBQUssT0FBTyxFQUFFLFNBQVMsRUFBRSxFQUFFLE1BQU0sR0FBRyxDQUFDO0FB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
